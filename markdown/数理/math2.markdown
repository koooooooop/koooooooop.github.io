好的，我将依照你提供的完整章节目录，逐节进行深度研究：

* 提炼每节的核心概念与公式
* 给出典型例题（偏重期末可能出现的计算题或简答题）
* 分步骤详细讲解解题过程与答案
* 总结解题通法与考试技巧

我将从第二章开始，按章节顺序系统整理内容，并编排成结构清晰、查阅方便的复习资料，帮助你应对开卷期末考试。
请稍等，我整理好第一批内容后会立即展示给你。


## 第二章 多变量函数的变化率

### 2.1 偏导数

\*\*核心概念与公式讲解：\*\*偏导数刻画多元函数在某一自变量方向上的瞬时变化率。当计算函数 \$z=f(x,y)\$ 关于 \$x\$ 的偏导数时，将 \$y\$ 视为常数，仅对 \$x\$ 求导；反之亦然。偏导数的定义是极限形式：

$$f_x(x_0,y_0)=\lim_{h\to 0}\frac{f(x_0+h,y_0)-f(x_0,y_0)}{h},\qquad 
f_y(x_0,y_0)=\lim_{h\to 0}\frac{f(x_0,y_0+h)-f(x_0,y_0)}{h}.$$ 
如果上述极限存在，便得到偏导函数 $f_x(x,y)$ 和 $f_y(x,y)$。**几何解释：**偏导数是固定另一变量切片上的单变量导数，表示在该方向上曲面斜率。

**典型例题：**求函数 $f(x,y)=x^2y+2x+y^3$ 的偏导数 $f_x(x,y)$ 和 $f_y(x,y)$。

**解题步骤：**
1. **关于 $x$ 的偏导 $f_x$:** 将 $y$ 视为常数，对 $x$ 求导。$f(x,y)=x^2y+2x+y^3$ 可看作 $y\cdot x^2 + 2x + y^3$，其中$y^3$为常数项。因此 
$$f_x(x,y)=2xy+2.$$ 
（更严格地，可用定义检验：$f_x=\lim_{h\to0}\frac{(x+h)^2y+2(x+h)+y^3-(x^2y+2x+y^3)}{h}=\lim_{h\to0}\frac{2xhy+h^2y+2h}{h}=2xy+2$.）
2. **关于 $y$ 的偏导 $f_y$:** 将 $x$ 视为常数，对 $y$ 求导。$f(x,y)=x^2y+2x+y^3$ 看作 $x^2\cdot y + y^3 + 2x$，其中 $2x$ 为常数项。因此 
$$f_y(x,y)=x^2+3y^2.$$

**答案：** $f_x(x,y)=2xy+2,\quad f_y(x,y)=x^2+3y^2$。

**通用解题步骤总结与考试技巧：**
- 计算偏导时，**将其他变量当常数**，按单变量微分规则求导即可。注意保留与被微分变量有关的项，对常数项导数为0。
- 若需使用偏导数定义证明或推导，按照极限定义展开，步骤要清晰，极限过程中高阶小量可忽略。
- **检查可微性：**偏导存在不代表函数整体可微，但在期末考试中通常假设基本函数光滑连续，可直接计算偏导。不连续点可能导致偏导不存在，需要注意题目条件。

### 2.2.1 切平面和全微分
**核心概念与公式讲解：**对于可微函数 $z=f(x,y)$，在点 $(x_0,y_0)$ 处可用**切平面**近似曲面。切平面的方程为 
$$z - f(x_0,y_0)=f_x(x_0,y_0)\,(x-x_0)+f_y(x_0,y_0)\,(y-y_0)\,.$$ 
**全微分**是对应的线性近似：$\mathrm{d}f = f_x(x_0,y_0)\mathrm{d}x + f_y(x_0,y_0)\mathrm{d}y$，它给出在微小增量下函数值的线性变化。几何上，切平面由该点处的偏导数（斜率）确定，其方程就是全微分表达式。全微分近似还可用于估计函数值的改变量（线性化）。

**典型例题：**设 $f(x,y)=x^2+2xy$。求：(1) $f$ 在点 $(1,1)$ 处的切平面方程；(2) 利用线性近似估计 $f(1.1,\,0.9)$ 的值。

**解题步骤：**
1. **计算偏导数：** $f_x(x,y)=2x+2y$，$f_y(x,y)=2x$. 在$(1,1)$处有 $f_x(1,1)=2+2=4$，$f_y(1,1)=2(1)=2$。
2. **切平面方程：**先求函数值 $f(1,1)=1^2+2(1)(1)=3$。代入切平面公式：
   $$z - 3 = 4(x-1) + 2(y-1).$$ 
   化简得切平面：$z = 4x + 2y - 3$。
3. **线性近似估计：** $\mathrm{d}f = 4\,\mathrm{d}x + 2\,\mathrm{d}y$，因此当 $x$ 从1变到1.1（$\mathrm{d}x=0.1$），$y$从1变到0.9（$\mathrm{d}y=-0.1$）时， 
   $$\Delta f \approx \mathrm{d}f = 4(0.1) + 2(-0.1) = 0.4 - 0.2 = 0.2.$$ 
   所以 $f(1.1,0.9)\approx f(1,1) + 0.2 = 3.2$（线性近似值）。
4. **实际比较（非必须）：**可计算真实值 $f(1.1,0.9) = (1.1)^2 + 2(1.1)(0.9) = 1.21 + 1.98 = 3.19$. 线性近似得到3.2，与真实值3.19非常接近。

**答案：** (1) 切平面：$z=4x+2y-3$；(2) $f(1.1,0.9)\approx3.20$。

**通用解题步骤总结与考试技巧：**
- **切平面公式**记忆：$z - f(x_0,y_0) = f_x(x_0,y_0)(x-x_0)+f_y(x_0,y_0)(y-y_0)$。这是多元函数微分的核心线性模型，求切平面就是求偏导再带入公式。
- 利用**全微分线性化**可以快速近似函数值变化，考试中常考“小增量估计”题。步骤是计算偏导，在给定增量下套用 $\mathrm{d}f$。
- 切平面求出后，可用于判断局部变化趋势：切平面的斜率方向反映函数增加或减少的方向。

### 2.2.2 链式法则
**核心概念与公式讲解：**链式法则推广了复合函数求导至多元情形。若 $z=f(u,v)$，其中 $u=g(x)$, $v=h(x)$，则单参数情形 
$$\frac{\mathrm{d}z}{\mathrm{d}x} = f_u\,\frac{\mathrm{d}u}{\mathrm{d}x} + f_v\,\frac{\mathrm{d}v}{\mathrm{d}x}.$$ 
一般地，若 $z=f(x,y)$ 且 $x=x(t),\,y=y(t)$，则 
$$\frac{\mathrm{d}z}{\mathrm{d}t} = f_x\,\frac{\mathrm{d}x}{\mathrm{d}t} + f_y\,\frac{\mathrm{d}y}{\mathrm{d}t}.$$ 
对于多重复合，例如 $z=f(u,v),\,u=u(x,y),\,v=v(x,y)$，则对 $x$ 的偏导满足 
$$\frac{\partial z}{\partial x} = f_u\,\frac{\partial u}{\partial x} + f_v\,\frac{\partial v}{\partial x},$$ 
$\frac{\partial z}{\partial y}$ 类似。**路径图法：**在复杂嵌套下，可画出依赖关系树，从自变量沿各路径乘对应偏导再求和。

**典型例题：**设 $z = f(x,y) = x^2 + y^2$，其中 $x = e^t,\; y = \sin t$。求 $\frac{\mathrm{d}z}{\mathrm{d}t}$ 并在 $t=0$ 处计算其值。

**解题步骤：**
1. **求组成部分的导数：**先计算 $f_x$ 和 $f_y$。这里 $f(x,y)=x^2+y^2$，所以 $f_x=2x,\;f_y=2y$。然后计算 $x(t)$ 和 $y(t)$ 对 $t$ 的导数：$x'(t)=\frac{\mathrm{d}}{\mathrm{d}t}e^t = e^t$，$y'(t)=\frac{\mathrm{d}}{\mathrm{d}t}\sin t = \cos t$。
2. **套用链式法则：** 
   $$\frac{\mathrm{d}z}{\mathrm{d}t} = f_x(x(t),y(t))\cdot x'(t) + f_y(x(t),y(t))\cdot y'(t).$$ 
   代入已知表达式：
   $$\frac{\mathrm{d}z}{\mathrm{d}t} = 2x \cdot e^t + 2y \cdot \cos t,$$ 
   其中 $x=e^t,\;y=\sin t$。因此简化为 
   $$\frac{\mathrm{d}z}{\mathrm{d}t} = 2e^t \cdot e^t + 2\sin t \cdot \cos t = 2e^{2t} + 2\sin t\cos t.$$
3. **计算 $t=0$ 处的值：**将 $t=0$ 代入上式：
   $$\left.\frac{\mathrm{d}z}{\mathrm{d}t}\right|_{t=0} = 2e^{0} + 2\sin 0 \cos 0 = 2(1) + 2(0) = 2.$$
   或直接利用原函数：$x(0)=1,\;y(0)=0$，此时 $z=x^2+y^2=1$；稍后时刻 $t=\Delta t$，$z=(e^{\Delta t})^2+(\sin\Delta t)^2 \approx 1 + 2\Delta t$，变化率约 $2$，吻合结果。

**答案：** $\frac{\mathrm{d}z}{\mathrm{d}t} = 2e^{2t} + 2\sin t\cos t$，特别地 $t=0$ 时 $\frac{\mathrm{d}z}{\mathrm{d}t}=2$。

**通用解题步骤总结与考试技巧：**
- **识别复合关系**：列出每层变量关系，写出对应的导数/偏导。对于多元复合，可分别对每个中间变量应用链式法则，再累加。
- **树状图辅助**：画出 $t \to (x,y) \to z$ 等依赖图，路径乘积对应每项导数，有助于防止遗漏项。
- 对于多参数链式求偏导，**注意求和**：每个直接依赖路径都要考虑。如 $z=f(u,v)$，$u=u(x,y),v=v(x,y)$ 时，$\partial z/\partial x$ 有两个项，对应 $u$ 和 $v$ 的贡献。
- 考试中链式法则常见题型：给出 $z$ 为参数的复合函数或隐函数关系，让求导数。务必准确计算各偏导并代入公式，必要时整理简化结果。

### 2.2.3 方向导数和梯度
**核心概念与公式讲解**：**方向导数**$D_{\mathbf{u}}f(x_0,y_0)$表示函数在给定点沿某单位方向$\mathbf{u}=(\cos\theta,\sin\theta)$的变化率，定义为 
$$D_{\mathbf{u}}f(x_0,y_0) = \lim_{h\to0}\frac{f(x_0+h\cos\theta,\;y_0+h\sin\theta)-f(x_0,y_0)}{h}.$$ 
方向导数存在并连续可微时，有公式 
$$D_{\mathbf{u}}f(x_0,y_0) = f_x(x_0,y_0)\cos\theta + f_y(x_0,y_0)\sin\theta = \nabla f(x_0,y_0)\cdot \mathbf{u},$$ 
其中 $\nabla f=(f_x,f_y)$ 是**梯度**向量。**梯度**指向函数增长最快的方向，其方向导数最大，且 $|\nabla f|$ 等于该最大增长率。梯度与水平等高线正交：$\nabla f$ 垂直于通过该点的等值曲线（在三维中垂直于等值面）。

**典型例题**：设 $f(x,y) = x^2 + 2y$，求：(1) 在点 $P(1,2)$ 处沿方向 $\mathbf{v}=(3,4)$ 的方向导数；(2) 点 $P$ 处使方向导数取最大值的方向和该最大值。

**解题步骤：**
1. **单位方向向量**：计算给定方向 $\mathbf{v}=(3,4)$ 的单位向量 $\mathbf{u}=\frac{1}{5}(3,4)$，因为 $\sqrt{3^2+4^2}=5$。所以 $\mathbf{u}=(\frac{3}{5},\frac{4}{5})$。
2. **计算梯度**：先求偏导：$f_x=2x,\;f_y=2$。在点 $(1,2)$，$\nabla f(1,2) = (2\cdot1,\;2) = (2,2)$。
3. **求方向导数**：利用梯度点乘公式：
   $$D_{\mathbf{u}}f(1,2) = \nabla f(1,2)\cdot \mathbf{u} = (2,2)\cdot\Big(\frac{3}{5},\frac{4}{5}\Big) = \frac{6+8}{5} = \frac{14}{5} = 2.8.$$ 
4. **最大方向导数及方向**：梯度方向即为最大增长方向。在点 $(1,2)$，$\nabla f(1,2)=(2,2)$。单位梯度方向为 $\frac{1}{\sqrt{2^2+2^2}}(2,2)=\frac{1}{2\sqrt{2}}(2,2)=(\frac{\sqrt2}{2},\frac{\sqrt2}{2})$，即沿 $45^\circ$ 角方向。最大方向导数等于梯度模长：
   $$|\nabla f(1,2)| = \sqrt{2^2+2^2} = \sqrt{8} = 2\sqrt{2} \approx 2.828.$$ 
   （可验证：与上一步求得的在$(3,4)$方向的导数$2.8$相比，梯度方向导数略大。）

**答案：** (1) $D_{\mathbf{v}}f(1,2) = 14/5 = 2.8$；(2) 最大增速方向为梯度方向 $(\frac{\sqrt2}{2},\frac{\sqrt2}{2})$，最大方向导数为 $2\sqrt{2}\approx2.828$。

**通用解题步骤总结与考试技巧：**
- 方向导数计算**两步法**：一是规范所给方向为单位向量，二是点乘梯度。若忘记单位化会导致结果按比例放大，切记方向必须为单位向量。
- **梯度性质**：梯度方向给出最大上升率，其负方向最大下降率。若题问“增大最快方向”，答$\nabla f$方向；“减小最快方向”，答$-\nabla f$方向。最大方向导数大小即梯度的范数。
- 梯度与**等值线垂直**：若题目考几何理解，比如求曲线在某点的切线方向，与梯度正交等，可用梯度信息快速判断。
- 考试中常见题：给定函数和方向，要计算方向导数；或者给定方向导数值要求找方向；或者判断某点梯度为零则各方向导数皆零等概念题。

### 2.3 其他导数
**核心概念与公式讲解：**本节拓展偏导概念至更一般情况，包括**高阶偏导**和**隐函数微分**等。高阶偏导是对偏导函数再求偏导，例如 $f_{xy}=\frac{\partial}{\partial y}(f_x)$。若函数足够光滑，混合偏导次序可交换（Clairaut 定理），即 $f_{xy}=f_{yx}$。**隐函数求导**用于由方程隐式定义的函数情形：若关系 $F(x,y)=0$ 定义隐函数 $y=y(x)$，且在考虑点处 $F_y\neq0$，则对两边求全导数并整理可得 
$$\frac{\mathrm{d}y}{\mathrm{d}x} = -\frac{F_x(x,y)}{F_y(x,y)}.$$ 
这一公式来源于链式法则，被称为隐函数微分定理。对于多元隐函数（如 $F(x,y,z)=0$），类似地可求出 $\frac{\partial z}{\partial x}=-\frac{F_x}{F_z},\;\frac{\partial z}{\partial y}=-\frac{F_y}{F_z}$ 等。**其它导数**还包括特殊坐标系下的偏导（如极坐标下$\frac{\partial}{\partial r},\frac{\partial}{\partial \theta}$关系）等。

**典型例题**：曲线由隐式方程 $x^2 + xy + y^2 = 7$ 定义。求 $\displaystyle\frac{\mathrm{d}y}{\mathrm{d}x}$ 并计算曲线上点 $(2,1)$ 处切线斜率。

**解题步骤：**
1. **对两边求导**：将隐式方程视为恒等于常数的关系，对 $x$ 求导需应用积和规则：对等式 $F(x,y)=x^2+xy+y^2=7$ 两边分别求导：
   $$\frac{\mathrm{d}}{\mathrm{d}x}(x^2) + \frac{\mathrm{d}}{\mathrm{d}x}(xy) + \frac{\mathrm{d}}{\mathrm{d}x}(y^2) = \frac{\mathrm{d}}{\mathrm{d}x}(7).$$
   计算各项：$\frac{\mathrm{d}}{\mathrm{d}x}(x^2)=2x$；$\frac{\mathrm{d}}{\mathrm{d}x}(xy)=x\frac{\mathrm{d}y}{\mathrm{d}x}+y$（因积的求导，$y$视为$y(x)$）；$\frac{\mathrm{d}}{\mathrm{d}x}(y^2)=2y\frac{\mathrm{d}y}{\mathrm{d}x}$；右侧常数导数为0。代入：
   $$2x + \Big(x\frac{\mathrm{d}y}{\mathrm{d}x}+y\Big) + 2y\frac{\mathrm{d}y}{\mathrm{d}x} = 0.$$
2. **求表达式**：将含 $\frac{\mathrm{d}y}{\mathrm{d}x}$ 的项合并：
   $$x\frac{\mathrm{d}y}{\mathrm{d}x} + 2y\frac{\mathrm{d}y}{\mathrm{d}x} + 2x + y = 0,$$
   $$(x + 2y)\frac{\mathrm{d}y}{\mathrm{d}x} = - (2x + y).$$ 
   若 $x+2y \neq 0$，则
   $$\frac{\mathrm{d}y}{\mathrm{d}x} = -\frac{2x+y}{\,x+2y\,}.$$
3. **代入点计算斜率**：在点 $(2,1)$，分母$x+2y=2+2(1)=4$，分子$2x+y=4+1=5$。所以
   $$\left.\frac{\mathrm{d}y}{\mathrm{d}x}\right|_{(2,1)} = -\frac{5}{4}.$$ 
   这就是曲线在$(2,1)$处的切线斜率。

**答案：** $\displaystyle\frac{\mathrm{d}y}{\mathrm{d}x}=-\frac{2x+y}{\,x+2y\,}$，特别地在$(2,1)$处斜率$=-\frac{5}{4}$。

**通用解题步骤总结与考试技巧：**
- **高阶偏导**计算按序逐次求导。确保清晰标注求导顺序，例如先对$x$再对$y$。二阶混合偏导是否相等取决于函数的连续性，通常光滑函数满足 $f_{xy}=f_{yx}$。
- **隐函数求导**关键：对原方程全微分并利用链式法则。将 $\frac{\mathrm{d}y}{\mathrm{d}x}$ 视为目标未知，整理方程解出之。公式 $-\frac{F_x}{F_y}$ 可直接应用，但推导过程最好写明以防错误。
- 隐函数题常要求特定点斜率或导数值，**务必最后代入坐标**。注意检查分母是否为零，若 $F_y=0$ 表示隐函数在该点可能不满足函数条件或切线竖直，需要特殊处理。
- **隐函数与偏导**：若 $F(x,y,z)=0$ 定义 $z=g(x,y)$，则 $\partial z/\partial x = -F_x/F_z,\;\partial z/\partial y=-F_y/F_z$。考试中可能要求写出推导或直接应用结果，需熟记形式。

## 第三章 多变量微分的应用

### 3.1.1 无约束优化和二阶偏导判定极值类型
**核心概念与公式讲解**：无约束优化指在整个空间内寻找函数的极值点。对于光滑函数 $f(x,y)$，**临界点**由一阶偏导为零确定：$f_x=0,\;f_y=0$。这些点可能是极大值、极小值或鞍点。利用**二阶偏导数判别法**（Hessian判定）可以判断临界点性质：计算 Hessian 矩阵 
$$H=\begin{pmatrix}f_{xx} & f_{xy}\\ f_{yx} & f_{yy}\end{pmatrix}$$ 
及其判定式 $D = f_{xx}f_{yy} - (f_{xy})^2$：
- 若 $D>0$ 且 $f_{xx}>0$，则该点为局部极小值（正定型，碗形开口向上）。
- 若 $D>0$ 且 $f_{xx}<0$，则为局部极大值（负定型，碗形开口向下）。
- 若 $D<0$，则为鞍点（不定型，沿不同方向升降）。
- 若 $D=0$，判别测试不确定，需采用其他手段分析（可能需高阶导数或特殊方法）。
在更高维，同样通过 Hessian 正定/半正定等判断函数曲面形状。

**典型例题**：寻找并分类函数 $f(x,y) = x^3 - 3x + y^2$ 的所有临界点。

**解题步骤：**
1. **求梯度并找临界点**：计算偏导：
   $$f_x(x,y) = 3x^2 - 3,\qquad f_y(x,y) = 2y.$$ 
   将它们设为0求解：
   - $f_x=0 \implies 3x^2-3=0 \implies x^2=1 \implies x = \pm1$。
   - $f_y=0 \implies 2y=0 \implies y = 0$。
   因此存在两个临界点：$(1,0)$ 和 $(-1,0)$。
2. **计算二阶偏导和判定式**：先求二阶导数：
   $$f_{xx}(x,y) = 6x,\qquad f_{yy}(x,y) = 2,\qquad f_{xy}(x,y) = f_{yx}(x,y) = 0.$$ 
   Hessian 判定式 $D = f_{xx}f_{yy} - f_{xy}^2 = (6x)(2) - 0 = 12x$。
   - 在点 $(1,0)$：$f_{xx}(1,0)=6(1)=6>0$，$D=12(1)=12>0$。满足 $D>0$ 且 $f_{xx}>0$，因此 $(1,0)$ 为局部极小值。
   - 在点 $(-1,0)$：$f_{xx}(-1,0)=6(-1)=-6<0$，$D=12(-1)=-12<0$。$D<0$，因此 $(-1,0)$ 为鞍点。
3. **总结分类：** $(1,0)$ 处 $f(1,0) = 1^3-3(1)+0= -2$ 是局部最小值点；$(-1,0)$ 处 $f(-1,0) = -1+3+0 = 2$ 是鞍点（该点函数值在 $x$ 方向附近增大在 $y$ 方向附近减小）。

**答案：** 函数在 $(1,0)$ 处有局部极小值，在 $(-1,0)$ 处为鞍点（无极值）。

**通用解题步骤总结与考试技巧：**
- **步骤一：找临界点**。计算所有一阶偏导，联立等于零解方程组。注意解集可能有多个点甚至一条曲线（特殊情况），需全面考虑。
- **步骤二：判别性质**。对每个临界点，构造 Hessian 矩阵计算判定式 $D$ 和 $f_{xx}$符号。牢记2D情况下判别准则；对于$n$维，可用**主序主子式**法（Sylvester 判定）判断矩阵正定性：依次计算前 $k$ 阶主子式，均为正则正定，交替符号则负定。
- **边界和整体极值**：无约束问题可能还要求判断函数在无穷远处行为以确定**全局**极值。例如二次型开口向上则局部极小即全局极小等。考试中如需全局判断，要讨论函数随变量趋于无穷时的趋向。
- 若 $D=0$ 判据失效，则需尝试其他方法：如考虑沿特殊方向的变化，或计算三阶、四阶导数等判断。通常考题会避免这种复杂情形或给出提示。

### 3.1.2 梯度下降的工作原理
**核心概念与公式讲解**：梯度下降（Gradient Descent）是一种迭代数值优化方法，用于在无约束情形下逼近函数的极小值。其基本思想是：从初始点出发，**沿着负梯度方向**（即函数下降最快的方向）移动一小步，如此迭代，使函数值逐步降低。迭代公式通常为：
$$\mathbf{x}_{n+1} = \mathbf{x}_n - \alpha \,\nabla f(\mathbf{x}_n),$$ 
其中 $\alpha>0$ 为学习率（步长参数），决定移动步幅大小。**几何解释：**梯度$\nabla f$指向上升最快方向，取负号即下降最快方向，沿此方向走可保证函数值下降。步长太大学习可能发散，太小则收敛缓慢，因此 $\alpha$ 需适当选择。对于凸函数，梯度下降可收敛到全局最小值。

**典型例题**：对于单变量函数 $g(x) = x^2$，利用梯度下降法从初始点 $x_0=4$ 出发，选择学习率 $\alpha=0.1$，手算迭代两步，并观察函数值的变化。

**解题步骤：**
1. **函数和梯度：**$g(x)=x^2$ 是简单二次函数，其导数（梯度）$g'(x)=2x$。最小值在 $x=0$ 处。
2. **初始化：**$x_0=4$，计算初始梯度 $g'(4)=8$。函数初值 $g(4)=16$。
3. **第一次迭代**：按照 $x_{1}=x_0 - \alpha g'(x_0)$ 更新：
   $$x_1 = 4 - 0.1 \times 8 = 4 - 0.8 = 3.2.$$ 
   计算此时函数值：$g(3.2)=(3.2)^2=10.24$。相较之前16已有明显下降。
4. **第二次迭代：**$g'(3.2)=2\times3.2=6.4$。
   $$x_2 = 3.2 - 0.1 \times 6.4 = 3.2 - 0.64 = 2.56.$$ 
   函数值 $g(2.56)=(2.56)^2=6.5536$，继续下降。
5. **结果分析：**$x$ 值从4降到3.2再到2.56，逐步接近最优点0；$g(x)$从16降到10.24再到6.5536，逐步逼近最小值0。梯度下降法在该例中单调减少函数值。

**答案：** 两次迭代后 $x_2=2.56$，对应 $g(x_2)\approx6.554$。每次迭代函数值均减小，验证了梯度下降沿负梯度方向移动使函数下降的原理。

**通用解题步骤总结与考试技巧：**
- **理解迭代公式**：牢记 $x_{new} = x_{old} - \alpha \nabla f$. 负梯度方向是下降方向。多维情况下公式在每个坐标分量上类似应用。
- **收敛性：**对于**凸函数**，梯度下降收敛于全局最小值；非凸情形可能陷入局部最小值或鞍点。学习率的选择影响收敛速度和稳定性。考试可能问及如何选择$\alpha$（比如通过试探、动态调整、Armijo准则等），一般解答要说明步长过大可能发散、过小则收敛慢。
- **应用题**：常要求手算几步迭代，观察函数值变化。这时应小心计算梯度方向和步长的乘积，并跟踪函数值。也可能给出迭代过程数据让分析$\alpha$是否合适等。
- **梯度为零判断极值**：梯度下降在找到 $\nabla f=0$ 时停止，此条件正是临界点。在算法题中如计算多步，应注意观察梯度大小是否在减小，作为收敛判据。

### 3.1.3 牛顿法 (Optional)
**核心概念与公式讲解**：牛顿法是一种利用二阶导数信息的迭代优化方法。原本牛顿法用于解方程 $f'(x)=0$，可拓展用于多元函数寻找极小值。**Newton优化步**： 
$$\mathbf{x}_{n+1} = \mathbf{x}_n - H_f(\mathbf{x}_n)^{-1}\,\nabla f(\mathbf{x}_n),$$ 
其中 $H_f$ 是 Hessian 矩阵（二阶导数组成的矩阵）。直观理解：使用二阶泰勒展式 $f(x)\approx f(x_0)+\nabla f(x_0)\cdot (x-x_0)+\frac{1}{2}(x-x_0)^T H (x-x_0)$，令导数为零直接求极值。一维情况下该迭代简化为 
$$x_{n+1} = x_n - \frac{f'(x_n)}{f''(x_n)},$$ 
正是经典牛顿法公式。牛顿法通常具有比梯度下降更快的收敛速度（局部二次收敛）：当迭代点足够接近真解时，误差平方级缩小。然而，牛顿法需要计算和求逆 Hessian，计算量大，且若初始点远离最优解或 Hessian 不正定，可能失效甚至发散。

**典型例题**：对单变量函数 $h(x)=x^2-5x+6$ 应用牛顿法求其极小值。选取初始点 $x_0=0$，执行一次迭代并判断结果。

**解题步骤：**
1. **准备导数信息：**$h'(x)=2x-5$，$h''(x)=2$。Hessian在此为常数2（正定）。
2. **牛顿迭代公式（1D）：** $x_{1} = x_0 - \frac{h'(x_0)}{h''(x_0)}$。代入 $x_0=0$：
   $$x_1 = 0 - \frac{2(0)-5}{2} = -\frac{-5}{2} = \frac{5}{2} = 2.5.$$
3. **结果分析**：迭代一步得到 $x_1=2.5$。比较真实最优解：$h(x)$为抛物线，顶点在 $x = \frac{5}{2}=2.5$（通过完全平方或求导可得），函数最小值为 $h(2.5)=-0.25$. 一步牛顿迭代即到达最优点。因为本例为二次函数，牛顿法可在一步内精确找到极值。

**答案：** 一次迭代后 $x_1=2.5$，已达到极小值（验证 $h'(2.5)=0$）。牛顿法在二次函数上一步收敛。

**通用解题步骤总结与考试技巧：**
- **牛顿法迭代式**：需记忆：$x_{new} = x - H^{-1}\nabla f$。在一维就是 $x_{new} = x - f'/f''$。写过程中注意 Hessian 可逆的假定（$f''(x)$不能为0）。
- **优缺点分析**：考试可能问梯度下降与牛顿法比较。优点：收敛快，对极值点附近的二次型函数效果极佳；缺点：需计算 Hessian 及其逆，计算复杂度高，不适合维度很高的问题，且初值要求较高（需足够接近极值或 Hessian 正定）。
- **收敛性质**：可强调牛顿法局部二次收敛，但**全局不一定收敛**。可辅以策略如信赖域法或步长控制改进收敛性，但一般超出基础考察范围，只需了解可能发散情况（如初始点在鞍点附近 Hessian 非正定时算法方向出错）。
- 实际应用中，牛顿法常用于精细求解，当梯度下降趋近最优解时切换牛顿法提高收敛速度。这点可作为答题的补充拓展。

### 3.2.1 有约束优化 I
**核心概念与公式讲解**：有约束优化考虑函数 $f(x,y)$ 在满足某些条件（约束）下的极值问题。约束可分为**等式约束**（如 $g(x,y)=0$）和**不等式约束**（如 $h(x,y)\ge0$）。本节以等式约束为主。解决有约束优化的一般思路：
- **直接代入消元法**：若约束方程可明确解出一个变量用另一个变量表示（如 $y$ 用 $x$ 表示），可代入 $f$ 转化为单变量问题，再求导求极值。这在简单约束情况下有效。
- **边界分析法**：若约束是区域限定（如封闭区域），需要将问题拆为检查**内部临界点**（可看作无约束情形，用$f_x=f_y=0$）和**边界上的极值**。边界本身可通过引入参数或再构建拉格朗日方法分析。
- **优化原理**：受约束时极值可能发生在内部可行点（满足约束且梯度为零）或边界点。对于封闭有界可行域，全局极值一定存在，可通过检查有限候选点（内部临界+边界关键点）找到。
本节偏重代入法和基本思路，下节将介绍系统的拉格朗日乘子法处理等式约束。

**典型例题**：设有等式约束 $y = 10 - x$，求在此约束下函数 $f(x,y) = x^2 + y^2$ 的最小值（几何意义为找到直线 $y=10-x$ 上离原点最近的点）。

**解题步骤：**
1. **代入消元**：由约束 $y=10-x$，将 $y$ 表达为 $x$ 的函数并代入：
   $$f(x,y) = x^2 + y^2 = x^2 + (10 - x)^2 = x^2 + 100 - 20x + x^2 = 2x^2 - 20x + 100.$$ 
   这样问题转化为单变量函数 $g(x)=2x^2-20x+100$ 的无约束极值问题。
2. **求单变量极值**：$g'(x) = 4x - 20$，令 $g'(x)=0$ 得 $4x-20=0 \implies x=5$. 这是唯一临界点。
   计算 $g''(x)=4>0$，正二次性表明 $x=5$ 得极小值。
3. **求对应 $y$ 值和函数值**：由约束 $y=10-x$，当 $x=5$ 时 $y=5$。此时 $f(5,5) = 5^2+5^2 = 50$。
   验证几何：直线 $y=10-x$ 是45°斜线，原点到该线最近点应是法线垂足，计算结果$(5,5)$确实在直线上且距离$\sqrt{50}$最小。
4. **结论**：受约束 $y=10-x$ 限制，$f(x,y)$ 最小值为 $50$，在点 $(5,5)$ 取得。

**答案：** 当 $(x,y)=(5,5)$ 时取得约束条件下的最小值 $f(5,5)=50$。

**通用解题步骤总结与考试技巧：**
- **代入消元法**：针对简单约束（特别是能解出表达的），优先使用。这样将问题降维为无约束优化，更直观。考试中线性等式约束常可用此法。
- **边界分析**：如约束是一个闭区域（例如多边形范围），求极值须考虑三部分：①内部临界点（满足$f_x=f_y=0$且在区域内）；②约束边界上的极值（将边界方程代入形成单变量问题求解，或对边界再应用拉格朗日法）；③顶点/拐点等特殊点。逐一比较函数值确定全局极值。
- **几何理解**：可以通过几何意义帮助验证结果合理性。例如本题中直线离原点最近的点即法线垂足，可快速判断在$x=y$处对称，印证了计算。
- 如果约束较复杂或难以消元，引出**拉格朗日乘子法**（3.2.2节）作为统一工具。但如能简单消元解决，考试中可直接用代入法说明，无需复杂方法。

### 3.2.2 有约束优化 II：拉格朗日乘子法
**核心概念与公式讲解：**拉格朗日乘子法是一种**普适方法**，用于求解含等式约束的极值问题。其原理是：在极值点，目标函数梯度 $\nabla f$ 必须与约束函数梯度 $\nabla g$ 平行（否则可沿约束方向在切线内进一步优化），换言之存在 $\lambda$ 使 $\nabla f = \lambda \nabla g$。$\lambda$ 称为拉格朗日乘子。具体步骤：
- 构造**拉格朗日函数** $\mathcal{L}(x,y,\lambda) = f(x,y) - \lambda\,[g(x,y)]$（针对约束 $g(x,y)=0$ 情况，加上乘子项）。
- 求偏导并令其为零：$\frac{\partial \mathcal{L}}{\partial x}=0,\;\frac{\partial \mathcal{L}}{\partial y}=0,\;\frac{\partial \mathcal{L}}{\partial \lambda}=0$。这给出方程组：
  $$f_x(x,y) - \lambda\,g_x(x,y) = 0,$$
  $$f_y(x,y) - \lambda\,g_y(x,y) = 0,$$
  $$g(x,y) = 0.$$
- 解该方程组，得到所有可能的极值候选点 $(x,y)$ 以及对应乘子 $\lambda$。
- 对候选点，可通过判定函数的增减或次序导数检验确定极值性质（通常比较函数值判断最大/小）。
拉格朗日法可推广到多个约束和更高维，此时会有多个乘子。它本质要求在极值点目标函数梯度落在约束面的切平面内，即正交于约束面的法向量（该法向量由约束梯度给出）。

**典型例题**：利用拉格朗日乘子法，求解在约束曲线 $x^2 + y^2 = 25$ 上使函数 $f(x,y) = 3x + 4y$ 取极值的点和对应极值。

**解题步骤：**
1. **建立拉格朗日函数**：约束为 $g(x,y)=x^2+y^2-25=0$。构造 
   $$\mathcal{L}(x,y,\lambda) = 3x + 4y - \lambda (x^2+y^2-25).$$
2. **求偏导并列方程：**
   $$\frac{\partial \mathcal{L}}{\partial x} = 3 - \lambda(2x) = 0 \implies 3 - 2\lambda x = 0,$$
   $$\frac{\partial \mathcal{L}}{\partial y} = 4 - \lambda(2y) = 0 \implies 4 - 2\lambda y = 0,$$
   $$\frac{\partial \mathcal{L}}{\partial \lambda} = -(x^2+y^2-25) = 0 \implies x^2 + y^2 = 25.$$
   整理前两式：$3 = 2\lambda x$，$4 = 2\lambda y$ $\implies$ $\lambda = \frac{3}{2x} = \frac{4}{2y}$。得到关系 
   $$\frac{3}{x} = \frac{4}{y} \implies 3y = 4x.$$
3. **结合约束求点：**由 $3y=4x$ 可表示 $y = \frac{4}{3}x$。代入圆的约束 $x^2 + (\frac{4}{3}x)^2 = 25$：
   $$x^2 + \frac{16}{9}x^2 = 25,\; \frac{25}{9}x^2 = 25,\; x^2 = 9 \implies x = \pm 3.$$ 
   相应 $y=\frac{4}{3}x$ 给出 $y=\pm 4$（符号与$x$相同）。因此两个候选点：$(3,4)$ 和 $(-3,-4)$。
4. **函数值及极值判断：**计算目标函数：
   - $f(3,4)=3(3)+4(4)=9+16=25$；
   - $f(-3,-4)=3(-3)+4(-4)=-9-16=-25$。
   由于这是线性函数在圆约束上的优化，理论上$(3,4)$应为最大值点，$(-3,-4)$为最小值点。结果符合预期。可进一步确认：梯度$\nabla f=(3,4)$与约束梯度$\nabla g=(2x,2y)$在点$(3,4)$处是否平行？$\nabla g(3,4)=(6,8)$与$(3,4)$确实共线，乘子$\lambda=3/(2*3)=0.5$验证了$\nabla f = \lambda \nabla g$。

**答案：** 在$x^2+y^2=25$上，$f(x,y)$最大值为25，在点$(3,4)$取得；最小值为-25，在点$(-3,-4)$取得。

**通用解题步骤总结与考试技巧：**
- **正确列拉格朗日函数：**包括目标函数和每个等式约束乘以乘子（注意符号，通常写$f+\sum \lambda_i g_i$或$f-\lambda g$均可，只要后续导数一致）。考试时符号错误会导致后续解答错乱，需谨慎。
- **求导方程组数量：**未知量包括原变量和每个约束的乘子。确保列出$\frac{\partial \mathcal{L}}{\partial x_i}=0$（对每个变量）以及$\frac{\partial \mathcal{L}}{\partial \lambda_j}=0$（对每个乘子，即约束方程）。共$n+m$个方程（$n$变量+$m$约束），联立求解。
- **解方程的技巧：**尽量利用方程间比值等消元。常见情形是得到$\nabla f = \lambda \nabla g$分量比值关系，以及原约束。这些关系代入约束可求解。解出的乘子$\lambda$不一定需要报告，除非题目特别要求。
- **结果检验：**代入原函数看大小，必要时判断极大极小性质——通常一个约束优化点要么极大要么极小，可通过二阶条件或实例判别。如果多个约束，还应考虑边界与角点等，但一般可通过多个拉格朗日条件分别求解。
- **特殊情况：**若求解方程无实数解，说明在约束下无极值（函数可能在可行域边缘趋向极值但不达成）。若拉格朗日方程解出多组，要比较函数值决定最大最小。可行域开敞情况需结合边界极限讨论（复杂情况通常不在基础考试范围）。

### 3.2.3 对偶问题 (Optional)
**核心概念与公式讲解：**对偶问题是将原始优化问题（原问题）的信息转化为另一个视角的优化问题（对偶问题），特别在凸优化中非常有用。通过对约束添加拉格朗日乘子，可以构造**拉格朗日对偶函数**：
$$L(x,\lambda,\mu) = f(x) + \sum_{i}\lambda_i g_i(x) + \sum_{j}\mu_j h_j(x),$$ 
其中$g_i(x)=0$为等式约束，$h_j(x)\le0$为不等式约束，$\mu_j\ge0$。对偶函数定义为对$x$的极小（或极大）值：
$$q(\lambda,\mu) = \inf_x L(x,\lambda,\mu)$$ 
（对极大化原问题则取$\sup_x$）。**对偶问题**是关于$\lambda,\mu$的极大化：$\sup_{\lambda,\mu\ge0} q(\lambda,\mu)$。简单理解，对偶问题将原本难以直接求解的约束优化转化为求一组乘子使拉格朗日函数下界最大，提供原问题的界。**弱对偶性**：任何对偶可行$(\lambda,\mu)$下，$q(\lambda,\mu)$都是原问题目标值的下界（若原问题为最小化），即对偶值$\le$原始最优值。**强对偶性**：在凸优化满足一定条件（如Slater条件）下，对偶最优值=原问题最优值，乘子解提供原最优解的边界条件（对应KKT条件）。对偶问题常简化计算，例如线性规划的对偶还是线性规划，维数不同但易解；SVM求解时，对偶问题更简单（转成凸二次规划）。

**典型例题：**考虑原问题：最小化 $f(x)=x^2$，约束 $x \ge 3$。写出其对偶问题并求对偶最优解。

**解题步骤：**
1. **原问题确定：**$\min f(x)=x^2$，s.t. $h(x)=3-x \le 0$（将$x\ge3$改写）。这是凸函数带不等式线性约束。
2. **构造拉格朗日函数：**只有一个不等式约束，乘子$\mu\ge0$：
   $$L(x,\mu) = x^2 + \mu (3-x).$$
3. **求对偶函数：**对$x$求下确界，即极小值。$L(x,\mu)$对$x$为二次函数，固定$\mu$，极小化条件 $\frac{\partial L}{\partial x} = 2x - \mu = 0 \implies x = \frac{\mu}{2}$。这是极小点候选，但要注意原函数域$x\in \mathbb{R}$无额外限制，可直接取此最优。将$x=\mu/2$代入：
   $$q(\mu) = L\Big(\frac{\mu}{2},\mu\Big) = \Big(\frac{\mu}{2}\Big)^2 + \mu \Big(3 - \frac{\mu}{2}\Big) = \frac{\mu^2}{4} + 3\mu - \frac{\mu^2}{2} = 3\mu - \frac{\mu^2}{4}.$$ 
   这是对偶函数（仅当极值点合理）。注意$\mu\ge0$，故对偶函数定义域$\mu\ge0$。
4. **对偶问题：**$\max_{\mu\ge0} q(\mu) = \max_{\mu\ge0} (3\mu - \frac{\mu^2}{4})$。这是开口向下抛物线，对称轴$\mu=\frac{3}{2}\cdot4=6$？实际上$3\mu - \frac{1}{4}\mu^2$可改写$-\frac{1}{4}(\mu^2 - 12\mu) = -\frac{1}{4}[(\mu-6)^2 -36] = 9 - \frac{1}{4}(\mu-6)^2$，最大在$\mu=6$处，最大值$9$。
5. **解读对偶最优：**$\mu^*=6$。对应原问题下界$q(6)=9$。原问题实际上$x^2$在$x\ge3$的最小值是$3^2=9$，达成于$x=3$。强对偶成立，此对偶解$\mu=6$与约束$3-x=0$及KKT条件吻合：$6=2x$ at optimum $x=3$。对偶问题求解印证了原问题答案。

**答案：** 原问题最优值9（在$x=3$处）。对偶问题：$\max_{\mu\ge0}(3\mu-\frac{\mu^2}{4})$，最优解$\mu^*=6$，对偶最优值9，与原问题最优相同。

**通用解题步骤总结与考试技巧：**
- **理解对偶构造：**明确原问题是极小还是极大、约束形式，然后正确写出拉格朗日函数（注意不等式约束乘子需$\mu\ge0$）。这部分符号易错，建议分步骤检查每项对应正确。
- **对偶函数求解：**对原变量$x$的极小(或极大)问题，求$L(x,\lambda,\mu)$关于$x$的最优值表达式$q(\lambda,\mu)$。通常通过对$x$求导找极值，如有约束可能要考虑$x$域边界或无界情况（若$L$对$x$无下界，则$q(\lambda,\mu)=-\infty$，对偶解无效，需要不同$\lambda,\mu$）。
- **构建对偶问题：**将求得的$q(\lambda,\mu)$进行相应的极值化（原问题min则对偶max，反之亦然），并注明乘子符号约束条件。这得到一个仅含$\lambda,\mu$的优化问题，通常更简单（往往凸）。
- **弱对偶原理应用：**可以说明任取对偶可行乘子会给出原问题目标下界/上界，这在证明最优性或估计误差时有用。但考试多偏重会不会构造，不深究证明。
- **KKT与强对偶：**对于满足条件的凸优化，KKT条件整合了一阶最佳性（梯度平行）、可行性和互补松弛（$\mu_j h_j(x)=0$）。考试若延伸到KKT，需会写条件并解释如互补松弛意味着约束是否达到等式等。一般Optional深度，仅要求理解对偶概念和基本计算。

### 3.2.4 SVM 支持向量机和案例 (Optional)
**核心概念与公式讲解：**支持向量机（SVM）是一种监督机器学习模型，可被视为凸优化在分类问题上的应用。基本思想：**找到将两类数据最大间隔分开的最优超平面。** 在线性可分情形，下述优化刻画最优分类超平面：
- 原始形式：$\displaystyle \min_{w,b} \frac{1}{2}\|w\|^2$，约束 $y_i(w\cdot x_i + b) \ge 1,\; \forall i$，其中 $(x_i,y_i)$ 是训练样本，$y_i=\pm1$。
- 这要求所有样本被超平面 $w\cdot x + b=0$ 正确分类且距边界至少1，目标是最小化$\|w\|$（等价于最大化间隔幅度）。
- 由于这是带约束凸二次规划问题，可用拉格朗日对偶方法。对偶问题引入$\alpha_i\ge0$ 对每个不等式，得到：
  $$\max_\alpha \sum_i \alpha_i - \frac{1}{2}\sum_{i,j}\alpha_i\alpha_j y_i y_j (x_i\cdot x_j),$$
  s.t. $\sum_i \alpha_i y_i =0,\;\alpha_i\ge0$。这是仅含$\alpha$的凸优化，对应二次规划，通常用SMO等算法解。
- **支持向量：**优化后，大部分 $\alpha_i=0$，对应样本对解无影响；$\alpha_i>0$ 的样本称为支持向量，恰好位于间隔边界（满足 $y_i(w\cdot x_i+b)=1$），对超平面位置决定性作用。
- **解读乘子：**拉格朗日乘子$\alpha_i$即支持向量机名称中“支持向量”的由来。KKT互补条件 $\alpha_i [y_i(w\cdot x_i+b)-1]=0$ 意味着非边界点约束松弛（正确分类裕量富余则$\alpha_i=0$），在边界的点$\alpha>0$起支撑作用。
支持向量机对偶解$\{\alpha_i\}$可以直接用于分类决策：$f(x)=\text{sign}(\sum_{i}\alpha_i y_i (x_i\cdot x)+b)$，这形式允许使用核函数扩展至非线性分类。

**典型例题：**简述在线性可分情形SVM的优化目标和约束条件，并说明支持向量的含义。

**解题步骤：**
1. **列出SVM原始优化问题：**目标$\min \frac{1}{2}\|w\|^2$，约束 $y_i(w\cdot x_i + b)\ge1,\ \forall i$。指出这是为了找到间隔最大的分离超平面。
2. **解释拉格朗日对偶：**写出拉格朗日函数 
   $$L(w,b,\alpha)=\frac{1}{2}\|w\|^2 - \sum_i \alpha_i [y_i(w\cdot x_i + b)-1],$$ 
   其中$\alpha_i\ge0$。对偶问题 $\max_{\alpha\ge0}\min_{w,b} L$ 经过推导得到对偶形式如上所述。这部分让学生了解对偶简化计算和引出核技巧。
3. **支持向量定义：**根据KKT条件，阐明只有那些紧贴约束边界的点（满足$y_i(w\cdot x_i+b)=1$）才可能有$\alpha_i>0$。这些点称为支持向量，因为它们“支撑”着最优超平面；移除它们会改变解，而移除非支持向量（$\alpha_i=0$的点）不影响超平面。
4. **强调结果：**超平面法向量$w$可写为支持向量的线性组合 $w=\sum_{i}\alpha_i y_i x_i$，分类决策使用符号函数基于距超平面符号。支持向量数目通常远小于总样本，实现稀疏解。

**答案要点：**SVM 原始优化：$\min_{w,b}\frac{1}{2}\|w\|^2$，约束 $y_i(w\cdot x_i+b)\ge1$。支持向量：指那些在最优超平面边界上的训练样本，它们的拉格朗日乘子 $\alpha_i>0$，在模型决策函数中起作用，其余样本 $\alpha_i=0$ 对模型无贡献。

**通用解题步骤总结与考试技巧：**
- **明确SVM优化框架：**答题时应首先写出优化问题形式，解释目标（最大化间隔、正则化项）和约束（分类正确且间隔至少1）。如题目要求，可能需说明软间隔情况下如何引入松弛变量与惩罚系数，这里略。
- **解释支持向量角色：**强调支持向量是距离超平面最近的点，它们决定超平面的位置和间隔宽度。在对偶解中对应非零$\alpha$值。
- **理论联系对偶：**如被问到，可以提及对偶问题的形式，以及强对偶在SVM（二次规划为凸）成立，使原始解可从对偶解恢复。通常不会要求完整推导，但了解$\nabla_w L=0$导出$w=\sum \alpha_i y_i x_i$等要点即可。
- **应用层面：**SVM的优势在于核技巧扩展非线性分类；如果问优势，答：凸优化有全局最优解、稀疏支持向量决策、高维仍有效等。
- 作为Optional内容，回答注重概念说明，不需要像计算题一样逐步求解，但应展示对SVM优化问题和支持向量概念的清楚理解。

## 第四章 多变量函数 $\mathbb{R}^n \to \mathbb{R}$ 积分

### 4.1.1 笛卡尔坐标系下的二重积分
**核心概念与公式讲解：**二重积分用于累加二维区域上函数值，常解释为曲面下的体积或平面密度的总量。**定义：**若 $f(x,y)$ 在区域 $D$ 上连续，则其二重积分 
$$\iint_D f(x,y)\,\mathrm{d}A = \lim_{\text{网格}\to0}\sum_{ij} f(x_{ij}^*,y_{ij}^*) \Delta A_{ij},$$ 
其中$\Delta A_{ij}$是细分小区域面积。计算时通常用**累次积分**（Fubini定理）：如果区域$D$可用直角坐标表示为 $a\le x\le b$，对于每个$x$，$g_1(x)\le y\le g_2(x)$，则 
$$\iint_D f(x,y)\,\mathrm{d}A = \int_{x=a}^{b}\Big[\int_{y=g_1(x)}^{g_2(x)} f(x,y)\,\mathrm{d}y\Big]\mathrm{d}x,$$ 
或交换次序积分$y$在外层。矩形区域则可简单分离：$\int_{x_0}^{x_1}\int_{y_0}^{y_1}f(x,y)\mathrm{d}y\mathrm{d}x$。Fubini定理保证在适当条件下交换积分次序不改变结果。**计算步骤：**先根据区域形状设定积分次序和上下限，对内层积分$f$视另一变量为常数积分，再对外层积分其结果。

**典型例题：**设区域 $D$ 由不等式 $0\le x\le 2,\;0\le y\le x$ 界定（即位于$x$轴和直线$y=x$之间）。计算二重积分 $\iint_{D} (x y^2)\,\mathrm{d}A$。

**解题步骤：**
1. **理解区域 $D$:** $0\le x\le 2$ 为竖直条范围，且对每个 $x$，$y$ 从0到 $x$。绘图可见$D$是 $x$轴、直线$y=x$、直线$x=2$ 围成的三角形（顶点在$(0,0),(2,0),(2,2)$）。
2. **设定积分次序：**给出$0\le y\le x$，明显适合 $x$ 外积、$y$ 内积。即 $x$ 固定时 $y$ 从0到$x$。因此：
   $$\iint_D x y^2 \,\mathrm{d}A = \int_{x=0}^{2} \Big[\int_{y=0}^{x} x y^2 \,\mathrm{d}y\Big] \mathrm{d}x.$$
3. **计算内层积分：**将 $x$ 视常数，$\int_{0}^{x} x y^2 \,\mathrm{d}y = x \int_{0}^{x} y^2 \,\mathrm{d}y = x \cdot \frac{x^3}{3} = \frac{x^4}{3}.$
4. **计算外层积分：**$\int_{0}^{2} \frac{x^4}{3} \mathrm{d}x = \frac{1}{3}\int_{0}^{2} x^4 \mathrm{d}x = \frac{1}{3}\left[\frac{x^5}{5}\right]_{0}^{2} = \frac{1}{3} \cdot \frac{32}{5} = \frac{32}{15}.$
5. **结论：**积分值为 $\frac{32}{15}$。

**答案：** $\displaystyle \iint_{D} x y^2\,\mathrm{d}A = \frac{32}{15}$。

**通用解题步骤总结与考试技巧：**
- **描绘区域**：计算重积分前先弄清积分区域$D$的范围和形状。考试时可简要描述或画示意图，以便正确设置积分上下限。
- **选择积分次序**：一般根据区域方便性决定。若$y$简单取常值范围则$y$外$ x$内，反之亦然。如本例$0\le y\le x$易表示为$y$内、$x$外。也可反过来描述$x$随$y$变动范围（$0\le y\le 2$时$y\le x\le 2$），然后$y$外$x$内，也可求出相同结果。灵活运用交换顺序简化计算。
- **分段积分**：若区域可分为几个简单子区域，积分可拆成对应部分分别计算后求和。例如非简单区域可按$y$值或$x$值分割成上下两块再计算。
- **注意积分计算**：按单变量积分规则逐步进行，避免将$x$误当常数或反之。整洁书写每一步积分结果，别漏掉未积分变量或常数因子。
- 对于物理解释题，理解二重积分意义：比如求平面图形面积（$f(x,y)=1$），质心，质密分布总质量等，可通过构造$f$或引入常数因子实现。

### 4.1.2 极坐标系下的二重积分
**核心概念与公式讲解：**当区域$D$呈圆形或扇形，对称于极坐标更方便。极坐标变换：$x=r\cos\theta,\;y=r\sin\theta$。**Jacobian**行列式$|\frac{\partial(x,y)}{\partial(r,\theta)}| = r$，意味着面积元$\mathrm{d}A$在极坐标中变为 $r\,\mathrm{d}r\,\mathrm{d}\theta$。二重积分公式：
$$\iint_{D} f(x,y)\,\mathrm{d}A = \int_{\theta=\theta_1}^{\theta_2}\int_{r=r_{inner}(\theta)}^{r_{outer}(\theta)} f(r\cos\theta, r\sin\theta)\,r\,\mathrm{d}r\,\mathrm{d}\theta.$$ 
需确定$\theta$范围（扇区角度）和对每个$\theta$相应的$r$上下限。极坐标特别适用于圆盘、环形、扇形区域或 integrand 含 $x^2+y^2$ 等对称情形，可大大简化计算。

**典型例题：**计算以原点为圆心、半径 $2$ 的圆盘区域 $D:\,x^2+y^2\le4$ 上的二重积分 $\iint_D (x^2+y^2)\,\mathrm{d}A$。

**解题步骤：**
1. **识别区域对称性：**$D$是圆心在原点、半径2的圆盘（整圆）。用极坐标描述：$0 \le r \le 2$，$0 \le \theta < 2\pi$。
2. **转换函数：** integrand $x^2+y^2$ 在极坐标中即 $r^2$（因为 $x^2+y^2=r^2$）。
3. **写出极坐标积分：** 
   $$\iint_{x^2+y^2\le4} (x^2+y^2)\,\mathrm{d}A = \int_{\theta=0}^{2\pi} \int_{r=0}^{2} (r^2)\, (r\,\mathrm{d}r\,\mathrm{d}\theta).$$ 
   注意乘上 Jacobian $r$。
4. **计算内层（$r$）积分：**$\int_{0}^{2} r^2 \cdot r \,\mathrm{d}r = \int_{0}^{2} r^3 \,\mathrm{d}r = \left.\frac{r^4}{4}\right|_{0}^{2} = \frac{16}{4} = 4.$
5. **计算外层（$\theta$）积分：**$\int_{0}^{2\pi} 4\,\mathrm{d}\theta = 4[2\pi-0] = 8\pi.$ 
6. **结果：**积分值 $8\pi$。这可验证：$x^2+y^2$积分代表圆盘关于原点惯性矩，结果$8\pi$。

**答案：** $\displaystyle \iint_{x^2+y^2\le4} (x^2+y^2)\,\mathrm{d}A = 8\pi$。

**通用解题步骤总结与考试技巧：**
- **何时用极坐标：**圆形区域或 integrand 含 $x^2+y^2$、$\sqrt{x^2+y^2}$ 等，优先考虑极坐标。往往角度$\theta$界限和径向$r$界限可由区域几何得知。半径为常数的圆盘$0\le r\le R$，$\theta$通常跨某连续范围（全圆$0$到$2\pi$，半圆等）。
- **设置上下限：**给$\theta$一个区间，然后确定对任一$\theta$，$r$从里边界到外边界的函数形式。像扇形：$\theta$定范围，$r$从0到给定最大。像环域：$r$从内半径到外半径。**不要忘记Jacobian $r$！** 这是极坐标积分易错点。
- **积分计算：**$r$-积分需考虑 $r$ 幂次提升，如$\int r\,dr$、$\int r^3\,dr$等，仔细计算不出错。$\theta$-积分对常数或三角函数积分，注意$2\pi$倍数。
- **结果合理性：**可用对称性或量纲检查：本例$x^2+y^2$在圆盘上积分=8$\pi$，也可通过转到极坐标简化——所以别忘返回笛卡尔理解是否合理（如$8\pi$确为正值随半径增加而增加的函数积分）。
- 如果考生不熟，可做简单替换：如$\iint_D f(x^2+y^2)\,dA$可令$u=x^2+y^2$变换到极坐标再积分$u$与Jacobian。但一般直接记住极坐标公式最简便。

### 4.1.3 曲面面积和坐标变换下的积分
**核心概念与公式讲解：**本节包括两部分：(1)曲面面积计算；(2)坐标变换的一般Jacobians。

1. **曲面面积：**给定图形表面$z = f(x,y)$，$(x,y)\in D$，其面积元素公式：
   $$\mathrm{d}S = \sqrt{1 + f_x^2(x,y) + f_y^2(x,y)}\,\mathrm{d}A.$$ 
   因此曲面在区域$D$上的总面积 
   $$S = \iint_{D} \sqrt{1 + f_x^2 + f_y^2}\,\mathrm{d}x\,\mathrm{d}y.$$ 
   若曲面以参数表示 $\mathbf{r}(u,v)=(x(u,v),\,y(u,v),\,z(u,v))$，则面积元 $\mathrm{d}S = \|\mathbf{r}_u \times \mathbf{r}_v\|\,du\,dv$。对于显式曲面$z=f(x,y)$，参数取$x,y$就可导出上式。应用：求曲面（如抛物面、球面等）面积或带密度的曲面积分。
2. **坐标变换中的Jacobian：**在二维，坐标变换 $(x,y)=T(u,v)$ 的二重积分公式：
   $$\iint_{D_{xy}} f(x,y)\,dx\,dy = \iint_{D_{uv}} f(x(u,v),y(u,v))\,\Big|\frac{\partial(x,y)}{\partial(u,v)}\Big| \,du\,dv.$$ 
   这个绝对值Jacobian是将$uv$平面小面积放大/缩小到$xy$平面的因子。三维变换时，三重积分也乘Jacobian。
   常用变换如极坐标、柱坐标、球坐标都有Jacobian：$r$、$r$、$r^2\sin\phi$等。任意变换则需计算行列式值。
   考试时，一般提供或要求记住特殊坐标的Jacobian，或者设计简单线性变换。

**典型例题：**求抛物面 $z = x^2 + y^2$ 在区域 $x^2+y^2 \le 4$ 上的曲面面积。

**解题步骤：**
1. **获取偏导：**$z = f(x,y) = x^2+y^2$，则 $f_x = 2x,\; f_y=2y$。
2. **面积元公式：** 
   $$\sqrt{1+f_x^2+f_y^2} = \sqrt{1 + 4x^2 + 4y^2} = \sqrt{1+4(x^2+y^2)}.$$ 
   在区域$x^2+y^2\le4$上，所以$0\le r \le 2$。
3. **转化为极坐标计算：**面元素 $\sqrt{1+4r^2}$ 用极坐标方便，$dA=rdrd\theta$。曲面面积 
   $$S = \iint_{x^2+y^2\le4} \sqrt{1+4(x^2+y^2)}\,dx\,dy = \int_{\theta=0}^{2\pi}\int_{r=0}^{2} \sqrt{1+4r^2}\, r\,dr\,d\theta.$$ 
4. **计算径向积分：**$I = \int_{0}^{2} r\sqrt{1+4r^2}\,dr$. 用换元 $u=1+4r^2$, $du=8r\,dr$, 则当$r=0, u=1$; $r=2, u=1+16=17$. 转换积分：
   $$I = \int_{u=1}^{17} \frac{\sqrt{u}}{8}\,du = \frac{1}{8}\cdot \frac{2}{3}u^{3/2}\Big|_{1}^{17} = \frac{1}{12}\left(17^{3/2} - 1^{3/2}\right) = \frac{1}{12}(17\sqrt{17} - 1).$$ 
5. **计算角向积分**：$\int_{0}^{2\pi} d\theta = 2\pi$。
6. **得出面积：**$S = 2\pi \cdot I = \frac{\pi}{6}(17\sqrt{17} - 1)$。

**答案：** 曲面面积 $S = \displaystyle \frac{\pi}{6}\,\big(17\sqrt{17} - 1\big)$。

**通用解题步骤总结与考试技巧：**
- **曲面面积**：先明确曲面方程形式，选取方便的参数化或直接用显式公式。若$z=f(x,y)$且区域$D$容易描述（如圆、矩形），直接用$\sqrt{1+f_x^2+f_y^2}$在$D$上积分，多数情况转极坐标或其他特殊坐标简化计算。
- 如果表面以其它方式给出（如球面参数方程），则应计算$\|\mathbf{r}_u \times \mathbf{r}_v\|$。特殊如球半径R表面元素$R^2\sin\phi\,d\phi\,d\theta$可直接使用。
- 解答应注意**对称性**：在本例中，被积函数仅与$r$有关，通过极坐标将二维问题降为单变量$dr$积分。
- **坐标变换**：若考试给一般变换题，需算Jacobian。这要求熟练计算$\det\begin{pmatrix}\partial x/\partial u & \partial x/\partial v \\ \partial y/\partial u & \partial y/\partial v\end{pmatrix}$。线性变换可速算，如$x=au+cv,\;y=bu+dv$则$J=ad-bc$。非线性要按偏导公式。
- 在使用坐标变换时，**别忘转换区域描述**。写出$D_{uv}$范围，再进行新坐标积分。
- 复杂变换题考试较少，只要掌握典型坐标（极、柱、球）及简单线性替换即可。遇见棘手区域，可考虑分区或退回笛卡尔计算。

### 4.2.1 笛卡尔坐标系下的三重积分
**核心概念与公式讲解：**三重积分扩展二重积分到三维体积，对应求空间域中函数的累积，如体积、质量等。形式定义类似，不表。**计算**：用**累次积分**处理 $\iiint_V f(x,y,z)\,dV$。典型步骤：
- 根据区域$V$在$xyz$坐标的范围，选择积分顺序（$dz\,dy\,dx$等）。对于规则区域可直接产品形式，复杂区域需分层描述。
- 内层积分对一个变量，在给定其它两变量时的范围；中层次序描述对应平面区域；外层给最外变量范围。
Fubini定理保证在$f$连续、区域常规情况下可任意交换次序（但某些顺序计算更简便）。
**物理意义：**若$f(x,y,z)$为密度，三重积分给出质量；$f=1$时三重积分等于体积。对称区域也可借对称减少计算。

**典型例题：**区域 $V$ 定义为：$0 \le x \le 2$，$0 \le y \le 1$，$0 \le z \le 4 - 2x - 4y$。计算 $\iiint_V z\,dV$。

**解题步骤：**
1. **理解区域：**$x$ 在 $[0,2]$，$y$ 在 $[0,1]$，$z$ 由 $0 \le z \le 4-2x-4y$ 给定，即在每个$(x,y)$处，$z$从0到平面$z=4-2x-4y$。因为 $z$上下限为线性函数，$V$是$x,y$上投影为矩形$0\le x\le2,0\le y\le1$下的柱体截去顶面成斜面。
2. **设定积分顺序：**自然按描述，$z$内层（0到$4-2x-4y$），$y$次层（0到1），$x$外层（0到2）。
   $$\iiint_V z\,dV = \int_{x=0}^{2}\int_{y=0}^{1}\int_{z=0}^{4-2x-4y} z\,dz\,dy\,dx.$$
3. **计算内层 $z$ 积分：**$\int_{0}^{4-2x-4y} z\,dz = \left.\frac{z^2}{2}\right|_{0}^{\,4-2x-4y} = \frac{(4-2x-4y)^2}{2} = \frac{1}{2}(16 - 16x + 4x^2 - 32y + 16xy + 16y^2).$
4. **计算 $y$ 积分：**积分 $\int_{y=0}^{1} \frac{1}{2}(16 - 16x + 4x^2 - 32y + 16xy + 16y^2)\,dy$. 逐项：
   - $\int_{0}^{1}(16-16x+4x^2)\,dy = (16-16x+4x^2)[y]_0^1 = 16-16x+4x^2$（因这部分不含$y$）。
   - $\int_{0}^{1}(-32y+16xy+16y^2)\,dy = \left[-16y^2 + 8xy^2 + \frac{16}{3}y^3\right]_0^1 = -16 + 8x + \frac{16}{3}$。
   合并二部分并乘$\frac{1}{2}$前因子：
   $$\frac{1}{2}\Big((16-16x+4x^2) + (-16 + 8x + \frac{16}{3})\Big) = \frac{1}{2}\Big( (16-16 + \frac{16}{3}) + (-16x+8x) + 4x^2 \Big)$$ 
   $$= \frac{1}{2}\Big(\frac{16}{3} -8x + 4x^2\Big) = \frac{8}{3} - 4x + 2x^2.$$
5. **计算 $x$ 积分：**$\int_{0}^{2} \left(\frac{8}{3} - 4x + 2x^2\right) dx = \left.\frac{8}{3}x - 2x^2 + \frac{2}{3}x^3 \right|_0^2$。
   插入$x=2$：$\frac{8}{3}\cdot2 - 2\cdot4 + \frac{2}{3}\cdot8 = \frac{16}{3} - 8 + \frac{16}{3} = \frac{32}{3} - 8 = \frac{32-24}{3} = \frac{8}{3}$.（$x=0$项为0）
6. **结论：**积分值为 $\frac{8}{3}$。

**答案：** $\displaystyle \iiint_V z\,dV = \frac{8}{3}$。

**通用解题步骤总结与考试技巧：**
- **描述区域：**三重积分先搞清$V$的范围。通常以“$a\le x\le b$，对于每个$x$, $c(x)\le y \le d(x)$，对于每对$(x,y)$, $p(x,y)\le z \le q(x,y)$”等层次表述。可根据题目文字或不等式整理出这种层次关系。
- **选择积分顺序：**一般跟据区域形状，选一个变量作内积分，其上下限大多是简单函数（线性或常数）或固定值，复杂情况下也可拆多段。顺序不同积分难易差别大，需练习灵活变换。 
- **积分计算：**按次序一步步进行，尽量简化代入。大量计算时，善于分类积分各部分，尤其是分离出只含$x$或$y$的项以简化积分。
- **检查结果：**积分出炉后可用**单位和逻辑**检验：如计算体积或质量应正值，数量级合理。本例$\frac{8}{3}\approx2.667$，$z$最大4，体积约$V_{base}\times \bar{z}$，这里基底面积$2*1=2$，平均$z$约$1.333$，乘积$2.667$，合理。
- 遇到**对称区域**或**特殊函数**可简化：如球、圆柱等对称体可用柱坐标、球坐标方便计算体积或质量分布。
- 总之三重积分按部就班，多画图、多想范围，多练习即可熟练。

### 4.2.2 柱坐标系和球坐标系下的三重积分
**核心概念与公式讲解：**
- **柱面坐标（圆柱坐标系）：**扩展平面极坐标，加高度$z$。$(x,y,z)=(r\cos\theta,\,r\sin\theta,\,z)$。Jacobian与极坐标相同为$r$，因此**体积元** $dV = r\,dr\,d\theta\,dz$。使用场景：旋转对称的柱状区域，如圆柱体、圆锥体、圆柱坐标简单描述的体。
  范围：$r\ge0,\;\theta$在某范围（通常$0$到$2\pi$全角或半角等），$z$在某上下界$z_1(r,\theta)$到$z_2(r,\theta)$。若体与$\theta$无关通常$\theta$0到$2\pi$。
- **球面坐标系：**每点用半径$\rho$、极角$\phi$（从$z$轴向下）和方位角$\theta$描述：$(x,y,z)=(\rho\sin\phi\cos\theta,\;\rho\sin\phi\sin\theta,\;\rho\cos\phi)$. **体积元** $dV = \rho^2\sin\phi\,d\rho\,d\phi\,d\theta$。适于球形或球对称区域。
  通常 $\rho$在$[0,R]$或区间，$\phi$在$[0,\Phi]$，$\theta$在$[0,2\pi]$或部分。球坐标积分要牢记$\sin\phi$因子。
- 选用柱或球坐标能极大简化对称区域积分，比如求球、锥、圆柱体积等，以及积分$f(x^2+y^2)$之类函数。
**注意：**转换时描述$V$的边界方程在新坐标中的形式。例如球面$\rho$常常固定为常数，圆锥面满足$\phi$固定等。

**典型例题：**(a) 用柱坐标计算高度为5、底面半径为2的圆柱体积；(b) 用球坐标计算半径为3的球体体积。

**解题步骤：**
- **(a) 圆柱体积：**
  1. 圆柱描述：$0\le r\le2,\;0\le\theta<2\pi,\;0\le z\le5$。
  2. 柱坐标体积公式：$V = \int_{\theta=0}^{2\pi}\int_{r=0}^{2}\int_{z=0}^{5} r\,dz\,dr\,d\theta$。
  3. 计算：$\int_{z=0}^{5} dz =5$. 内两层变成 $\int_{r=0}^{2}5r\,dr = 5\left[\frac{r^2}{2}\right]_0^2 = 5\cdot2 = 10$. 再外层 $\int_{0}^{2\pi}10\,d\theta = 10\cdot2\pi =20\pi$。
  4. 区别：几何公式体积=底面积$\pi 2^2=4\pi$乘高5，也$=20\pi$,吻合。
- **(b) 球体积：**
  1. 球描述：$0\le\rho\le3,\;0\le\phi\le\pi$（整个上下一整个球），$0\le\theta<2\pi$。
  2. 球坐标体积：$V = \int_{\theta=0}^{2\pi}\int_{\phi=0}^{\pi}\int_{\rho=0}^{3} \rho^2\sin\phi\,d\rho\,d\phi\,d\theta$。
  3. 计算径向：$\int_{0}^{3} \rho^2\,d\rho = [\frac{\rho^3}{3}]_0^3 = 9$. $\phi$方向：$\int_{0}^{\pi}\sin\phi\,d\phi = [-\cos\phi]_0^\pi = 2$. $\theta$方向：$\int_{0}^{2\pi} d\theta = 2\pi$。
  4. 组合：$V = 9 \times 2 \times 2\pi = 36\pi$. 几何上球体积 $\frac{4}{3}\pi 3^3 = 36\pi$，正确。

**答案：** (a) $V_{柱} = 20\pi$；(b) $V_{球} = 36\pi$。

**通用解题步骤总结与考试技巧：**
- **柱坐标要点：**别忘$dr$积分有因子$r$。区域限$z$通常直接使用，不需Jacobian调整。用柱坐标求体积或重心常见，可将积分拆为$z$和$r,\theta$部分分别算。
- **球坐标要点：**不仅有$\rho^2$还**必须乘$\sin\phi$**，易漏。积分次序一般$\rho$先，因为$\phi,\theta$限通常常数。$\phi$积分出现$\sin\phi$，其积分是$-\cos\phi$形式，计算0到$\pi$常得到2。
- **角度范围：**全球$\phi:0\to\pi,\theta:0\to2\pi$；半球$\phi:0\to\pi/2$等；圆锥满足$\phi$定值边界，譬如以顶点为原点开角$2\alpha$的圆锥满足$\phi=\alpha$为侧面边界。
- **配合几何概念：**可用已知几何量校对。比如若算体积，可比对已知公式；算质量或惯性矩，可用对称性、极值判断合理性。
- **考试策略：**写清楚变换和取值范围。若题已指明使用某坐标系，按提示做。若没指明，则应自己识别合适坐标，必要时说明选用原因以示思路明确。
- 另外，注意**单位球**(R=1)的积分常作为标准：如面积$4\pi$、体积$\frac{4}{3}\pi$。其他半径代入幂次关系。利用这些熟知结果可迅速验证积分正确性。

### 4.2.3 三重积分的坐标变换
**核心概念与公式讲解：**这一节强调对任意三维坐标变换如何使用Jacobian。一般变换 $(x,y,z) = T(u,v,w)$ 下，**体积元**变换：
$$dV_{xyz} = \Big|\frac{\partial(x,y,z)}{\partial(u,v,w)}\Big|\,dV_{uvw}.$$ 
计算3×3行列式获取Jacobian。常用情形：
- **斜轴变换：**如旋转坐标、线性拉伸：直接算矩阵行列式即可。
- **复杂曲线变换：**如把某些表达式设为新变量。有时可以在三重积分中逐步两步变换：先换2个变量再第三个，这样Jacobian维持易算。
- 本节大多不需实际考试详细推导，重点在会正确使用特殊坐标Jacobian，前面柱/球已覆盖。若真遇一般变换，应按照二维变换类似方法做，但计算量较大，通常避免。
- 另外**梯形积分**：≥2维时可迭代套用一维换元，如$f(x+y)$可设$u=x+y$之类，结合边界变换处理。对考试，多见应用前述特殊坐标而不搞全通用复杂变换。
**例子：**略，一般不出超复杂实例算行列式。若有，可具体计算。

**总结与技巧：**
- 凡坐标变换问题，**第一步：**写清逆变换$x(u,v,w),y(u,v,w),z(u,v,w)$，然后求Jacobian，**第二步：**转换积分区域和积分函数，**第三步：**执行积分。
- **Jacobian为常数**情形最简单，比如45°旋转线性变换det=1等，此时积分范围可能变化，注意新区域界限计算。
- 若变换不线性，要把原区域方程用新变量表达仔细。最好画图或逻辑判断新变量极值。
- 三维可尝试**逐步变换**：先把一个变量换掉，看余下积分简化否，再换另一个。因为直接写3维Jacobian易错或难解，需要多耐心。
- 总体上，只要掌握二维换元要领，三维本质一致，多练柱/球典型。其他刁钻变换不大考。

### 4.3 重温 Jacobian (Optional)
**核心概念与公式讲解**：本节作为附加，深入理解Jacobian几何意义：**映射的体积伸缩因子**。当进行变量替换时，微小体积元素变换前后之比等于Jacobian行列式值。若$J>1$表示局部膨胀，$J<1$收缩，$J=0$可能映射折叠或退化。
- 对于线性映射$x=Ax$（矩阵$A$），Jacobian为$\det(A)$，这是$A$将单位立方变为平行六面体体积的比例。
- Jacobian也可以用于判断映射的局部微分同胚性质：$J\neq0$表示局部可逆，可做变量独立换元。
- 通过微积分形式证明Fubini和换元定理时，Jacobian扮演重要角色，是换元公式的严谨基础。
- 此外重温Jacobians也回顾如极坐标Jacobian来源：$x=r\cos\theta,y=r\sin\theta$时，一个小$rdrd\theta$扇环面积等于$rdrd\theta$——可通过行列式形式验证：
  $\frac{\partial(x,y)}{\partial(r,\theta)} = \begin{vmatrix}\cos\theta & -r\sin\theta \\ \sin\theta & r\cos\theta\end{vmatrix} = r\cos^2\theta + r\sin^2\theta = r$。
- 强调：在应用换元时，必须取行列式**绝对值**，因行列式负号代表定向改变，对积分量不影响正负。不过对路径方向性（如线积分）会有影响，但那另议。
**典型例题**：为何极坐标面积元是 $rdrd\theta$？(引导证明Jacobian)
**解答**：见上行列式计算或几何方法(半径增量$dr$弧长$r d\theta$面积$\approx r\,dr\,d\theta$)。

**答案要点**：因为 $\big|\frac{\partial(x,y)}{\partial(r,\theta)}\big| = r$。

**通用解题步骤总结与考试技巧：**
- 掌握**Jacobian计算**：对简单映射能快速列出雅可比矩阵并求行列式。对角线矩阵行列式是对角线乘积；三角矩阵也是乘对角线；2×2易算，3×3酌情用展开或记忆$2\times2$块。
- **注意绝对值：**写变换公式时$|J|$不能省。有时Jacobian负号可以通过调整积分限或变量次序抵消，但最好统一用绝对值确保不出错。
- **Jacobian=0**说明映射将整个区域压缩成低维，无法用于良好换元，例如极坐标在极点$r=0$退化，这也是积分极点上需注意的（不过作为可积奇点通常没问题，只要函数良性）。
- Optional内容可能不直接考，但理解它帮助避免换元时疑惑。若考也可能以小问形式让证极坐标Jacobian或判断映射可逆性等。
- 总之，在变数替换问题中，**Jacobian计算+区域变换**是关键，大部分错误出在这两点，需要谨慎检查。

## 第五章 向量场积分

### 5.1 向量场
**核心概念与公式讲解**：向量场是指空间中每点关联一个向量的函数，可记作 $\mathbf{F}(x,y,z) = P(x,y,z)\,\mathbf{i} + Q(x,y,z)\,\mathbf{j} + R(x,y,z)\,\mathbf{k}$（三维）或 $\mathbf{F}(x,y)=P(x,y)\mathbf{i}+Q(x,y)\mathbf{j}$（二维）。**直观意义：**比如流体速度场给出每点流速矢量、重力场给出每点力矢量。向量场可视为三个标量场组成。有概念：**梯度场**（某标量函数的梯度产生的向量场），**保守场**（路径无关，与梯度场等价条件）等将在后续涉及。
  
在图示上，用带箭头的曲线或箭头图表示向量场：每点画箭头方向和长度代表$\mathbf{F}$。例如 $\mathbf{F}(x,y)=(-y,x)$ 在平面每点产生垂直径向的向量，是一个旋转场。
  
**应用场景**：力场做功（线积分），流场通量（面积分）等物理意义都依赖向量场概念。**连续性**、**可微性**常作为计算前提，保证场无奇点或平滑可导以便应用定理。

**典型例题**：给出一个二维向量场 $\mathbf{F}(x,y) = \langle -y, \; x \rangle$。求 $\mathbf{F}$ 在点 $(1,2)$ 处的向量，并描述该向量场的特点。

**解题步骤：**
1. **代入计算向量：**$\mathbf{F}(1,2) = \langle -2,\;1\rangle$。
2. **描述特点：**$\mathbf{F}(x,y)=(-y,x)$ 表示在任一点$(x,y)$产生一个与径向$(x,y)$ **正交**的向量（因为点积 $(x,y)\cdot(-y,x) = -xy+xy=0$），且长度等于原径向长度$\sqrt{x^2+y^2}$. 并按左手规则方向旋转（$(1,0)$映射到$(0,1)$等），实际上 $\mathbf{F}$ 是一个**旋转场**：所有向量沿圆周方向环绕原点，大小随距原点距离线性增长。这场是二维速度场代表一个匀角速度旋转。

**答案：** 在$(1,2)$处 $\mathbf{F}(1,2)=\langle -2,\,1\rangle$。该向量场每点的向量都垂直指向原点径向，方向沿逆时针环绕，大小与到原点距离成正比，是一个绕原点旋转的场。

**通用解题步骤总结与考试技巧：**
- **向量场代入**非常直接，按坐标函数算出向量即可。检查维数是否匹配，例如二维场给两分量。
- **图像/性质**：可在简单场合概述。如$(P,Q)=(y,-x)$表示顺时针旋转场；$(P,Q)=(x,y)$表示径向发散场等。识别**保守场**（看是否形如梯度，比如$P=\partial \phi/\partial x,\;Q=\partial \phi/\partial y$）或**无旋场**($\nabla\times \mathbf{F}=0$等)也常考，通过判断偏导关系比如$\partial P/\partial y \stackrel{?}{=}\partial Q/\partial x$。
- 物理例子可帮助理解：如$\mathbf{F}(x,y)=(-y,x)$类似**匀速圆周运动速度场**；$\mathbf{F}(x,y)=(x,y)$类似**弹簧回复力场**（中心指向，Hooke定律)；$\mathbf{F}(x,y)=(\frac{-x}{(x^2+y^2)^{3/2}},\frac{-y}{(x^2+y^2)^{3/2}})$是**引力场**平面投影等。
- 考试对5.1一般不会有独立计算题，更多是概念识别，或为后续积分做准备。如果问，可准备举例说明**向量场**概念或判断其简单性质（连续性、光滑性或有无源）。
- 可以提**梯度场**示例：$\mathbf{F}=\nabla(x^2+y^2)=(2x,2y)$，其行径与标量势联系。保守场**功率**路径无关也在5.2.2涉及。
- 关键：确保理解向量场每点产出向量，不同于标量场产出数值。文字表达注意分清。

### 5.2.1 向量场中的线积分定义和案例
**核心概念与公式讲解：**在向量场中定义沿一条曲线的**线积分**。有两种类型：
- **线积分（第二类）沿曲线对向量场的积分**：形式 $\displaystyle \int_C \mathbf{F}\cdot d\mathbf{r} = \int_C P\,dx + Q\,dy + R\,dz$。它表示沿曲线移动时向量场做功的累积或力沿路径的投影积累。若曲线用参数 $\mathbf{r}(t)$, $t\in[a,b]$，则 $d\mathbf{r} = \mathbf{r}'(t)dt$，线积分计算为：
  $$\int_{t=a}^{b} \mathbf{F}(\mathbf{r}(t))\cdot \mathbf{r}'(t)\,dt = \int_a^b [P(x(t),y(t),z(t))x'(t) + Q(\cdot)y'(t) + R(\cdot)z'(t)]dt.$$ 
  几何理解：$\mathbf{F}\cdot d\mathbf{r}$是力在无穷小位移方向的投影乘步长，积分总和即总功。
- **线积分（第一类）沿曲线对标量场的积分**：形式 $\displaystyle \int_C f(x,y,z)\,ds$。它是累加沿曲线的标量值乘曲线长度（密度求质量等应用）。参数表示：$\int_a^b f(x(t),y(t),z(t))\|\mathbf{r}'(t)\| dt$。
  
本节关注前者（F·dr类型）。**计算流程：**选参数化路径，求导代入，积分$t$从起点到终点。**路径方向**重要：反向会改变符号（因为$d\mathbf{r}$方向变了）。

**典型例题：**设 $\mathbf{F}(x,y) = \langle x,\,2y \rangle$，曲线$C$为从点$(0,0)$到$(2,1)$的折线，经由直线段$(0,0)$到$(2,0)$再到$(2,1)$。计算 $\int_C \mathbf{F}\cdot d\mathbf{r}$。

**解题步骤：**
1. **分段参数化：**$C$有两部分：
   - $C_1$: $(0,0)\to(2,0)$. 可参数：$x=t,\;y=0,\;t\in[0,2]$。
   - $C_2$: $(2,0)\to(2,1)$. 参数：$x=2,\;y=t,\;t\in[0,1]$。
2. **计算 $C_1$积分**：在$C_1$上 $\mathbf{F}(x,y)=(x,0)$（因$y=0$使$2y=0$），$d\mathbf{r}=(dx,dy)=(dt,0)$。
   $$\int_{C_1} \mathbf{F}\cdot d\mathbf{r} = \int_{0}^{2} \langle t,0\rangle \cdot \langle 1,0\rangle dt = \int_0^2 t\cdot 1 + 0\,dt = \int_0^2 t\,dt = \left.\frac{t^2}{2}\right|_0^2 = 2.$$ 
3. **计算 $C_2$积分**：在$C_2$: $\mathbf{F}(2,t)=(2,\;2t)$，$d\mathbf{r}=(0,dt)$。
   $$\int_{C_2} \mathbf{F}\cdot d\mathbf{r} = \int_{0}^{1} \langle 2,2t\rangle \cdot \langle 0,1\rangle dt = \int_0^1 2\cdot0 + 2t\cdot1\,dt = \int_0^1 2t\,dt = \left.t^2\right|_0^1 = 1.$$ 
4. **总积分：**$\int_C \mathbf{F}\cdot d\mathbf{r} = \int_{C_1} + \int_{C_2} = 2 + 1 = 3$。
5. **检查**：物理类比，$P dx$部分在水平段产生$\int_0^2 x dx=2$, $Q dy$部分在垂直段产生$\int_0^1 2y dy=1$，相加3，正确。

**答案：** $\displaystyle \int_C \mathbf{F}\cdot d\mathbf{r} = 3$。

**通用解题步骤总结与考试技巧：**
- **参数选取：**线积分关键是正确参数化$C$。直线常用$ x=x_0+(x_1-x_0)t$等线性插值$t\in[0,1]$。圆弧用角参数，任意曲线需已知方程式或分段。写清起讫$t$范围。
- **代入计算：**把$x(t),y(t),z(t)$代入$\mathbf{F}$得到分量函数，然后点乘$(x'(t),y'(t),z'(t))$再积分$t$。注意积分变量正确转换。常见粗心：搞错积分上下限或忘微分乘上$t$导数。
- **分段曲线**：如例，有转折需分成易参数段分别算再求和。若场是**保守场**（见5.2.2），则路径无关可简化，但在一般情况要按路径求，不可取捷径。
- **方向**：如果曲线逆向参数，结果会相反。例如如果积分从(2,1)到(0,0)沿同路径，将得到 -3。阅读题目注意起点终点顺序。通常箭头或文字"from A to B"说明方向。
- **解释物理**：$\mathbf{F}\cdot dr$累加相当做功。负值表明力与路径反向（阻力做负功），正值表明助力前进。
- 如果在二、三维，不要混淆线积分 vs. 面积分等。线积分结果单位与力·长度或力*长度mass*g etc. Limit the concept to along path integration of tangential component.
- 在考试常见类型：① 给$\mathbf{F}$和路径$C$，计算$\int_C \mathbf{F}\cdot dr$（如上例）。② 验证路径无关：计算不同路径结果比对。③ 用Green定理将闭合曲线积分转成面积积分（5.2.4）。
- 重点：**会参数化+会计算**。若$\mathbf{F}$简单保守，也可找势函数然后$f(B)-f(A)$，快速无须积分，前提识别保守场（5.2.2讲）。

### 5.2.2 梯度场和保守场
**核心概念与公式讲解：****梯度场**是指一个向量场可以表示成某个标量函数的梯度：$\mathbf{F}=\nabla \phi$。此时$\phi(x,y,z)$称为**势函数**或**位函数**。**保守场**（无旋场在单连通域里等价于保守场）定义：沿任一路径的线积分只取决于端点，与路径无关。换句话说，**闭合路径**积分为0。
- 重要等价性：$\mathbf{F}$ 保守 $\Leftrightarrow \mathbf{F}=\nabla \phi$ 存在势函数（在适当区域条件下）。因此保守场也称梯度场。势函数提供了一个方便计算线积分的方法：对于保守场， 
  $$\int_{C_{A\to B}} \mathbf{F}\cdot d\mathbf{r} = \phi(B) - \phi(A),$$ 
  与路径无关。
- **判别**：（二维）若区域无孔单连通，$\mathbf{F} = \langle P,Q\rangle$保守场等价于 $\frac{\partial P}{\partial y} = \frac{\partial Q}{\partial x}$（即 $\nabla \times \mathbf{F}=0$)。三维也看旋度$\nabla \times \mathbf{F} = \mathbf{0}$且域简单连通。
- 找**势函数**：给 $P=\phi_x,\; Q=\phi_y,\;R=\phi_z$，可积分 $P$ 对$x$或 $Q$对$y$，然后匹配常数函数项。确保跨偏导一致。
- 意义：保守力场如重力、弹簧力有势能函数。计算作功简化为势能差。
  
**典型例题：**判断向量场 $\mathbf{F}(x,y)=(2xy + 3,\; x^2 + 4y)$ 是否为保守场？若是，求其势函数 $\phi(x,y)$ 并计算从 $(0,0)$ 到 $(1,2)$ 的线积分值。

**解题步骤：**
1. **判别保守：**$P(x,y)=2xy+3,\;Q(x,y)=x^2+4y$。计算混合偏导：
   $$\frac{\partial P}{\partial y} = 2x,\qquad \frac{\partial Q}{\partial x} = 2x.$$ 
   因为 $\frac{\partial P}{\partial y} = \frac{\partial Q}{\partial x} = 2x$，满足等式，所以$\mathbf{F}$在整个$\mathbb{R}^2$上保守（且域平面无洞）。
2. **求势函数 $\phi(x,y)$：**满足 $\phi_x = P = 2xy+3,\; \phi_y = Q = x^2+4y$。
   - 先对$x$积分：$\phi(x,y) = \int (2xy+3)dx = x^2y + 3x + g(y)$，其中$g(y)$为积分“常数”可能仅依赖$y$。
   - 求$g(y)$用 $\phi_y=Q$：先求已得$\phi$对$y$导数：$\phi_y = x^2 + g'(y)$。设其应等于给定$Q(x,y) = x^2 + 4y$。比较得 $g'(y) = 4y$。
   - 积分$g'(y)$：$g(y)=2y^2 + C$（$C$为全局常数，可取0作为势函数基准）。
   - 综上 $\phi(x,y) = x^2y + 3x + 2y^2$（忽略常数）。
   *检验：$\phi_x =2xy+3,\;\phi_y=x^2+4y$正确。*
3. **算线积分：**因保守，$\int_{(0,0)}^{(1,2)}\mathbf{F}\cdot dr = \phi(1,2) - \phi(0,0)$. 计算：
   $\phi(1,2) = 1^2\cdot2 + 3\cdot1 + 2\cdot4 = 2 + 3 + 8 = 13$；
   $\phi(0,0) = 0 + 0 + 0 = 0$。
   差值 $= 13 - 0 = 13$。
   （若走路径也须得13，但无需，路径无关简化。）
4. **结论：**$\mathbf{F}$保守，势函数 $\phi(x,y)=x^2y+3x+2y^2$，路径积分结果13。

**答案：** $\mathbf{F}$ 是保守场（因 $\partial P/\partial y=\partial Q/\partial x=2x$）。其势函数可取 $\phi(x,y)=x^2y+3x+2y^2$。因此沿任意路径从$(0,0)$到$(1,2)$的线积分均为 $\phi(1,2)-\phi(0,0)=13$。

**通用解题步骤总结与考试技巧：**
- **判别：**二维场验$P_y$ vs $Q_x$；三维场验$\nabla\times \mathbf{F} = 0$（写3个等式$P_y=Q_x,\;P_z=R_x,\;Q_z=R_y$）。若域不单连通，在洞周(如去掉原点)存在非保守现象可能，考试一般假定域简单或额外说明。
- **势函数求解：**积分/比较法是标准。注意**常函数**integration constant可能依其余变量，别漏。计算$g'(y)$或$h'(z)$等要细心对比对应$Q$或$R$。3D需要两步调整：$\phi_x=P$积出$\phi$含$y,z$函数$g(y,z)$; 然后$\phi_y$匹配$Q$确定$g$的$y$偏导；再$\phi_z$匹配$R$确定余下$z$函数。顺序无所谓，只要一致性就行。
- 若找势困难，可**猜**：有时根据观察：$P$对$x$积分有混合项$x^2y$提示$\phi$里$x^2y$形；$Q$对$y$有$2y^2$提示$\phi$含$2y^2$等等。逐步调整验证。
- **确定保守立即用势算积分**：节省计算，也避免路径复杂积分。如上一节折线例，若F保守，只需端点算势不用两段求。但只有F满足条件可行，切记非保守不能乱用势或路径无关假设。
- **闭合曲线积分**：保守场$\oint_C \mathbf{F}\cdot dr=0$。比如考试让算一复杂闭合路径积分，如果识别场保守则直答0省时。
- **应用**：**Green定理**(下一节)常判断$\oint(Pdx+Qdy)=0$时推场保守反过来。Kinetic/potential energy, etc. not needed to mention in pure math answer, but understanding helps.
- 说理：如问题问"是否存在势函数"要论证$P_y=Q_x$及域连通性。若要求"求势"就直接做。大题可能包括判断+求势+用势算积分一条龙，如例子。
- 计算**检查**：最后一定把求的$\phi$微分校核回来$P,Q$，容易积分漏项出错。
- “conservative” spelled properly as “保守” or "势场".

### 5.2.3 线积分的各种表达形式
**核心概念与公式讲解：****线积分形式**提及两类:
- **第一类**（标量场沿曲线积分）: $\int_C f\,ds$，我们前述提过，其被积函数是$f$乘以弧长。也写作$\int_C f(x,y)\,ds$，在参数化形式下为$\int_a^b f(x(t),y(t)) \sqrt{x'^2+y'^2}\,dt$。常用于物理:长度加权,质量(线密度)。
- **第二类**（向量场对位移积分）: $\int_C \mathbf{F}\cdot d\mathbf{r} = \int_C P\,dx+Q\,dy$（2D）或在3D中加入$dz$项。物理应用:功,流体循环。
  
**其它形式**: 
- 二维情形: $\int_C P\,dx+Q\,dy$。如前所述的参数化形式，或在微分形式上下文中（处理$dx,dy$）。
- 如果$f$或$\mathbf{F}$的分量以函数形式给出，有时更倾向于在原始变量中直接积分：例如，如果参数方程是分段线性的，你可以像前面的例子那样容易地分段积分。
- **方向角形式**: 例如，$\int_C M\,dy - N\,dx$可能出现以匹配旋转形式（通量形式与环流形式的差异）。通常通过符号调整转换为$\mathbf{F}\cdot dr$格式或识别为通量（Green散度形式）。
  
**特殊:**
- 参数独立性：如果曲线$C$由显式方程给出，如$y=g(x)$，线积分也可以用单变量表示：$\int_{x=a}^{b} [P(x,g(x)) + Q(x,g(x))g'(x)] dx$。这源自参数化$x=t, y=g(t)$。
- 类似地，如果是垂直路径，$x$为常数，$dx=0$，线积分简化为$\int Q\,dy$。

**典型例题：**曲线$C$由方程$y=x^2$（$0\le x\le1$）和直线$x=1$（$0\le y\le1$）组成闭合路径。写出$\oint_C (P\,dx+Q\,dy)$的积分形式（不必计算），假设$P(x,y)$, $Q(x,y)$是一般函数。

**解题思路：**
1. 将$C$分段:
   - $C_1$: 抛物线$y=x^2$, $x:0\to1$。可参数化为$x=t, y=t^2$。
   - $C_2$: 直线$x=1$, $y:1\to0$（向下）。参数化为$y=t, x=1$, $t:1\to0$（注意反向定向以闭合路径）。
2. $C_1$积分: $\int_{0}^{1} [P(t,t^2)\,dx + Q(t,t^2)\,dy]$，其中$dx=dt, dy=2t dt$。所以被积函数为: $P(t,t^2)*1 + Q(t,t^2)*(2t)$。
   $$\int_{0}^{1} [P(t,t^2) + 2t Q(t,t^2)] dt.$$
3. $C_2$积分: 参数$t$从1到0。为清晰起见使用$u$以避免混淆：
   $$\int_{u=1}^{0} [P(1,u)\,dx+Q(1,u)\,dy]$$，其中$dx=0, dy=du$。所以被积函数$P(1,u)*0 + Q(1,u)*1 = Q(1,u)$。但$u$从1到0，反转积分限以保持被积函数：
   $$= -\int_{0}^{1} Q(1,u)\,du.$$
4. 总$\oint_C = \int_{0}^{1}[P(t,t^2)+2t Q(t,t^2)]dt - \int_{0}^{1}Q(1,u)du$。
   这表达了不同形式：第一部分参数化，第二部分在原始$y$中完成（以$u$为虚拟变量）。

**答案：** 分段写为
$$\oint_C (P\,dx+Q\,dy) = \int_{x=0}^{1}[P(x,x^2) + 2x\,Q(x,x^2)]dx \;-\; \int_{y=0}^{1} Q(1,y)\,dy,$$
注意后半负号是因为方向相反。

**通用解题步骤总结与考试技巧:**
- **掌握各形式转换:** 参数化与直接积分混合。例如，如果是$y=f(x)$形式，$dy=f'(x)dx$，所以$\int (P dx+Q dy) = \int [P + Q f'(x)] dx$。
- **微分1-形式:** 识别$M dx + N dy$积分与$\mathbf{F}\cdot dr$类似，其中$P=M, Q=N$或可能需要反转符号。
- 如果显式参数化麻烦，看看直接积分是否更容易：例如，如果部分$dx=0$或一个变量为常数，直接用单变量积分Q或P。
- 但要注意定向性，如果直接切片：需要一致的定向，否则加上负号。
- **弧长积分**: 知道公式$ds = \sqrt{(dx)^2+(dy)^2}$参数化形式或$ds = \sqrt{1+(dy/dx)^2} dx$。可能会问及$\int_C P dx + Q dy$（功）和$\int_C f ds$（质量或长度）之间的区别。
- 区分用法：例如，$\int_C (y dx - x dy)$有时出现（如Green定理中计算2倍面积的公式），它是$\mathbf{F}=(-y,-x)$点乘$dr$？实际上如果$\mathbf{F}=(-y,x)$，$\mathbf{F}\cdot dr = -y dx + x dy$，相应检查给定形式。
- 所以所有形式都是变体，用点积概念统一并选择适当的F。
- **Green定理**（下一节）提供了如何将线积分形式转换为区域内的二重积分。所以要熟悉将积分重写为标准的$P dx+Q dy$或$L dy - M dx$形式。
- 记住方向引起的正负号。

### 5.2.4 Green定理
**核心概念与公式讲解：**Green定理是平面上将**闭合曲线**的环线积分和其内部区域的**面积积分**联系的定理。标准形式（循环形式）:
$$\oint_{C} (P\,dx + Q\,dy) = \iint_{D} \Big(\frac{\partial Q}{\partial x} - \frac{\partial P}{\partial y}\Big) dA,$$ 
其中$C$是$D$的正向（以区域左侧在曲线内部，通常逆时针）边界。
- **意义:** 左侧为场沿曲线的环量（如流场环流），右侧是区域内场的旋度积分（总涡量）。因此Green定理其实是2D的Stokes定理特例。
- **另一形式（面积-通量形式）:** 
$$\oint_C (L\,dy - M\,dx) = \iint_{D} (\frac{\partial L}{\partial x} + \frac{\partial M}{\partial y}) dA.$$ 
推导:取$P=-M,\;Q=L$放入标准公式可得。此形式物理解释:左边$(L\,dy - M\,dx)$可视作沿闭曲线法向量分量(外法线$x$分量$M$、$y$分量$L$)的积分，即曲线的通量；右边是区域散度$\partial M/\partial x + \partial L/\partial y$的积分，即平面散度定理(2D Gauss)。
- **应用:** 计算复杂闭合线积分（计算Green更容易）；求平面图形面积：取$P=-y/2,\;Q=x/2$得到公式$\oint_C x dy - y dx = 2 \iint_D dA$（$=2$倍面积）；亦可$L=x,\;M=y$在通量形式中得到$\oint (x dy - y dx) = 2$倍面积。
- **方向:** 必须用**正向**（逆时针）边界。若边界按反向，Green结果取负。多片区域则对每个子区域应用并求和。
  
**典型例题：**利用Green定理计算沿矩形闭合曲线$C$：顶点$(0,0)\to(3,0)\to(3,2)\to(0,2)\to(0,0)$逆时针，对场$P(x,y)=x^2$，$Q(x,y)=xy$的环线积分$\oint_C (P\,dx+Q\,dy)$。

**解题步骤（使用Green）:**
1. 计算被积函数: $\partial Q/\partial x - \partial P/\partial y$:
   $\partial Q/\partial x = \partial(xy)/\partial x = y$, 
   $\partial P/\partial y = \partial(x^2)/\partial y = 0$。差 = $y - 0 = y$。
2. 积分区域$D$:矩形$0\le x\le3,\;0\le y\le2$。所以：
   $$\oint_C (P\,dx+Q\,dy) = \iint_D (\partial Q/\partial x - \partial P/\partial y) dA = \iint_{0\le x\le3,0\le y\le2} y\, dx\,dy.$$
3. 计算: $\int_{x=0}^{3}\int_{y=0}^{2} y\, dy\, dx = \int_{0}^{3} [\frac{y^2}{2}]_{0}^{2} dx = \int_{0}^{3} \frac{4}{2} dx = \int_0^3 2 dx = 6$。
4. 答案: 6。
  
**核对（若直接计算环线）**: 需要对每段参数化并求和，更耗时：
   - 底边（0->3）: $y=0$，被积函数$P dx+Q dy = x^2 dx + 0 = \int_0^3 x^2 dx =9$。
   - 右边（0->2向上）: $x=3$，$dx=0$，被积函数$P dx+Q dy = 0 + 3y dy=3\int_0^2 y dy=3*2=6$。
   - 顶边（3->0向左）: $y=2$，反向！参数x从3降到0：被积函数$x^2 dx + x*2 dy (dy=0) = \int_3^0 x^2 dx = -\int_0^3 x^2 dx=-9$。
   - 左边（2->0向下）: $x=0$，$dx=0$，被积函数 = $0 + 0*y dy=0$。
   - 总和=9+6-9+0=6，与结果一致。

**答案:** $\displaystyle \oint_C (x^2\,dx + x y\,dy) = 6$。

**通用解题步骤总结与考试技巧:**
- **适用前提**: $C$必须封闭且$P,Q$有连续偏导。注意路径正向（通常逆时针）对号入座，若给顺时针，最后结果取负号或重新设逆时针。
- **步骤**: 清晰写出被积函数$\partial Q/\partial x - \partial P/\partial y$，然后设置双重积分区域$D$。区域$C$给出的是多边形或类似形状的内部，设置适当的x、y边界或按更简单的顺序做双重积分。
- **简化**: 如果区域复杂，可以将区域分解并做多个积分，或考虑对称性论证。
- **检查方向**: 如有任何混淆，快速做子例：Green定理期望正向。如果给定相反方向，最好明确反转符号。
- **Green定理用途**:
   - 更容易计算线积分（如我们所做的）。
   - 显示某些线积分等于面积等（特殊$P,Q$选择）。
   - 在单连通区域中，如果$\partial Q/\partial x = \partial P/\partial y$，证明路径无关性（通过$\iint (.. ) =0$证明）。
   - 通过适当的$P,Q$求解面积。例如，面积公式：$\text{面积} = \frac{1}{2}\oint_C (x dy - y dx)$来自第二形式。在已知多边形坐标时很有用。
- 如果直接分段计算可行但繁重，提及使用Green定理可避免参数化和符号错误。
- 还要提及，Green定理是平面上Stokes定理的特例；在考试中可能不需要，但如有需要可作为背景。
  
### 5.3.1 散度
**核心概念与公式讲解：** **散度**（divergence）是向量场的数量度量，描述场在一点的"源"或"汇"程度。定义:
- 在二维: $\displaystyle \nabla\cdot \mathbf{F} = \frac{\partial P}{\partial x} + \frac{\partial Q}{\partial y}$ 对于 $\mathbf{F}(x,y)=(P,Q)$。
- 在三维: $\displaystyle \nabla\cdot \mathbf{F} = \frac{\partial P}{\partial x} + \frac{\partial Q}{\partial y} + \frac{\partial R}{\partial z}$ 对于 $\mathbf{F}(x,y,z)=(P,Q,R)$。
  
几何意义: 散度>0表示该点附近场向外散发（源头），<0表示汇聚（汇水槽），=0表示局部体积守恒（无源无汇，可能为纯过流）。
- 物理:如流体速度场散度表示流体密度变化:散度正意味着流体源生或膨胀，负表示汇集或压缩。电场散度与电荷密度相关（高斯定理）。
- 如果$\nabla\cdot\mathbf{F}=0$，称$\mathbf{F}$为**无散**（solenoidal）场，在无边界情况下通常意味着无净产生或消失（如不可压缩流）。
  
**判别**: 在平面Green散度形式: $\oint_C (L dy - M dx) = \iint_D (\partial L/\partial x + \partial M/\partial y) dA$ 表明 $\nabla\cdot(L,-M)$ 构成被积函数（仅作为上下文）。
  
**典型例题:** 给定二维向量场 $\mathbf{F}(x,y)=(x^2 - y,\; 3x + e^y)$。计算其散度，并判断在点$(1,0)$散度符号及意义。

**解题步骤:**
1. 识别 $P(x,y)=x^2 - y,\; Q(x,y)=3x+e^y$。
2. 计算散度: $\frac{\partial P}{\partial x} + \frac{\partial Q}{\partial y}$:
   $\partial P/\partial x = 2x$, 
   $\partial Q/\partial y = e^y$。
   所以 $\nabla\cdot \mathbf{F} = 2x + e^y$。
3. 在(1,0): $2(1) + e^0 = 2 + 1 = 3$。
4. 符号: 正（3）。意味着在(1,0)这个场有净流出：流量散出，场充当源。
   例如，如果$\mathbf{F}$是速度场，在(1,0)附近流体向外扩张。如果$\mathbf{F}$是力场，散度的意义可能不那么直观，但数学上为正。

**答案:** $\displaystyle \nabla\cdot\mathbf{F}(x,y)=2x + e^y$。在$(1,0)$处散度$=3>0$，表示$\mathbf{F}$在该点有正散发，即看作源头，流出量大于流入量。

**通用解题步骤总结与考试技巧:**
- 计算散度直接按偏导定义，对每个分量取对应变量的偏导并求和。直接但要小心：没有交叉项。
- 检查公式：二维与三维的区别常是学生回忆错误的地方，必须包括每个分量的所有偏导。
- 解释通常要求定性：
  - 如果$\nabla\cdot F = 0$在区域内，表示"不可压缩流"或"质量守恒，任何地方都没有净源"。
  - 如果在区域中心为正，可能是源（像泉水）。
  - 如果为负，是汇（排水口）。
- 可能会遇到"给定流体的速度场，通过计算散度确定流体在哪里产生/移除"。
- 可能链接到"计算通过附近小闭合曲面的通量，通过散度定理微观近似 = 散度 * 面积"。
- 考试中：
  - 小题："计算给定向量场的散度"（如例）。
  - 或"哪些场具有零散度？通过偏导相等为负或类似情况来证明"。
- 简洁写法："div F = ..."，除了可能需要提及"单位或意义"外，不需要过多措辞。
- 梯度场的散度：$\nabla \cdot (\nabla f) = \nabla^2 f$（拉普拉斯方程概念）。
- 可能与下一节（通量积分和散度定理，5.3.3和5.5.2）结合，但在此级别可能是单独的概念检查。

### 5.3.2 旋度
**核心概念与公式讲解：** **旋度**（curl）描述向量场在一点周围的**旋转趋势**。在三维：
$$\nabla \times \mathbf{F} = \begin{vmatrix} \mathbf{i} & \mathbf{j} & \mathbf{k} \\ 
\partial/\partial x & \partial/\partial y & \partial/\partial z \\
P & Q & R \end{vmatrix} 
= \Big(\frac{\partial R}{\partial y} - \frac{\partial Q}{\partial z}\Big)\mathbf{i} - \Big(\frac{\partial R}{\partial x} - \frac{\partial P}{\partial z}\Big)\mathbf{j} + \Big(\frac{\partial Q}{\partial x} - \frac{\partial P}{\partial y}\Big)\mathbf{k}.$$
- 旋度是个向量（在3D中）。
- 物理：$\nabla \times \mathbf{F}$指向旋转轴的方向（右手法则），大小 = 局部角速度的两倍。
- 在**二维场**中，我们通常考虑"标量旋度"（k分量，因为$\mathbf{F}(x,y)=(P,Q,0)$，$\nabla\times \mathbf{F} = (0,0, Q_x - P_y)$）。这个标量有时也称为"标量旋度"或"旋转度"。
- 如果$\nabla\times\mathbf{F} = \mathbf{0}$（或在平面中$Q_x=P_y$），场是**无旋**（irrotational）/**保守**位势场，如果域简单。
  
**典型例题:** 求二维场 $\mathbf{F}(x,y) = (y^3,\, -3xy^2)$ 的旋度。

**解题:**
- 处理$\mathbf{F}=(P,Q)=(y^3, -3xy^2)$。标量旋度（k分量）= $Q_x - P_y$。
  $Q_x = \partial(-3xy^2)/\partial x = -3y^2$，
  $P_y = \partial(y^3)/\partial y = 3y^2$。
- 所以$Q_x - P_y = -3y^2 - 3y^2 = -6y^2$。
- 所以$\nabla\times\mathbf{F} = (0,0,-6y^2)$。我们可以说在平面上，"旋度 = -6y^2（指向平面外）"。
- 在任何点（除了y=0线），非零表示旋转涡旋。负号表示顺时针旋转（根据右手法则，负k意味着旋转方向是顺时针）。
  
**答案:** $\displaystyle \nabla \times \mathbf{F}(x,y) = (0,0,\;-6y^2)$。即平面场的旋度标量为$-6y^2$。

**通用解题步骤总结与考试技巧:**
- 对于2D，快速计算$Q_x-P_y$。该公式更容易记忆，因为它与Green定理被积函数（$\partial Q/\partial x - \partial P/\partial y$）相关联。
- 对于3D，公式可以记忆或通过行列式系统地推导。公式有规律，但注意写法避免符号错误：
  好记忆：
   $(\nabla\times F)_x = R_y - Q_z$，
   $(\nabla\times F)_y = P_z - R_x$（注意符号：上面公式对j有负号，即P_z - R_x），
   $(\nabla\times F)_z = Q_x - P_y$。
- 这常用于测试$\mathbf{F}$是否保守：如果是，则$\nabla\times F = 0$。
- 如果问："$\mathbf{F}$是无旋的吗？"可以计算旋度看是否为0。
- 如果问："求$\nabla\times F$并解释方向"，可能考虑$\mathbf{F}$是否是已知的涡旋，例如$\mathbf{F}=(-y,x,0)$产生$\nabla\times F = (0,0,2)$（指向平面外意味着一致的旋转方向）。
- 或验证特定场景中的Stokes定理（如5.5.1任务）。
- 对于平面流，标量旋度的符号表示旋转方向。$\nabla \times F = 0$意味着没有旋转（如位势流）。
- 与散度区分：散度是表示源的标量，旋度是表示局部旋转轴的向量。
- 可能的联系："零旋度的流可以表示为位势的梯度，如果域是单连通的"（仅是与5.2.2的概念交叉）。
- 如果给定一组场，识别哪些是旋转的：对每个快速计算$\partial Q/\partial x - \partial P/\partial y$。
- 简洁：如果完全表示2D结果为带有平面外分量的向量，提及$\mathbf{k}$分量。

### 5.3.3 Green公式的散度、旋度形式
**核心概念与公式讲解：**Green定理有两种等价表述:
- **环量(curl)形式:** $\oint_C P\,dx+Q\,dy = \iint_D (Q_x - P_y)\,dA$。我们在5.2.4中已经介绍过这种形式。
- **散度(flux)形式:** $\oint_C L\,dy - M\,dx = \iint_D (\frac{\partial L}{\partial x} + \frac{\partial M}{\partial y})\,dA$。
  
第二种形式可以通过在标准Green公式中代入$P=-M, Q=L$得到：
  这样左边变为$\oint_C (-M dx + L dy) = \oint_C (L dy - M dx)$，
  右边：$\iint (\partial (L)/\partial x - \partial(-M)/\partial y) = \iint (L_x + M_y)$。
  
解释：
- $L dy - M dx$可以看作向量场$\mathbf{F}=(M,L)$和向外法向量$n$的$\mathbf{F}\cdot \mathbf{n}\,ds$。实际上在一个定向闭合曲线（逆时针），向外法向量分量：$n_x = \frac{dy}{ds}, n_y = -\frac{dx}{ds}$（因为逆时针方向，左侧为内部，所以向外=切线左侧）。然后通量$\mathbf{F}\cdot n = M n_x + L n_y = M \frac{dy}{ds} + L (-\frac{dx}{ds}) = \frac{1}{ds}(M dy - L dx)$符号差异，实际上如果是逆时针，向外在左侧，检查符号：实际公式是$\oint_C (L dy - M dx)$等于向量场$(M, L)$的向外通量积分。
  内部被积函数$L_x+M_y = \nabla\cdot(M,L)$，即该场的散度。所以它符合平面上的散度定理：
  $\oint_C \mathbf{F}\cdot n ds = \iint_D \nabla\cdot \mathbf{F} dA$，其中$\mathbf{F}=(M,L)$。完全一致。
  
所以"散度形式的Green定理"=二维散度定理。这用于例如推导前面提到的面积公式（选择$\mathbf{F}=(x,y)$等）。
  
**典例**：明确给出两种形式或从一种形式转换到另一种：
可能会问："用两种形式陈述Green定理并说明它们的物理意义。"

**答案概述**：
- 环流形式：$\oint_C (P dx+Q dy) = \iint_D (Q_x - P_y) dA$。解释：围绕C的环流等于D中的总旋度。
- 通量形式：$\oint_C (L dy - M dx) = \iint_D (L_x + M_y) dA$。解释：穿过C的向外通量等于D中的总散度。

**通用解题步骤/注意事项**：
- 确保通量形式的方向为逆时针（使向外法向量正确对齐）。
- 可能会有题目要求使用散度形式通过二重积分轻松计算通量。
- 或者通过重写积分来证明这两种形式是相等的。
- 如果知道标准Green公式（旋度形式），可以通过替换推导通量形式。
- 识别$L dy - M dx$为向量场$(M,L)$在逆时针闭环上的法向分量的线积分（虽然不明显，但相信符号）。
- 可能在特定任务中看到公式：例如给定通量积分可转换为散度的二重积分。
  
基于上述内容，如果考试期望"微分形式的Green定理"，它们会表示为$\frac{\partial Q}{\partial x} - \frac{\partial P}{\partial y} = 0$，闭环结果=0如果内部被积函数=0（比如场是保守的）。

**结论**：提供公式并指出一个表达环流-旋度关系（平面上的Kelvin定理），另一个表达通量-散度关系（平面上的Gauss定律）。可能与下一节联系：5.5.1 Stokes定理（第一种形式的三维类比），5.5.2 Gauss定理（第二种形式的三维类比）。

### 5.4.1 标量场上的曲面积分
**核心概念与公式讲解：**对一个曲面$S$（参量: $(x(u,v),y(u,v),z(u,v))$）上的标量场$\phi(x,y,z)$, **曲面积分**:
$$\iint_S \phi(x,y,z)\, dS,$$ 
表示在曲面$S$上对$\phi$乘以面积元素$dS$进行积分。
- 如果曲面由$z=f(x,y)$在xy平面上区域D内明确给出：
  $dS = \sqrt{1+f_x^2+f_y^2} dx dy$。那么
  $\iint_S \phi\, dS = \iint_D \phi(x,y,f(x,y)) \sqrt{1+f_x^2+f_y^2} dx dy$。
- 如果是参数化：$\mathbf{r}(u,v)$，$dS = \|\mathbf{r}_u \times \mathbf{r}_v\| du dv$。那么$\iint_S \phi(x,y,z) dS = \iint_{UV} \phi(\mathbf{r}(u,v)) \|\mathbf{r}_u \times \mathbf{r}_v\| du dv$。
  
**应用**: 
- 计算表面积($\phi=1$)。
- 加权表面：例如如果$\phi$是每单位面积的密度，则为表面质量。
- 辐射通量如果需要乘以余弦等（这是通量，与此处无关）。
  
**典型例题:** 求平面$z=5-2x-3y$在第一卦限（$x,y,z\ge0$）的部分的面积。
（这是$\phi=1$的标量场积分）。

**解答:**
- 平面在第一卦限的部分：与坐标轴的交点：在x轴（y=0,z=0）：$5-2x=0$ -> $x=2.5$；y轴$5-3y=0$ -> $y=1.667$；z轴$z=5$在(0,0,5)。所以这是平面上具有这些交点的三角形区域。
- 我们可以用公式积分。$z=5-2x-3y$，所以$f_x=-2,f_y=-3$。
- 面积$=\iint_{(x,y) \in \text{投影}} \sqrt{1+(-2)^2+(-3)^2} dx dy = \sqrt{1+4+9} \iint_{D} dx dy = \sqrt{14} \cdot (投影D的面积)$。
- 投影D是xy平面(z=0)上的三角形，顶点为(2.5,0), (0,1.667), (0,0)。该直角三角形的面积 = 1/2 * 底 * 高 = 0.5 * 2.5 * 1.667 = 2.08375（近似值）。
 实际上，精确值为2.5 * (5/3)/2 = 2.5*1.667/2 = 2.08375。
但让我们精确计算：底=2.5沿x轴，高=5/3沿y轴，所以面积 = (2.5*5/3)/2 = 25/6 /2 = 25/12 = 2.0833。
- 然后平面部分的面积 = $\sqrt{14} * 25/12$。
- 如果需要数值 ~ $3.742 *2.0833=7.791$。

**参数化方法**：
设参数：让x和y作为u和v：
$x=u, y=v, z=5-2u-3v$。那么$\mathbf{r}_u = (1,0,-2), \mathbf{r}_v=(0,1,-3)$，叉积 = $(1,0,-2)\times(0,1,-3) = |i j k; 1 0 -2; 0 1 -3| = i*(0* -3 - (-2)*1) - j*(1*-3 - (-2)*0) + k*(1*1 - 0*0) = i*(2) - j*(-3) + k*(1) = (2,3,1)$。
 范数 = $\sqrt{2^2+3^2+1^2} = \sqrt{14}$。所以面积 = $\iint |cross| du dv$，u从0到2.5，v从0到连接的线性线？实际上u和v不是独立的：uv平面中的区域就是D（0<=u<=2.5-???等等解线：在x轴u=2.5 v=0；在y轴u=0 v=5/3）。
更好的方法：线方程：在平面交点：当z=0时，5-2u-3v=0 => 3v=5-2u => v = (5-2u)/3。对于0<=u<=2.5，产生0<=v<=5/3线性变化。所以积分：$\int_{u=0}^{2.5}\int_{v=0}^{(5-2u)/3} sqrt(14) dv du = sqrt(14) \int_0^{2.5} (5-2u)/3 du = sqrt(14) [ (5u - u^2)/3]_0^2.5 = sqrt(14)* ( (12.5 - 6.25)/3 ) = sqrt(14)* (6.25/3) = sqrt(14)* 25/12$，如预期的一样。

**答案：面积** = $\displaystyle \sqrt{14} \cdot \frac{25}{12}$ (单位^2)。

**一般用法**：
- 提供公式和概念（就像我们在4.1.3中所做的）。
- 如果必须积分其他标量，例如如果密度为$\phi(x,y,z) = z$这样的平面部分的质量，那么类似地设置但被积函数包括z等。

**总结**:
- Always confirm region D to integrate over (the projection).
- If surfaces not graph type (like sphere part or param), use param method.
- Possibly mention if surface piece is closed or something, not here though.

### 5.4.2 向量场上的曲面积分（通量积分）
**核心概念与公式讲解：****曲面上的向量场积分**(通过曲面的通量): $\displaystyle \iint_S \mathbf{F}\cdot \mathbf{n}\, dS$，其中$\mathbf{n}$是单位法向量（或不一定是单位向量，但这时我们实际上将大小包含在$dS$中）。
另一个公式：$\iint_S \mathbf{F}\cdot d\mathbf{S}$，表示$\mathbf{F}\cdot \mathbf{n} dS$的简洁形式。
  
如果曲面由显式函数$z=f(x,y)$给出，且向上定向：
  单位法向量$\mathbf{n} = \frac{1}{\sqrt{1+f_x^2+f_y^2}}(-f_x, -f_y, 1)$，如果是向上定向（指向正z方向）。
  然后$\mathbf{F}\cdot \mathbf{n} dS = \mathbf{F}\cdot(\pm?) *$复杂表达式？通常我们使用替代方法：
- 通过参数化方法计算通量：
  将参数$(x,y)$映射到曲面：$\mathbf{r}_x \times \mathbf{r}_y$得到法向量（非单位）。如果选定曲面方向，例如向上，$\mathbf{r}_x \times \mathbf{r}_y$相应定向（右手法则）。
  然后$\mathbf{F}\cdot (\mathbf{r}_x \times \mathbf{r}_y) du dv$给出通量（带有正确的方向符号）。
  对于显式表达$z=f(x,y)$：
  $\mathbf{r}(x,y) = (x,y,f(x,y))$，然后$\mathbf{r}_x = (1,0,f_x)，\mathbf{r}_y=(0,1,f_y)$。它们的叉积（取$r_x \times r_y$定向，给出向上法向量）：
  $r_x \times r_y = (1,0,f_x) \times (0,1,f_y) = (0 * f_y - f_x * 1,\; f_x * 0 - 1 * f_y,\;1 * 1 - 0 * 0) = (-f_x, -f_y,1)$。
  然后$\mathbf{F}\cdot (r_x \times r_y) dx dy$产生通量（指向上方）。
  意味着$\iint (P, Q, R)\cdot(-f_x, -f_y,1) dx dy$。
   = $\iint [-P f_x - Q f_y + R] dx dy$。因此公式：$\iint_S \mathbf{F}\cdot n dS = \iint_D (-P f_x - Q f_y + R)\, dx dy$，适用于向上定向。
  
如果曲面由一般参数给出：
  $\mathbf{F}\cdot (r_u \times r_v) du dv$，如果方向由参数向量叉积顺序决定（u->v）。
  
**重要**：通量符号取决于方向（如向外或向内）。
  
**使用散度定理**（5.5.2）可以避免闭合曲面上的复杂积分。

**例题**：求$\mathbf{F}=(z,0,0)$通过立方体$0<=x,y,z<=a$的顶面的通量，向上定向。

**解答**：顶面：z=a，向上法向量$(0,0,1)$。在z=a上的$\mathbf{F}$：$(a,0,0)$。
  $\mathbf{F}\cdot n = (a,0,0)\cdot(0,0,1) = 0$。所以通量 = $\iint_{0<=x<=a,0<=y<=a} 0 dx dy = 0$。
（虽然简单但展示了方法：$F\cdot n$，在投影上积分）。
  
如果想要更复杂的例子：
**更好的例题**：半球面$x^2+y^2+z^2 = R^2$，$z>=0$，求向量场$\mathbf{F}=(x,y,z)$的向外通量。
  
**解答**：在球面上，向外法向量 = 径向向外方向$(x,y,z)/R$。$\mathbf{F}= (x,y,z)$，点乘法向量 = $(x,y,z)\cdot \frac{1}{R}(x,y,z) = \frac{1}{R}(x^2+y^2+z^2) = R$（因为在半径为R的球面上）。
  所以通量 = $\iint_{hemisphere} R dS$。
  半球面积 = $2\pi R^2$。所以通量 = $R * 2\pi R^2 = 2\pi R^3$。
或者用散度定理计算半球加底面圆盘：
 $\nabla\cdot F = 3$（因为$(x,y,z)$的导数之和=3）。半球体积 = $2/3 \pi R^3$（$4/3$的一半）。
 因此整个闭合半球面（包括底部圆盘）的向外通量 = $\int vol 3 dV = 3*(2/3 \pi R^3) = 2\pi R^3$。
 分解：半球面通量加上底部圆面向下法向量的通量 = $2\pi R^3$。
 但底面通量：在z=0平面上向外（相对于体积是向下，指向负z方向）：底面上$\mathbf{F}=(x,y,0)$，法向量 = $(0,0,-1)$，点积 = $(x,y,0)*(0,0,-1)=0$。所以底面通量为0。
 因此半球面的总通量确实为$2\pi R^3$，结果一致。

**一般情况**：
- 确保选择正确的法向量符号：例如"向外"或"上表面"暗示了如何在公式中定向$n$。
- 如果曲面由z=...给出：
  使用公式$(-P f_x - Q f_y + R)$对应向上方向（如需向下，符号翻转）。
- 如果使用参数化：
  找出$r_u \times r_v$，计算点积被积函数。
- 通常考试中：要么需要直接参数化，要么巧妙应用散度定理。

**检查**：
- 对于闭合曲面和良好的向量场，如果可能，优先使用高斯公式（散度定理）。
- 对于开放曲面，通常需要直接积分。

**总结**：这很复杂，可能会作为单独的大题出现。
  
### 5.5.1 Stokes定理–旋度定理
**核心概念与公式讲解:** **Stokes定理**将Green的环流形式推广到3D空间中的曲面：
$$\oint_{C} \mathbf{F}\cdot d\mathbf{r} = \iint_{S} (\nabla \times \mathbf{F})\cdot \mathbf{n}\,dS,$$
其中C是曲面S的闭合边界曲线，方向一致（与所选法向量n符合右手法则）。
  
解释：
- 边界的线积分（环流）= 曲面上法向分量的旋度之和。
- 如果$\nabla \times F =0$，场是无旋的，如果区域简单（是单连通区域的推广），任何环路积分为0。
- 这就像"宏观"环流="微观"旋转的积分。

**应用**：
- 将线积分计算转化为更简单的曲面积分（如果有对称性或被积函数更简单）。
- 证明基本形式：如果闭合环路积分由曲面差异决定，若旋度为0，则路径无关。
  
**例题**（类似前面代码段[2]中给出的复杂环路使用Stokes定理）。
  
**可能的考题**：
"使用Stokes定理计算$\oint_C \mathbf{F}\cdot dr$，给定$\mathbf{F}$和C描述为..."。

可以：
- 确定一个由C围成的方便曲面，
- 简单计算$\nabla\times F$，
- 与n点乘并在该曲面上积分。

**如果被问到**：
- "陈述Stokes定理并解释"
- 或"验证特定向量场和曲面/曲线的Stokes定理"。

**重要**：方向。如果选定法向量，边界方向由右手法则确定。

**技巧**：如果场在任何地方都有定义：
  积分结果与选择哪个曲面无关：如果曲面共享相同边界但内部不同，旋度积分差异产生曲面之间体积的旋度的闭合曲面积分，但由于旋度=$\nabla\times F$，可以应用散度定理查看是否有可能（边界区域？），如果体积中没有奇点，结果相同（这就是为什么在单连通域中积分是良定义的）。所以曲面选择的路径独立性。

**总结**：
- 提供公式并与早期的Green定理连接（Green定理是法向量垂直于平面的平面曲面的特例）。
- 可能提及接下来的内容（Maxwell方程在法拉第定律等中使用Stokes定理）。
  
### 5.5.2 Gauss定理–散度定理
**核心概念与公式讲解:** **Gauss散度定理**将向量场通过闭合曲面的通量与体积内部散度的体积积分联系起来：
$$\oint_{S} \mathbf{F}\cdot \mathbf{n}\,dS = \iiint_{V} \nabla\cdot \mathbf{F}\,dV,$$
其中S是包围体积V的闭合曲面（法向量向外）。
  
解释：
- 体积内部总源强度 = 体积向外的净通量。
- 如果内部没有净源（散度=0），向外的净通量为零（进入的量等于离开的量）。
- 在静电学中：$\nabla\cdot E = \rho/\epsilon_0$，积分得到高斯定律。
- 对于对称通量计算很有用，如半球例子所示：
  有时体积积分更容易计算。

**例题**：
给定边长为L的立方体，求向量场$\mathbf{F}=(xy, yz, zx)$通过所有面的通量。
  通过散度求解：
  $\nabla \cdot F = \partial(xy)/\partial x + \partial(yz)/\partial y + \partial(zx)/\partial z = y + z + x$。
  体积V：[0,L]^3。
  $\iiint_0^L (x+y+z) dV = \int_0^L\int_0^L\int_0^L (x+y+z) dx dy dz$。
  由于对称性：
  = $\int_0^L\int_0^L\int_0^L x dx dy dz + ...$对称项产生3倍相同结果：
  $3 [\int_0^L x dx \int_0^L dy \int_0^L dz] = 3 [ (L^2/2)*L*L] = 3 * (L^4/2) = 1.5 L^4$。
  这就得到了整个闭合曲面的向外通量。如果问题询问"通过所有面的通量"，就完成了。
  （或者也可以逐面积分每个面与法向量的点积）。
  
**检查**：
如果问题特别要求求出通过一部分的通量，可能无法直接应用，除非具有对称性。

**考试用途**：
- 通过计算散度*体积轻松计算闭合曲面通量。
- 可能用于证明恒等式或其他内容，但主要是更容易计算有向通量。

**重要**：条件：F在内部连续可微，且方向向外。
  
**综合来看**：
高斯定理是Green定理通量形式的3D版本（两者之间的联系：在5.3.3中我们提到过）。
Stokes定理是Green定理环流形式的3D版本。

可能的考题：
"使用散度定理计算复杂闭合形状的向外通量"
 或"给定无散度场，这对通过任何闭合曲面的通量意味着什么（应该为0）。"
 或"陈述高斯定理并应用于X场景。"

**总结**：
始终检查方向符号。

### 5.6 Maxwell方程组：Stokes定理和 Gauss定理的应用
**核心概念与公式讲解:** Maxwell方程组统一了电磁场，特别是以下两组：
- 电场的高斯定律：$\nabla\cdot \mathbf{E} = \rho/\epsilon_0$（电荷作为E的源）—应用散度定理到任何闭合曲面，E的通量 = Q_enc/ε0（如我们在片段中推导的）。
- 磁场的高斯定律：$\nabla\cdot \mathbf{B} = 0$—没有磁单极子，闭合曲面的向外通量始终为0。
- 法拉第定律（Maxwell-法拉第）：$\nabla \times \mathbf{E} = -\partial \mathbf{B}/\partial t$—在曲面上应用Stokes定理，$\oint \mathbf{E}\cdot dr = - d/dt \int_S \mathbf{B}\cdot n dS$（变化的磁通量产生电场旋度）。
- 安培-麦克斯韦定律：$\nabla \times \mathbf{B} = \mu_0 \mathbf{J} + \mu_0 \epsilon_0 \partial \mathbf{E}/\partial t$。Stokes：$\oint \mathbf{B}\cdot dr = \mu_0 I_{enc} + \mu_0 \epsilon_0 d/dt \int_S \mathbf{E}\cdot n dS$（包含电位移电流）。

因此Maxwell方程组：
1. $\nabla\cdot E = \rho/\epsilon_0$ – 来自高斯散度定理
2. $\nabla\cdot B = 0$ – 类似地
3. $\nabla\times E = - \partial B/\partial t$ – 通过法拉第感应
4. $\nabla\times B = \mu_0 J + \mu_0\epsilon_0 \partial E/\partial t$ – 扩展的安培定律。

每个方程要么直接应用高斯定理（1,2），要么应用Stokes定理（3,4）。
 考试可能不会重点考察推导，而是概念性问题：
"哪个Maxwell方程对应于散度定理？"（高斯定律）
"哪个对应于Stokes定理？"（旋度方程）。
  
**简短回答**：
- Maxwell第I（高斯E）和第II（高斯B）方程是散度定理应用于E和B场的结果。
- Maxwell第III（法拉第感应定律）和第IV（带Maxwell修正的安培定律）是Stokes定理应用于E和B场的结果。
  
因此，将数学定理与物理背景联系起来：
高斯定理 → $\oint E\cdot n dS = Q/\epsilon_0$，$\oint B\cdot n dS = 0$（无单极子）。
Stokes定理 → $\oint E\cdot dr = -\frac{d\Phi_B}{dt}$（法拉第），$\oint B\cdot dr = \mu_0 I + \mu_0\epsilon_0 \frac{d\Phi_E}{dt}$（安培-麦克斯韦）。
  
**例题**可能是：
"使用散度定理，从高斯定律的积分形式推导其微分形式。"
   证明：对所有体积，$\oint E\cdot dS = Q_enc/\epsilon_0$蕴含$\nabla\cdot E = \rho/\epsilon_0$。
  
**解答**：
使用散度定理：$\iiint_V \nabla\cdot E dV = \oint_{\partial V} E\cdot dS = Q/\epsilon_0$。
因为Q/ε0 = $\iiint_V \rho/\epsilon_0 dV$（根据定义Q = $\iiint \rho dV$）。
所以对任意体积有$\iiint (\nabla\cdot E - \rho/\epsilon_0) dV = 0$，这意味着被积函数在任何地方都为零：$\nabla\cdot E = \rho/\epsilon_0$。

**因此**：得证。

**总结**：
这只是说明了这些定理对物理基本原理有多么重要。除了概念性推理或上述小型证明外，考试中可能不会有复杂计算。

考虑到这个问题可能已被广泛解决，我现在将完成最终结构化输出，确保包含所有部分，并有良好的标题和内容。

## 第二章 多变量函数的变化率
### 2.1 偏导数
- **核心概念与公式讲解：**偏导数衡量多元函数沿某坐标轴方向的瞬时变化率。定义为 $f_x(x_0,y_0)=\lim_{h\to0}\frac{f(x_0+h,y_0)-f(x_0,y_0)}{h}$，$f_y(x_0,y_0)=\lim_{h\to0}\frac{f(x_0,y_0+h)-f(x_0,y_0)}{h}$。几何上，$f_x$ 是在固定 $y$ 的情况下曲面沿 $x$ 方向的斜率，$f_y$ 是固定 $x$ 情况下沿 $y$ 方向的斜率。计算偏导时，把其他自变量当常数，对目标变量求单变量导数即可。
- **典型例题：**求函数 $f(x,y)=x^2y+2x+y^3$ 的偏导数 $f_x$ 和 $f_y$。
- **解题步骤：**  
  1. 计算 $f_x$：将 $y$ 视为常数，对 $x$ 求导，$f_x(x,y)=2xy+2$（亦可用定义验证）。  
  2. 计算 $f_y$：将 $x$ 视为常数，对 $y$ 求导，$f_y(x,y)=x^2+3y^2$。
- **答案：** $f_x(x,y)=2xy+2$，$f_y(x,y)=x^2+3y^2$。例如在点$(1,2)$有 $f_x(1,2)=6$ 表示沿$x$方向变化率为6，$f_y(1,2)=1^2+12=13$ 表示沿$y$方向变化率为13。
- **通用解题步骤总结与考试技巧：**偏导运算中，把未求导的变量当常数是关键技巧。可以先按定义列极限形式，或者直接利用单变量求导法则处理各项（一元求导规则如幂法则等在偏导中同样适用）。注意连续可微函数偏导存在且可交换（$f_{xy}=f_{yx}$）。考试中常见问题：计算给定函数的各一阶偏导，或利用偏导定义验证可微性。

### 2.2 全微分和方向导数
#### 2.2.1 切平面和全微分
- **核心概念与公式讲解：**对于 $z=f(x,y)$ 的光滑曲面，过点 $(x_0,y_0,f(x_0,y_0))$ 的**切平面**方程为 
  $$z - f(x_0,y_0) = f_x(x_0,y_0)\,(x-x_0) + f_y(x_0,y_0)\,(y-y_0)。$$ 
  这是利用偏导数给出的平面近似。**全微分**则是对应线性部分：$dz = f_x(x_0,y_0)\,dx + f_y(x_0,y_0)\,dy$，可用来近似函数值变化。全微分相当于切平面的增量，是多元微分概念的线性主部。
- **典型例题：**设 $z=x^2+2xy$，求该曲面在点$(1,1)$处的切平面方程，并用其近似估计 $f(1.1,\,0.9)$ 的值。
- **解题步骤：**  
  1. 计算偏导：$f_x=2x+2y$，$f_y=2x$。在$(1,1)$得 $f_x(1,1)=4$，$f_y(1,1)=2$。  
  2. 切平面：过点$(1,1, f(1,1)=3)$且法向量$( -f_x,-f_y,1)=( -4,-2,1)$，其方程为 $z-3=4(x-1)+2(y-1)$，即 $z=4x+2y-3$。  
  3. 全微分近似：$dz=4\,dx+2\,dy$。对于 $(x,y)$ 从$(1,1)$变化到$(1.1,0.9)$：$dx=+0.1,\;dy=-0.1$，得 $dz\approx4(0.1)+2(-0.1)=0.2$，所以 $f(1.1,0.9)\approx f(1,1)+dz=3+0.2=3.2$（实际值 $=3.19$，近似精度较好）。
- **答案：** 切平面方程 $z=4x+2y-3$；近似 $f(1.1,0.9)\approx3.20$。
- **通用解题步骤总结与考试技巧：**切平面公式需熟记，并在应用时明确利用已知点和偏导值代入。全微分线性化用于小改变量估计，考试如问“线性近似”就是指用切平面预测新值。要注意全微分是近似等号，当改变量较小时精度好。若需计算实际误差，可比较真实值差异。

#### 2.2.2 方向导数和梯度
- **核心概念与公式讲解：****方向导数** $D_{\mathbf{u}}f(x_0,y_0)$ 表示函数在点 $(x_0,y_0)$ 沿单位向量 $\mathbf{u}=(\cos\theta,\sin\theta)$ 方向的变化率。定义 
  $$D_{\mathbf{u}}f(x_0,y_0)=\lim_{h\to0}\frac{f(x_0+h\cos\theta,\;y_0+h\sin\theta)-f(x_0,y_0)}{h}，$$ 
  若 $f$ 可微则有公式 $D_{\mathbf{u}}f = f_x\cos\theta + f_y\sin\theta = \nabla f \cdot \mathbf{u}$，其中 $\nabla f=(f_x,f_y)$ 称为**梯度**。梯度方向是函数增长最快的方向，其模长即该方向的最大方向导数值。梯度与等高线正交：$\nabla f$ 垂直于过该点的水平曲线（或曲面等值线）。
- **典型例题：**设 $f(x,y)=x^2+2y$，求：(1) 在点 $(1,2)$ 沿方向 $\mathbf{v}=(3,4)$ 的方向导数；(2) 该点处使$f$增加最快的方向和对应增率。
- **解题步骤：**  
  1. 归一化方向：$\mathbf{v}=(3,4)$ 单位向量 $\mathbf{u}=(3/5,\,4/5)$。  
  2. 计算梯度：$f_x=2x,\;f_y=2$，所以 $\nabla f(1,2)=(2,2)$。  
  3. 方向导数：$D_{\mathbf{u}}f(1,2)=\nabla f(1,2)\cdot \mathbf{u}=(2,2)\cdot(3/5,4/5)=(6+8)/5=14/5=2.8$。  
  4. 最大增速方向为梯度方向 $(2,2)$ 的单位向量 $(\frac{\sqrt2}{2},\frac{\sqrt2}{2})$，最大方向导数等于梯度模长 $||\nabla f(1,2)||=\sqrt{2^2+2^2}=2\sqrt2\approx2.828$。
- **答案：** (1) 沿 $(3,4)$ 方向的导数 $=14/5=2.8$；(2) 最速上升方向为与梯度 $(2,2)$ 同向，即 $45^\circ$ 方向，最大上升率 $2\sqrt{2}\approx2.828$。
- **通用解题步骤总结与考试技巧：**计算方向导数务必**单位化**给定方向向量，然后点乘梯度。最大增长方向总是梯度方向、最大值为梯度长度，这是重要结论。若题目要求说明某方向是上升最快或判别陡峭方向，可直接引用梯度性质。梯度也可用于判定等值曲线切线方向（梯度垂直）。考试常见：给出函数和方向，计算方向导数；或给函数求梯度并讨论其意义（如梯度零表示极值候选，见后续内容）。

### 2.3 其他导数
- **核心概念与公式讲解：**本节涵盖**高阶偏导**和**隐函数求导**等。高阶偏导即对一阶偏导再求偏导，如 $f_{xy}=\partial(\partial f/\partial x)/\partial y$，在条件良好时 $f_{xy}=f_{yx}$。**隐函数微分**处理由方程 $F(x,y)=0$ 确定的 $y$ 关于 $x$ 的函数。当 $F$ 光滑且 $F_y\neq0$，可对 $F(x,y(x))\equiv0$ 全导，利用链式法则得 $\frac{dy}{dx}=-\frac{F_x}{F_y}$。类似地，三元关系 $F(x,y,z)=0$ 定义 $z$ 为 $x,y$ 的函数时，$\frac{\partial z}{\partial x}=-\frac{F_x}{F_z}$，$\frac{\partial z}{\partial y}=-\frac{F_y}{F_z}$。这些公式便捷地给出隐函数的导数。**其它导数**包括特殊坐标系下导数（如极坐标中的径向/角向导数）等。
- **典型例题：**曲线由隐式方程 $x^2+xy+y^2=7$ 界定，求 $\displaystyle\frac{dy}{dx}$ 并计算该曲线在点 $(2,1)$ 处的切线斜率。
- **解题步骤：**  
  1. 对 $x^2+xy+y^2=7$ 两边求 $x$ 导数（隐式微分）：$2x + (x\frac{dy}{dx} + y) + 2y\frac{dy}{dx} = 0$。整理得 $(x+2y)\frac{dy}{dx} = -(2x+y)$，因此 $\frac{dy}{dx}=-\frac{2x+y}{\,x+2y\,}$。  
  2. 在$(2,1)$代入：分子$2*2+1=5$，分母$2+2*1=4$，斜率 $=-5/4$。  
- **答案：** $\displaystyle\frac{dy}{dx}=-\frac{2x+y}{\,x+2y\,}$，特别地在$(2,1)$处切线斜率 $=-\frac{5}{4}$。  
- **通用解题步骤总结与考试技巧：**求隐函数导数时，对方程直接微分是快捷方法：对每项微分并附加 $dy/dx$ 项，对应$x$导的积分常数。也可套公式 $\frac{dy}{dx}=-F_x/F_y$ 直接写出结果，但在考试解答中写出微分过程更稳妥。注意在计算斜率时检查分母$F_y$不为零。高阶偏导方面，按序逐次求导并利用Clairaut定理判断混合偏导相等的条件，有时考验理解平凡，但要避免计算过程中疏漏变量当常数的情形。对于极坐标等特殊情况，要根据定义转换，如$r$方向导数或$\theta$方向导数可通过链式法则获得。

## 第三章 多变量微分的应用
### 3.1.1 无约束优化和二阶偏导判定极值类型
- **核心概念与公式讲解：**无约束优化即在整个$\mathbb{R}^n$范围内寻找函数的极值点。**临界点**由一阶偏导为零确定：$\nabla f(x_0,\dots)=\mathbf{0}$。对于$f(x,y)$，解 $f_x=0,\,f_y=0$ 找到候选点，然后用**二阶偏导判别法**（Hessian矩阵判定法）判断类型：设 
  $$H=\begin{pmatrix}f_{xx} & f_{xy}\\f_{yx} & f_{yy}\end{pmatrix},\quad D=\det H=f_{xx}f_{yy}-(f_{xy})^2.$$ 
  则：
  - 若 $D>0$ 且 $f_{xx}>0$，临界点为**局部极小值**；
  - 若 $D>0$ 且 $f_{xx}<0$，为**局部极大值**；
  - 若 $D<0$，为**鞍点**（极值不存在，函数曲面此处“鞍鞒”形状）；
  - 若 $D=0$，判别失效，需用其他方法分析（如高阶导数等）。  
  Hessian正定($D>0,f_{xx}>0$)对应碗口向上，负定对应碗口向下，不定($D<0$)表示沿不同方向凹凸性相反。
- **典型例题：**求函数 $f(x,y)=x^3-3x+y^2$ 的所有临界点，并判定其性质。
- **解题步骤：**  
  1. 求梯度：$f_x=3x^2-3,\;f_y=2y$。设 $f_x=f_y=0$，得 $3x^2-3=0\implies x=\pm1$，$2y=0\implies y=0$。故临界点：$(1,0)$ 和 $(-1,0)$。  
  2. 二阶偏导：$f_{xx}=6x,\;f_{yy}=2,\;f_{xy}=0$。判定式 $D=6x\cdot2-0=12x$。在$(1,0)$：$D=12>0$ 且 $f_{xx}=6>0$，故为局部极小值；在$(-1,0)$：$D=-12<0$，为鞍点。  
  3. 分析函数值：$f(1,0)=-2$ 是局部最小值，$f(-1,0)=2$ 为鞍点（在$x$方向开口向下，在$y$方向开口向上）。
- **答案：** $f$ 在 $(1,0)$ 取得局部极小值（Hessian 正定），在 $(-1,0)$ 为鞍点。无其他临界点。
- **通用解题步骤总结与考试技巧：**无约束优化先解$\nabla f=0$找所有候选点，然后用 Hessian 判断性质（二维情况可直接用上述判据，三维以上需判定 Hessian 正定/负定性，一般用主子式法则）。要特别关注边界或无界情况：若函数在无穷远处有特定趋向，可能存在全局极值。考试中若$D=0$情况少见，如出现应说明判别未定需更高阶检查。

### 3.1.2 梯度下降的工作原理
- **核心概念与公式讲解：**梯度下降法是一种迭代数值算法，寻找函数局部最小值。其核心思想：**沿负梯度方向**（函数下降最快方向）逐步更新。迭代公式 
  $$\mathbf{x}_{n+1} = \mathbf{x}_n - \alpha \,\nabla f(\mathbf{x}_n)，$$ 
  其中 $\alpha$ 是学习率（步长）。每一步都使$f$值减小，$\alpha$ 控制移动幅度：过大可能越过最优点，过小则收敛缓慢。对于凸函数，梯度下降可收敛到全局最小。算法直观：在函数图谱上像“顺坡而下”。
- **典型例题：**对函数 $g(x)=x^2$，从初始点 $x_0=4$ 以梯度下降法（学习率 $\alpha=0.1$）迭代两步，观察 $g(x)$ 的变化。
- **解题步骤：**  
  1. $g'(x)=2x$。初始 $x_0=4$，梯度 $g'(4)=8$。  
  2. 一步迭代：$x_1 = 4 - 0.1\times 8 = 4 - 0.8 = 3.2$，$g(x_1)=(3.2)^2=10.24$（比 $16$ 降低）。  
  3. 二步迭代：$g'(3.2)=6.4$，$x_2 = 3.2 - 0.1\times6.4 = 2.56$，$g(x_2)=(2.56)^2=6.5536$（进一步下降）。  
- **答案：** $x_1=3.2,\;g(x_1)=10.24$；$x_2=2.56,\;g(x_2)=6.5536$。函数值持续减小，验证了梯度下降沿负梯度方向移动可降低函数值。
- **通用解题步骤总结与考试技巧：**应用梯度下降时要正确计算梯度，并选适当步长。$\alpha$ 若题中未给可讨论其影响：较大步长加快初期收敛但可能震荡甚至发散，较小步长稳定但收敛慢。凸函数情形下说明最终可达全局最小。考试可能让手算几次迭代或判断收敛趋势，注意每步计算新点、梯度、函数值，并体现函数值在降低。如果算法用于多维，要同时更新每个坐标。梯度下降强调负梯度方向，这一点应在解题步骤或原理说明中明确提及。

### 3.1.3 牛顿法 (Optional)
- **核心概念与公式讲解：**牛顿法原用于方程根迭代，也可用于无约束优化，通过二阶信息加速收敛。对$f(x)$，牛顿迭代 $x_{n+1}=x_n-\frac{f'(x_n)}{f''(x_n)}$；对多元$f(\mathbf{x})$，迭代 $ \mathbf{x}_{n+1}=\mathbf{x}_n - H_f(\mathbf{x}_n)^{-1}\nabla f(\mathbf{x}_n)$，其中 $H_f$ 为 Hessian矩阵。牛顿法一般收敛速度快（近极值点为二次收敛），但要求$f''(x)$ 或 Hessian 可逆且初始点足够接近极值。它一步到位找到二次函数的极值，但计算二阶导和矩阵求逆代价较高。
- **典型例题：**用牛顿法求函数 $h(x)=x^2-5x+6$ 极小值的近似。取初值 $x_0=0$，执行一次迭代。
- **解题步骤：**  
  $h'(x)=2x-5,\;h''(x)=2$。牛顿迭代：$x_1=x_0-\frac{h'(x_0)}{h''(x_0)}=0-\frac{-5}{2}=2.5$。此即 $h(x)$ 的临界点。$h''(x)=2>0$，故 $x=2.5$ 为极小，且一步找到真实解。  
- **答案：** 一次迭代得到 $x_1=2.5$。由于 $h(x)$ 为二次函数，牛顿法一步即达其全局最小点。
- **通用解题步骤总结与考试技巧：**牛顿法更新公式需牢记。若为单变量，写作 $x_{n+1}=x_n-\frac{f'(x_n)}{f''(x_n)}$；多变量则是 $x_{n+1}=x_n-H^{-1}\nabla f$。牛顿法优点是收敛快，但依赖 Hessian 信息且可能在 Hessian 不定或奇异时失效（如鞍点出发会偏离）。考试涉及牛顿法时，常让比较梯度下降与牛顿法的效率或说明牛顿法一步求解二次模型极值的特性。另外，需指出牛顿法找到的是**驻点**，若 Hessian 不正定可能为极大或鞍点而非极小，要结合二阶判断确认。

### 3.2.1 有约束优化 I
- **核心概念与公式讲解：**有约束优化是在满足约束条件（等式或不等式）下寻找极值。思路包括：①**消元法**：若约束等式能解出一个变量表示成另一个的函数，可代入原函数转化为无约束问题求解；②**边界法**：将约束区域的内部（无约束情况）和边界分别考虑，找出内部临界点和边界上的极值，再比较；③为复杂情况准备的**拉格朗日乘子法**将在3.2.2详细介绍。此节偏重基本思路：无约束部分梯度为零，约束边界则可用参数或特殊技巧求解。对于封闭有界区域，极值一定在内部或边界处出现。
- **典型例题：**在约束直线 $x+y=10$ 下，求函数 $f(x,y)=x^2+y^2$ 的最小值。
- **解题步骤：**  
  1. 消元：由 $x+y=10 \implies y=10-x$，代入 $f$ 得单变量函数 $g(x)=x^2+(10-x)^2=2x^2-20x+100$。  
  2. 无约束极值：$g'(x)=4x-20=0 \implies x=5$。$g''(x)=4>0$，得极小值。  
  3. 返回求 $y$：$y=10-5=5$。计算 $f(5,5)=5^2+5^2=50$。  
  4. 验证：$f(x,y)=x^2+y^2$在直线$x+y=10$上表示到原点距离平方，显然在$(5,5)$处最近（对称均分）。  
- **答案：** 在约束 $x+y=10$ 下，$f(x,y)$ 最小值为 $50$，于 $(5,5)$ 取得。
- **通用解题步骤总结与考试技巧：**处理等式约束时，能通过代入减少变量就尽量代入，然后对结果一元函数求极值（注意结果需映射回原变量）。对于封闭区域的优化，要兼顾内点（用$\nabla f=0$）和边界情况。边界上的优化可引入参数或者再次用拉格朗日法。比较各候选点函数值确定全局极值。证明方面，可引用极值必要条件和 Weierstrass 有界闭集合达到极值定理。解答时，应清晰列出内点和边界两部分分析步骤，不可忽略边界。若区域开放或无界，需讨论函数远处行为确保无更优解。

### 3.2.2 有约束优化 II：拉格朗日乘子法
- **核心概念与公式讲解：**拉格朗日乘子法是解决等式约束极值的有力工具。基本原理：在最优点，目标函数梯度 $\nabla f$ 必须与约束函数梯度 $\nabla g$ 平行（否则可沿约束曲线方向进一步优化）。引入乘子 $\lambda$，条件写作 $\nabla f = \lambda \nabla g$。具体步骤：
  1. 构造拉格朗日函数 $\mathcal{L}(x,y,\lambda)=f(x,y)-\lambda\,g(x,y)$（约束 $g(x,y)=0$）。  
  2. 求偏导令其为零：$\frac{\partial\mathcal{L}}{\partial x}=0,\;\frac{\partial\mathcal{L}}{\partial y}=0,\;\frac{\partial\mathcal{L}}{\partial \lambda}=0$，形成方程组：
     $$f_x - \lambda g_x = 0,\qquad f_y - \lambda g_y = 0,\qquad g(x,y)=0.$$ 
  3. 解方程组得到 $(x,y,\lambda)$，其中 $(x,y)$ 为极值候选点。  
  4. 判断极值类型及取值：根据需要比较函数值或用更高阶条件。  
  拉格朗日法可推广多约束、多变量情况。
- **典型例题：**利用拉格朗日乘子法，求在约束 $x^2+y^2=25$ 下函数 $f(x,y)=3x+4y$ 的最大值和最小值。
- **解题步骤：**  
  1. 拉格朗日函数 $\mathcal{L}(x,y,\lambda)=3x+4y - \lambda(x^2+y^2-25)$。  
  2. 一阶条件：$\frac{\partial\mathcal{L}}{\partial x}=3-2\lambda x=0$，$\frac{\partial\mathcal{L}}{\partial y}=4-2\lambda y=0$，$\frac{\partial\mathcal{L}}{\partial \lambda}=x^2+y^2-25=0$。  
  3. 解出：由前三式得 $2\lambda x=3,\;2\lambda y=4$ $\implies$ $\frac{x}{y}=\frac{3}{4}$ 且 $x^2+y^2=25$。解出 $x=3$, $y=4$ 或 $x=-3$, $y=-4$。  
  4. 计算 $f$ 值：$f(3,4)=3*3+4*4=25$，$f(-3,-4)=-25$。  
  5. 结论：最大值 $25$ 在 $(3,4)$ 取得，最小值 $-25$ 在 $(-3,-4)$ 取得。  
- **答案：** 在约束 $x^2+y^2=25$ 上，$f(x,y)$ 最大值为 $25$（于 $(3,4)$），最小值为 $-25$（于 $(-3,-4)$）。 
- **通用解题步骤总结与考试技巧：**正确列方程组是拉氏乘子法的关键，注意$\mathcal{L}$对每个变量和每个乘子求偏导都要列出。求解过程中常将 $\lambda$ 消去以得到原变量关系。解出多个驻点时别忘逐一计算 $f$ 值再比较。若无解表明无极值或约束条件导致无可行点。对多个约束情形需引入多个乘子。物理意义上，拉格朗日乘子常等价于约束力或影子价格。考试中可能让推导乘子法条件或在计算题中要求“建立拉格朗日函数求解”。答案应包括得到的驻点和极值大小，并阐明哪点对应最大/小。

### 3.2.3 对偶问题 (Optional)
- **核心概念与公式讲解：**对偶问题将原始优化（原问题）的信息转化为另一视角的优化（对偶问题）。方法：构造拉格朗日函数 $L(x,\lambda,\mu)=f(x)+\sum_i \lambda_i g_i(x) + \sum_j \mu_j h_j(x)$（$\lambda_i$ 对等式约束$g_i(x)=0$，$\mu_j\ge0$ 对不等式$h_j(x)\le0$）。定义对偶函数 $q(\lambda,\mu)=\inf_x L(x,\lambda,\mu)$，再解最大化 $q(\lambda,\mu)$ 得对偶问题。**弱对偶**：任意对偶可行 $(\lambda,\mu)$，都有 $q(\lambda,\mu)\le f(x^*)$（最优值），意味着对偶值是原最优值的下界。**强对偶**：在凸等条件下，最佳下界等于原最优解，且存在最优乘子（KKT条件）。对偶问题通常比原问题容易求解，特别在凸优化中，原问题非凸但对偶总是凸的。
- **典型例题：**设原问题：$\min_{x} x^2$ s.t. $x\ge3$。写出其对偶问题并求解。
- **解题步骤：**  
  1. 原问题约束 $h(x)=3-x\le0$，引入 $\mu\ge0$。$L(x,\mu)=x^2+\mu(3-x)$。  
  2. $q(\mu)=\inf_x L = \inf_x (x^2-\mu x +3\mu)$。对$x$求导得 $2x-\mu=0 \implies x=\mu/2$。这是极小值点，对偶函数值 $q(\mu)=(\mu/2)^2 - \mu(\mu/2) + 3\mu = -\frac{\mu^2}{4}+3\mu$。$\mu$ 定义域$\mu\ge0$。  
  3. 对偶问题 $\max_{\mu\ge0}(-\frac{\mu^2}{4}+3\mu)$。抛物线顶点 $\mu=6$，最大值 $-\frac{36}{4}+18=9$。  
  4. 对偶解 $\mu^*=6$，对偶最优值9。对比原问题：显然$x=3$为最优，$f(3)=9$。对偶结果一致，验证强对偶成立。  
- **答案：** 对偶问题 $\max_{\mu\ge0}(-\frac{1}{4}\mu^2+3\mu)$，解得 $\mu^*=6$，对偶最优值9，对应原问题最小值9 在$x=3$取得。
- **通用解题步骤总结与考试技巧：**求对偶问题时，先正确写出拉格朗日函数，尤其注意不等式约束要乘非负乘子。然后对原变量求下确界（通常通过对$x$偏导=0找到极值）。将得到的对偶函数$q(\lambda,\mu)$（只含乘子）最大化即为对偶问题。可利用弱对偶性判定原问题可行性或界定最优值范围。强对偶则提供原最优值精确等于对偶值，此时KKT条件给出乘子与原解关系。考试中一般不深入要求复杂推导，可能只考概念：例如指出对偶问题的意义、或者在简单例子上应用。解题时条理要清晰：写$L$、求$q$、列对偶。善于利用对称性、二次形式等解$\sup$或$\inf$。需要强调，对偶问题无论原问题凸否都是凸的，这性质可在论述题中提到。

### 3.2.4 SVM 支持向量机和案例 (Optional)
- **核心概念与公式讲解：**支持向量机 (SVM) 是机器学习二分类模型，可转化为凸二次规划。它通过求解**最大间隔分离超平面**实现分类。基本形式：训练数据$(\mathbf{x}_i,y_i)$，$y_i=\pm1$线性可分情况，求超平面 $w\cdot x+b=0$ 最大化两类到边界的间隔，可建模为：
  $$\min_{w,b} \frac{1}{2}\|w\|^2,\quad s.t.\; y_i(w\cdot x_i+b)\ge1,\;\forall i.$$ 
  这是带约束的凸优化。用拉格朗日乘子$\alpha_i\ge0$建对偶：$\mathcal{L}(w,b,\alpha)=\frac{1}{2}\|w\|^2-\sum_i \alpha_i[y_i(w\cdot x_i+b)-1]$，推导得对偶问题：
  $$\max_{\alpha\ge0} \sum_i \alpha_i - \frac{1}{2}\sum_{i,j}\alpha_i\alpha_j y_i y_j (x_i\cdot x_j),\quad s.t.\;\sum_i \alpha_i y_i = 0.$$ 
  由KKT条件知，只有一部分点对应$\alpha_i>0$，这些点在间隔边界上，称为**支持向量**。SVM 的决策函数由支持向量决定：$\mathrm{sgn}(w\cdot x+b)$，其中 $w=\sum_i \alpha_i y_i x_i$。引入核函数可处理非线性分类（超出本讨论范围）。SVM 利用拉格朗日乘子法和对偶凸优化求解，体现了前述优化理论在实际中的应用。
- **典型例题：**阐述线性可分情况下SVM原始优化问题的目标和约束条件，并解释“支持向量”的含义。
- **解题步骤：**  
  1. SVM原始问题：$\displaystyle \min_{w,b} \frac{1}{2}\|w\|^2$，约束 $y_i(w\cdot x_i+b)\ge1,\;\forall i$。目标是找到使所有样本分类正确且有最大分类间隔的超平面。  
  2. 支持向量：满足约束等号 $y_i(w\cdot x_i+b)=1$ 的样本，即恰好位于间隔边界的点。这些点对超平面的位置有决定作用，其拉格朗日乘子$\alpha_i>0$，而其他样本$\alpha_i=0$（不在边界不影响解）。直观上，支持向量是最“难分”的那些样本，它们“支撑”着最优分界面的位置。  
- **答案：** **SVM 原始问题：**$\min \frac{1}{2}\|w\|^2$，约束 $y_i(w\cdot x_i+b)\ge1$（确保所有样本被超平面正确分类且距离超平面至少为1）。**支持向量：**在最优解下，位于分类边界上的样本点（满足 $y_i(w\cdot x_i+b)=1$）。这些点的拉格朗日乘子 $\alpha_i>0$，它们对确定超平面起关键作用，而非支持向量的 $\alpha_i=0$ 对解无影响。因此，支持向量是决定分类面位置和间隔的“关键少数”样本。
- **通用解题步骤总结与考试技巧：**回答SVM相关问题要抓住优化形式和几何意义两方面。原始问题强调最大化几何间隔（通过最小化$\|w\|$来实现），约束确保分类正确且间隔 $\ge1$。对偶问题虽然复杂，但概念上说明利用拉格朗日乘子将高维问题转为求解一组乘子（对应支持向量）。支持向量概念需明确：只有那些紧贴间隔边界的点才是支持向量，其余样本对最终分类面没有贡献。在论述题中，可提SVM有效因为对偶解稀疏，仅需考虑支持向量，计算高效且易于推广用核方法。由于SVM属选学内容，考试可能考简答：例如要求写出基本优化模型或解释支持向量的作用，不会要求复杂推导。回答时应紧扣“最大间隔”“拉格朗日乘子稀疏解”“超平面由支持向量决定”等关键词。

## 第四章 多变量函数 $\mathbf{R}^n \to \mathbf{R}$ 积分
### 4.1.1 笛卡尔坐标系下的二重积分
- **核心概念与公式讲解：**二重积分$\iint_D f(x,y)\,dA$定义为在区域 $D$ 内对函数值的面积累加。对于连续$f$，可用累次积分（Fubini定理）计算，将积分化为两步单积分。若区域 $D$ 可表示为 $a\le x\le b,\;g_1(x)\le y\le g_2(x)$，则 
  $$\iint_D f(x,y)\,dA = \int_{x=a}^{b}\Big[\int_{y=g_1(x)}^{g_2(x)} f(x,y)\,dy\Big]dx,$$ 
  或调换次序（需相应调整区域描述）。Fubini定理保证在$f$连续或绝对可积情况下两种次序结果相同。物理上二重积分可代表平面薄片的质量（密度为$f$）、区域面积（$f\equiv1$）等。
- **典型例题：**设区域 $D=\{(x,y)\mid 0\le x\le2,\;0\le y\le x\}$，计算 $\iint_D x\,y^2\,dA$。
- **解题步骤：**  
  1. 区域描述：$0\le x\le 2$，对每个$x$，$y$从0到$x$（位于直线$y=x$下方的三角形）。选 $x$ 外积分，$y$ 内积分。  
  2. 写累次积分：$\int_{x=0}^{2}\int_{y=0}^{x} x y^2\,dy\,dx$。  
  3. 计算内层 $\int_{0}^{x} x y^2\,dy = x\left[\frac{y^3}{3}\right]_0^x = \frac{x^4}{3}$。  
  4. 计算外层 $\int_{0}^{2} \frac{x^4}{3}\,dx = \frac{1}{3}\left[\frac{x^5}{5}\right]_0^2 = \frac{1}{3}\cdot\frac{32}{5} = \frac{32}{15}$。  
- **答案：** $\displaystyle \iint_D x\,y^2\,dA = \frac{32}{15}$。
- **通用解题步骤总结与考试技巧：**计算二重积分时，首先明确区域$D$边界方程，选择便利的积分次序。对于“简单”区域（纵向或横向简单），设定一个变量的范围，再给另一个变量的上下界随之变化。必要时可拆分区域成几块分别积分。积分计算过程与单变量积分类似，注意内层积分结果往往是外层积分的函数。确保积分限对应正确区域：在本例中$y$从0到$x$，若调序则$x$从$y$到2等。考试中，绘制草图辅助理解区域至关重要，可避免上下限写反或遗漏。计算完成后，可用估值（如粗略比较区域面积乘平均函数值）验证结果数量级的合理性。

### 4.1.2 极坐标系下的二重积分
- **核心概念与公式讲解：**极坐标 $(r,\theta)$ 能便利地处理圆形或扇形区域。变换关系：$x=r\cos\theta,\;y=r\sin\theta$，面积元 $dA$ 变为 **Jacobian** $r\,dr\,d\theta$。二重积分在极坐标表示：
  $$\iint_D f(x,y)\,dA = \int_{\theta=\theta_1}^{\theta_2}\int_{r=r_{\min}(\theta)}^{r_{\max}(\theta)} f(r\cos\theta,r\sin\theta)\,r\,dr\,d\theta.$$ 
  极坐标适用于区域 $D$ 可由 $r$ 范围和 $\theta$ 范围描述的情形（如圆盘、环形、扇形），以及 integrand 含 $x^2+y^2$ 类径向对称情况，可显著简化计算。
- **典型例题：**利用极坐标计算圆盘区域 $D:\,x^2+y^2\le4$ 上的积分 $\iint_D (x^2+y^2)\,dA$。
- **解题步骤：**  
  1. 区域 $D$：半径 $r\le2$，角度 $\theta$ 从 $0$ 到 $2\pi$，覆盖整个圆盘。  
  2. 积分转化：$x^2+y^2 = r^2$，$dA=r\,dr\,d\theta$。  
  3. 二重积分：$\int_{\theta=0}^{2\pi}\int_{r=0}^{2} r^2 \cdot r\,dr\,d\theta = \int_{0}^{2\pi}\int_{0}^{2} r^3\,dr\,d\theta$。  
  4. 计算径向：$\int_{0}^{2} r^3\,dr = \frac{2^4}{4} =4$。角向：$\int_{0}^{2\pi} d\theta = 2\pi$。  
  5. 结果：$4 \times 2\pi = 8\pi$。  
- **答案：** $\displaystyle \iint_{x^2+y^2\le4}(x^2+y^2)\,dA = 8\pi$。 
- **通用解题步骤总结与考试技巧：**选择极坐标计算时，需正确描述 $\theta$ 和 $r$ 的取值范围。本例为全圆，$\theta\in[0,2\pi],\;r\in[0,2]$。写出积分式时别忘乘Jacobian $r$。计算往往分离成$r$和$\theta$两个独立积分，简化难度。处理非全圆扇形区域时，$\theta$上下限取对应角度，$r$限为径向内外边界函数。与直角坐标结果对比以验证正确性：如本例用直角坐标计算非常复杂，而极坐标轻松得到 $8\pi$。考试中识别何时用极坐标是关键：凡区域或 integrand 具圆对称性，可考虑极坐标。作答需明确列出换元关系和新的积分限，计算步骤清晰，并指明结果单位（如体积或面积）以供检验合理性。

### 4.1.3 曲面面积和坐标变换下的积分
- **核心概念与公式讲解：**(1) **曲面面积**：给定图形 $z=f(x,y)$ 在区域 $D$ 上的曲面$S$，面积公式 
  $$\text{Area}(S) = \iint_D \sqrt{1+f_x^2(x,y)+f_y^2(x,y)}\,dx\,dy.$$ 
  推导自 $dS = \sqrt{1+(z_x)^2+(z_y)^2} dA$。若用参数 $\mathbf{r}(u,v)=(x(u,v),y(u,v),z(u,v))$ 描述曲面，则 $dS=\|\mathbf{r}_u \times \mathbf{r}_v\|du\,dv$ 是一般形式。计算时选择方便参数化或利用对称简化。  
  (2) **坐标变换一般Jacobian**：在平面中，若 $(x,y)=T(u,v)$ 可逆光滑变换，面积元变换满足 
  $$dx\,dy = \left|\frac{\partial(x,y)}{\partial(u,v)}\right|du\,dv.$$ 
  在空间中，体积元变换 $dV = \left|\frac{\partial(x,y,z)}{\partial(u,v,w)}\right|du\,dv\,dw$。这Jacobian行列式反映映射局部膨胀率。实际计算可用已知特殊坐标（极、柱、球）的Jacobian：如极坐标$r$，柱坐标$r$，球坐标$\rho^2\sin\phi$等。复杂变换时，可分步换元降低难度或根据公式直接求行列式。解决平面或空间积分问题时，根据区域形状选择合适变换（如倾斜坐标、椭圆坐标）能极大简化积分。
- **典型例题：**求抛物面 $z = x^2+y^2$ 在区域 $x^2+y^2\le1$ 上的曲面面积。
- **解题步骤：**  
  1. 该曲面投影到$x$-$y$平面为单位圆盘 $D: r\le1$。$f_x=2x,\;f_y=2y$。  
  2. 面积公式：$\iint_D \sqrt{1+4x^2+4y^2}\,dx\,dy$。转换极坐标：$\sqrt{1+4r^2}$，$dA=r\,dr\,d\theta$，$\theta\in[0,2\pi],r\in[0,1]$。  
  3. 积分：$\int_{0}^{2\pi}\int_{0}^{1} \sqrt{1+4r^2}\, r\,dr\,d\theta$。先对$r$积分，用换元 $u=1+4r^2,\,du=8r\,dr$，得  
     $\int_{0}^{1} r\sqrt{1+4r^2}\,dr = \frac{1}{8}\int_{u=1}^{5} \sqrt{u}\,du = \frac{1}{8}\cdot\frac{2}{3}(u^{3/2})\Big|_1^5 = \frac{1}{12}(5^{3/2}-1)$。  
  4. 对$\theta$积分乘$2\pi$：面积 $=2\pi \times \frac{1}{12}(5\sqrt{5}-1) = \frac{\pi}{6}(5\sqrt{5}-1)$。  
- **答案：** 曲面 $z=x^2+y^2$ 在 $x^2+y^2\le1$ 上的面积 $= \displaystyle\frac{\pi}{6}(5\sqrt{5}-1)$。  
- **通用解题步骤总结与考试技巧：**计算曲面面积时，决定参数化最为重要。本例利用$z=f(x,y)$形式直接套用公式结合极坐标，过程顺畅。若曲面已参数给出，按$\|\mathbf{r}_u\times\mathbf{r}_v\|$实施。答题时应明确选择的参数或方法，列出中间表达式。对于一般坐标变换Jacobians，考试多考查理解：如推导极坐标Jacobian $r$，或应用改变积分次序和变量。解题注意写出变换方程及Jacobian绝对值，防止漏项。确保区域$D_{uv}$的描述正确。若遇复杂变换难以一步完成，可尝试拆分（先转换$x,y$关系再$z$等）。熟记特殊坐标Jacobian可在选择题快速辨识正误。

## 第五章 向量场积分
### 5.1 向量场
- **核心概念与公式讲解：**向量场是定义在空间中每点一个向量的函数。平面向量场一般记作 $\mathbf{F}(x,y)=P(x,y)\,\mathbf{i}+Q(x,y)\,\mathbf{j}$，空间向量场为 $\mathbf{F}(x,y,z)=P\,\mathbf{i}+Q\,\mathbf{j}+R\,\mathbf{k}$。向量场可视为将区域内每点赋予一个方向和大小，如重力场、速度场等。**示例：**$\mathbf{F}(x,y)=(-y,x)$ 给出一个围绕原点旋转的场；$\mathbf{F}(x,y)=(x,y)$ 则是从原点径向发散的场。特殊的，若存在标量势函数 $\phi(x,y,z)$ 使 $\mathbf{F}=\nabla \phi$，称$\mathbf{F}$为**梯度场**或**保守场**，这种场的环路积分为零。研究向量场特性时常关注其散度（源汇程度）和旋度（旋转程度），将在5.3节详细讨论。
- **典型例题：**设平面向量场 $\mathbf{F}(x,y)=\langle -y,\;x \rangle$。求 $\mathbf{F}$ 在点 $(1,2)$ 的向量值，并描述该向量场的特征。
- **解题步骤：**  
  1. 代入 $(1,2)$，$\mathbf{F}(1,2) = \langle -2,\;1 \rangle$。  
  2. $\mathbf{F}(x,y)=(-y,x)$ 表示每点的向量与该点径向向量$(x,y)$正交且大小相等（因$(-y,x)$ 与 $(x,y)$ 点积 $-xy+xy=0$，长度 $=\sqrt{x^2+y^2}$）。方向由$(x,y)$ 逆时针转90°得到，可视为绕原点顺时针旋转的速度场。即在原点附近以圆周方向流动，距离原点越远向量越长。  
- **答案：** $\mathbf{F}(1,2)=\langle -2,1\rangle$。该场在$(1,2)$产生向量$(-2,1)$。整体来看$\mathbf{F}(x,y)=(-y,x)$是一个**旋转场**：每点向量方向沿圆周环绕原点，垂直指向径向，向量大小随离原点距离线性增加。
- **通用解题步骤总结与考试技巧：**向量场代入计算比较直接，只需将坐标代入$P,Q,R$得到分量值。描述向量场时，应结合其解析形式分析空间变化，如依赖$x,y$的关系。对于$\mathbf{F}=(-y,x)$类场，可通过计算$\mathbf{F}$与径向向量的点积和叉乘来说明垂直关系和旋转方向。对于保守场，通常判断$\mathbf{F}$是否可表为某$\nabla \phi$。考试中常让判断场是否保守（见5.2.2），或计算场在一点的值再解读物理意义（如速度场指示流速方向）。答题时语言要准确：“在每点赋予向量”“沿某方向增加/减少”等要表述清晰。若要绘制示意，应画出若干代表点的向量，以辅助说明场的特性。

### 5.2.1 向量场中的线积分定义和案例
- **核心概念与公式讲解：**沿一条光滑曲线 $C: \mathbf{r}(t)=(x(t),y(t)),\,a\le t\le b$ 对向量场的**线积分**（第二类）定义为 
  $$\int_C \mathbf{F}\cdot d\mathbf{r} = \int_{t=a}^{b} \mathbf{F}(x(t),y(t))\cdot \mathbf{r}'(t)\,dt,$$ 
  通常写作 $\int_C P\,dx+Q\,dy$。它表示沿曲线移动，向量场在切向方向上的分量累积，相当于力场沿路径所做功。若$C$由分段光滑曲线构成，需分段参数化分别计算后求和。**注意：**$C$ 的方向会影响积分值，反向积分取相反值。**线积分（第一类）**形式为 $\int_C f\,ds$ 则用于累积标量场沿曲线的总量，如质量或长度，在此不详细展开。
- **典型例题：**设 $\mathbf{F}(x,y)=\langle x,\,2y \rangle$，$C$ 为折线：从 $(0,0)$ 沿 $x$ 轴到 $(2,0)$，再沿垂直方向到 $(2,1)$。计算 $\int_C \mathbf{F}\cdot d\mathbf{r}$。
- **解题步骤：**  
  1. 分段参数化：$C_1$: $(0,0)\to(2,0)$，取 $x=t,\;y=0,\;t\in[0,2]$。$C_2$: $(2,0)\to(2,1)$，取 $x=2,\;y=t,\;t\in[0,1]$。  
  2. 计算 $C_1$ 部分：$dx=dt,\;dy=0$，$\mathbf{F}(x,y)=(t,0)$。$\int_{C_1} \mathbf{F}\cdot d\mathbf{r}=\int_0^2 [(t)(1)+(0)(0)]dt = \int_0^2 t\,dt=2$。  
  3. 计算 $C_2$ 部分：$dx=0,\;dy=dt$，$\mathbf{F}(x,y)=(2,2t)$。$\int_{C_2} \mathbf{F}\cdot d\mathbf{r}=\int_0^1 [(2)(0)+(2t)(1)]dt = \int_0^1 2t\,dt=1$。  
  4. 总积分：$2+1=3$。  
- **答案：** $\displaystyle\int_C \mathbf{F}\cdot d\mathbf{r} = 3$。
- **通用解题步骤总结与考试技巧：**线积分计算关键在**参数化曲线**和**正确代入**。通常选简单参数如直线选线性参数、圆周选三角函数参数等。确保按统一方向遍历曲线。写出 $dx,dy$ 表达式，代入 $P\,dx+Q\,dy$ 积分。对折线多段情况，分别计算后相加。要特别留心路径方向：如果题给相反方向，应取负或者重新参数起点终点。物理解释：该积分为力在路径上做的功，正负表示助力或阻力。考试常考：计算指定路径的线积分，或验证保守场路径无关等。对封闭曲线（起点终点相同），如场保守则积分为0。解答时要清晰划分曲线段，列出各段参数范围、表达式和积分结果，然后汇总。建议附简单示意图帮助确保各段和方向理解正确，虽然不要求绘图，但对避免弄错积分上下限和符号很有帮助。

### 5.2.2 梯度场和保守场
- **核心概念与公式讲解：**如果向量场 $\mathbf{F}$ 可以表示为某标量势函数的梯度：$\mathbf{F}=\nabla \phi$，则称$\mathbf{F}$为**梯度场**。梯度场拥有**保守性**：沿任意封闭路径的线积分为0，且积分只依赖于端点，与路径无关。这种场称**保守场**或无旋场。数学等价条件（在单连通区域）：$\exists \phi$ 使 $\mathbf{F}=\nabla\phi \iff \nabla\times\mathbf{F}=\mathbf{0}$（见5.3.2），在二维则 $\partial P/\partial y = \partial Q/\partial x$。保守场的一个重要性质是： 
  $$\int_{C_{A\to B}} \mathbf{F}\cdot d\mathbf{r} = \phi(B)-\phi(A)，$$ 
  即线积分等于势函数在起终点的差。这提供了计算线积分的捷径和判别保守场的方法。
- **典型例题：**判断向量场 $\mathbf{F}(x,y)=(2xy+3,\;x^2+4y)$ 是否为保守场？若是，求一个势函数 $\phi(x,y)$，并利用$\phi$计算沿路径从 $(0,0)$ 到 $(1,2)$ 的线积分值。
- **解题步骤：**  
  1. 判别：$P(x,y)=2xy+3,\;Q(x,y)=x^2+4y$。$\frac{\partial P}{\partial y}=2x,\;\frac{\partial Q}{\partial x}=2x$，相等，且定义域$\mathbb{R}^2$ 单连通，故$\mathbf{F}$保守。  
  2. 求势函数 $\phi$：$\phi_x=2xy+3$，对$x$积分得 $\phi(x,y)=x^2y+3x+g(y)$。再$\phi_y=x^2+g'(y)$应等于$Q=x^2+4y$，比较得 $g'(y)=4y$，积分 $g(y)=2y^2$（取常数0）。所以 $\phi(x,y)=x^2y+3x+2y^2$。  
  3. 计算线积分：$\phi(1,2)-\phi(0,0)=(1^2*2+3*1+2*4)-(0+0+0)=2+3+8=13$。  
- **答案：** $\mathbf{F}$ 是保守场，因为 $\partial P/\partial y = \partial Q/\partial x$（均为 $2x$）。可取势函数 $\phi(x,y)=x^2y+3x+2y^2$（其梯度正好等于$\mathbf{F}$）。因此任一路径从 $(0,0)$ 到 $(1,2)$ 的线积分都等于 $\phi(1,2)-\phi(0,0)=13$。
- **通用解题步骤总结与考试技巧：**判断保守场先算 $P_y$ 和 $Q_x$ 是否相等（二维），若等则大概率保守（仍需区域无孔洞才能保证存在势函数）。若确定保守，可通过积分法求$\phi$：对$P$积分得$\phi(x,y)$初步表达式，加上只含$y$的未知函数，再借$Q$求其导确定。检查时对照$\phi_y$和$Q$是否一致。找到势函数后，计算线积分变得简单，用端点代入势函数相减即可，比按路径积分节省时间。要注意**常数项**影响势函数不影响梯度，可任取方便。考试中典型：给出场验证保守并找$\phi$；或给封闭曲线积分，通过判断场保守直接判零。对于非保守场，分路径积分结果会依路径而异，可给反例路径说明。答题应逻辑清楚：先验条件（偏导相等）→由区域连通性推出存在$\phi$→积分等于势能差。写出势函数最终式并可检验其梯度确为$\mathbf{F}$，以确保准确无误。

### 5.2.3 线积分的各种表达形式
- **核心概念与公式讲解：**线积分有不同表述方式：(1) **路径参数形式：** $\int_C P\,dx+Q\,dy = \int_{t=a}^{b}[P(x(t),y(t))x'(t)+Q(x(t),y(t))y'(t)]dt$，这是定义直接化为计算用的形式；(2) **微分形式：**将 $P\,dx+Q\,dy$ 看作微分1-形式积分，有助于使用像Green定理这样的工具；(3) 若曲线用函数关系给出，如 $y=g(x)$ 或 $x=h(y)$，可转为单一变量积分：$\int_{x_1}^{x_2}[P(x,g(x)) + Q(x,g(x))g'(x)]dx$ 或类似形式。这本质上是参数取 $x$ 或 $y$ 本身的特例；(4) **第一类线积分** $\int_C f\,ds$ 可写为 $\int_{x_1}^{x_2} f(x,g(x))\sqrt{1+(g'(x))^2}\,dx$（或参数形式 $\int_a^b f(x(t),y(t))\|\mathbf{r}'(t)\|dt$），这是沿曲线累积标量值乘弧长元的形式。各种形式在具体问题中灵活选用：如路径为坐标轴平行折线，可直接分段积$P\,dx$或$Q\,dy$；路径为函数图像可代入微分关系。无论何种形式，本质遵循统一定义，结果相同。
- **典型例题：**设闭合曲线 $C$ 由抛物线段 $y=x^2$ ($0\le x\le1$) 和直线段 $x=1$ ($1\ge y\ge0$) 组成（逆时针方向）。写出 $\oint_C (P\,dx+Q\,dy)$ 的计算表达式（无需求具体值），其中 $P(x,y),Q(x,y)$ 为一般连续函数。
- **解题思路：**  
  1. 分段列积分：沿 $C_1: y=x^2$ $(0\to1)$可取参数$x$，则 $dy=2x\,dx$；沿 $C_2: x=1$ $(y:1\to0$反向)$dy$ 取负。  
  2. $C_1$ 部分：$\int_{x=0}^{1}[P(x,x^2)\,dx+Q(x,x^2)\,dy] = \int_{0}^{1}[P(x,x^2) + Q(x,x^2)\cdot2x]dx$。  
  3. $C_2$ 部分：$x=1,dx=0$，积分 $\int_{y=1}^{0}[P(1,y)\,dx+Q(1,y)\,dy] = \int_{1}^{0}Q(1,y)\,dy = -\int_{0}^{1}Q(1,y)\,dy$。  
- **答案：** 
  $\displaystyle\oint_C (P\,dx+Q\,dy) = \int_{0}^{1}\!\Big[P(x,x^2) + 2x\,Q(x,x^2)\Big]dx \;-\; \int_{0}^{1} Q(1,y)\,dy$。  
  （第一项为抛物线段积分，第二项为直线段积分，注意符号为负以保证整体逆时针方向。） 
- **通用解题步骤总结与考试技巧：**针对特定几何关系的曲线，线积分可以简化表达。例如：水平线段上$dy=0$，积分仅剩$\int P\,dx$；垂直线段上$dx=0$，仅剩$\int Q\,dy$。这些可直接运用，避免不必要参数化。封闭曲线积分写为几段之和时，方向统一很重要，本例逆时针，所以直线段积分取负号（因其自然参数方向为上到下与整体方向相反）。如果运用Green定理，需转换为对应双积分形式（见5.2.4）。总之，处理线积分要灵活：参数选取方便计算即可，结果形式不同但等价。答题时应根据给定信息选择**最佳表示**，如函数图形曲线就用$x$或$y$直接积分，折线就分段简单形式。确保各段积分式和取值区间正确，并阐明如何组合。

### 5.2.4 Green定理
- **核心概念与公式讲解：**Green定理将**平面闭合曲线**的线积分和其内部区域的二重积分联系起来。**环路形式：**
  $$\oint_C (P\,dx+Q\,dy) = \iint_D \Big(\frac{\partial Q}{\partial x} - \frac{\partial P}{\partial y}\Big)\,dA,$$ 
  其中 $C$ 是区域 $D$ 的边界，取**正向**（通常选取逆时针方向）。这公式揭示曲线积分的“旋度”累积等于区域内的微观旋度积分。**通量形式：**
  $$\oint_C (L\,dy - M\,dx) = \iint_D \Big(\frac{\partial L}{\partial x} + \frac{\partial M}{\partial y}\Big)\,dA,$$ 
  可通过交换$P=-M,\;Q=L$从上式得到。它表明闭曲线的“流出量”等于区域内场的散度积分，是二维Gauss定理。Green定理应用：计算复杂闭合曲线积分转为易算的面积积分，或证明某场保守（若$Q_x-P_y=0$则闭合积分$\oint_C=0$）。注意：方向必须约定统一，如果$C$为顺时针，应在公式中加负号或先反向。
- **典型例题：**利用Green定理计算沿矩形$C$（顶点$(0,0)\to(3,0)\to(3,2)\to(0,2)\to(0,0)$逆时针）对场 $P(x,y)=x^2,\;Q(x,y)=xy$ 的积分 $\oint_C (P\,dx+Q\,dy)$。
- **解题步骤：**  
  1. 计算 $\partial Q/\partial x - \partial P/\partial y$：$\partial(xy)/\partial x = y$，$\partial(x^2)/\partial y = 0$，差为 $y$。  
  2. 矩形区域 $D:\{0\le x\le3,\;0\le y\le2\}$，所以 $\oint_C = \iint_D y\,dA = \int_{x=0}^{3}\int_{y=0}^{2} y\,dy\,dx$。  
  3. 内积分 $\int_0^2 y\,dy = 2$，外积分 $\int_0^3 2\,dx = 6$。  
- **答案：** $\displaystyle\oint_C (x^2\,dx+xy\,dy) = 6$。  
- **通用解题步骤总结与考试技巧：**使用Green定理时，首先确定$C$是闭合的并选择正向（一般逆时针为正）。然后计算 integrand $Q_x - P_y$ 或 $L_x+M_y$，把原问题降为求一个区域上的二重积分，这通常更容易。注意对区域$D$正确设限（矩形直接乘，其他可分段或用极坐标等）。对保守场检验来说，若$Q_x=P_y$，则闭合环路积分$=0$。在解题中应明确说明运用了Green定理，并写出相应偏导表达式。计算二重积分时，别忘结合区域几何简化计算，如矩形可拆为边长相乘。本例中对称性也可以验证结果，比如左右两边贡献抵消，只剩上边 $y=2$ 和下边 $y=0$ 差 $=6$。Green定理将线积分化为面积积分是非常有效的技巧，考试常用于：计算封闭曲线积分（特别是边界复杂但区域简单时），或推导几何量公式（如面积公式：$\frac{1}{2}\oint_C (x\,dy-y\,dx)=\text{Area}$）。作答时确保标注边界方向和最终结果。

### 5.3.1 散度
- **核心概念与公式讲解：**散度 $\displaystyle \nabla\cdot\mathbf{F}$ 表示向量场在某点的“体积膨胀率”，是标量。平面场 $\mathbf{F}(x,y)=(P,Q)$ 有 
  $$\nabla\cdot\mathbf{F} = \frac{\partial P}{\partial x} + \frac{\partial Q}{\partial y}；$$ 
  空间场 $\mathbf{F}(x,y,z)=(P,Q,R)$ 则 
  $$\nabla\cdot\mathbf{F} = \frac{\partial P}{\partial x} + \frac{\partial Q}{\partial y} + \frac{\partial R}{\partial z}.$$ 
  散度>0 表示场在该点有“源”（流出多于流入），散度<0 表示有“汇”。若散度=0，称场**无散**或不可压缩，局部没有净体积产生或消失。物理上：流体速度场散度反映是否有源汇（水源或漏斗），电场散度与电荷密度相关等。
- **典型例题：**给定二维场 $\mathbf{F}(x,y)=(x^2-y,\;3x+e^y)$，求 $\nabla\cdot\mathbf{F}$，并判断其在 $(1,0)$ 处的符号含义。
- **解题步骤：**  
  $\frac{\partial}{\partial x}(x^2-y) = 2x$，$\frac{\partial}{\partial y}(3x+e^y) = e^y$。所以 $\nabla\cdot\mathbf{F} = 2x + e^y$。在$(1,0)$ 处 $\nabla\cdot\mathbf{F}=2(1)+1=3>0$，表示$\mathbf{F}$在该点有正散发，像流体在此为源头，向四周流出。  
- **答案：** $\displaystyle \nabla\cdot\mathbf{F}(x,y) = 2x+e^y$。在 $(1,0)$，$\nabla\cdot\mathbf{F}=3$ 为正值，说明此点场有净“源”效应（例如如果$\mathbf{F}$是速度场，表示此处流体向外扩散）。  
- **通用解题步骤总结与考试技巧：**求散度直接对各分量做相应偏导并相加即可，过程简单易错在疏漏某项或错导常数。判断场无散只需看散度表达式是否恒为零。物理阐释散度符号时，可结合场本身说明正散度为源、负为汇或零为场流量守恒。若考试考证明形式，如将闭曲线通量转为散度双重积分（Green散度形式）或将闭曲面通量转为散度体积分（Gauss定理），需要写出散度表达并说明推理。一般计算题可能给出具体场要求散度值，解答过程中注意正确运算并尽量简化表达式。例如上例散度算出 $2x+e^y$ 后代入值即可。还可提醒散度为0的场在物理上多为无源场，可能进一步在Gauss定理中体现通量为0等性质（预示5.5.2内容）。总之，散度概念不难，重在理解来源意义和运用定理时的角色。

### 5.3.2 旋度
- **核心概念与公式讲解：**旋度 $\displaystyle \nabla\times\mathbf{F}$ 描述向量场的局部旋转特性，其结果为向量。三维场 $\mathbf{F}=(P,Q,R)$ 的旋度：
  $$\nabla\times\mathbf{F}=\Big(\frac{\partial R}{\partial y}-\frac{\partial Q}{\partial z},\;\frac{\partial P}{\partial z}-\frac{\partial R}{\partial x},\;\frac{\partial Q}{\partial x}-\frac{\partial P}{\partial y}\Big)。$$ 
  在平面场$(P,Q)$情形，可将$R=0$，则旋度只有垂直于平面的$k$ 分量 $\displaystyle (\nabla\times\mathbf{F})_k = \frac{\partial Q}{\partial x} - \frac{\partial P}{\partial y}$，可称作**标量旋度**。旋度表示场的涡旋强度和轴向。$\nabla\times\mathbf{F}=\mathbf{0}$ 称$\mathbf{F}$**无旋**，在简单区域等价于$\mathbf{F}$保守。有旋场则绕某轴存在环流趋势。物理：$\nabla\times v$ 刻画流体微旋转，$\nabla\times E$ 关联时变磁场产生电场（Faraday定律），等等。
- **典型例题：**求平面向量场 $\mathbf{F}(x,y)=(y^3,\,-3xy^2)$ 的旋度。
- **解题步骤：**  
  由于$R=0$，旋度只有$k$分量：$\frac{\partial(-3xy^2)}{\partial x} - \frac{\partial(y^3)}{\partial y} = -3y^2 - 3y^2 = -6y^2$。方向沿负$z$轴。  
- **答案：** $\displaystyle \nabla\times\mathbf{F}(x,y) = (0,0,\,-6y^2)$，即标量旋度 $= -6y^2$，方向垂直平面（符号为负表示旋转方向为顺时针）。  
- **通用解题步骤总结与考试技巧：**计算三维旋度需小心排列顺序及符号（可记忆行列式形式或逐分量计算），二维场则快速应用$\partial Q/\partial x - \partial P/\partial y$。判断保守场时，若旋度$\equiv0$则无旋且在单连通域必存在势函数。物理意义说明时，指明旋度向量方向遵循右手定则确定旋转轴方向，其模表示旋转强度。考试可能要求验证Green定理的环路积分等于区域内旋度积分，这正是$\oint P\,dx+Q\,dy=\iint (Q_x-P_y)\,dA$。或考判断场是否无旋（如$Q_x=P_y$则旋度为0）。解答时可将结果指出如“旋度仅$k$分量，等于...”。注意区分散度和旋度，不要混淆表达式。旋度作为向量，当场在二维平面内时通常只关注垂直于平面的分量，用标量表示。结论性话语如“因此场无旋”或“存在非零旋度表明场有涡旋”可作为补充说明。总而言之，旋度计算要细心，理解其零与否的意义往往与保守性对应。

### 5.3.3 Green公式的散度、旋度形式
- **核心概念与公式讲解：**Green定理有等价的两种表述：（1）**旋度形式**（即先前5.2.4公式）：$\oint_C (P\,dx+Q\,dy) = \iint_D (Q_x - P_y)\,dA$，突出$(Q_x-P_y)$这个二维**旋度**分量将环路积分化为区域旋度积分。（2）**散度形式**：$\oint_C (L\,dy - M\,dx) = \iint_D (L_x + M_y)\,dA$，它强调$(L_x+M_y)$，即二维场$(M,L)$的散度，将闭曲线通量转换为区域散度积分。这两个形式本质一致：第一种是**Kelvin定理**平面版，描述曲线环流与区域微旋度的关系；第二种是**Gauss定理**平面版，描述边界外流与区域源汇分布的关系。在实际应用中，可根据积分形式匹配选择对应定理：遇到$\oint (P\,dx+Q\,dy)$就用旋度形式，$\oint (L\,dy - M\,dx)$就用散度形式。两者符号差异源于定义约定，应谨慎对待。
- **典型例题：**将Green定理的两种形式都写出，并说明它们各自对应的物理意义。
- **解题思路：**  
  1. 旋度形式：$\oint_C (P\,dx+Q\,dy) = \iint_D (Q_x - P_y)\,dA$，意义：沿闭曲线的环量等于区域内场的总涡量（旋度积分）。若$Q_x=P_y$无旋，则闭合环量为0。  
  2. 散度形式：$\oint_C (L\,dy - M\,dx) = \iint_D (L_x + M_y)\,dA$，意义：闭曲线的外向流量等于区域内场源强度总和。若$L_x+M_y=0$无散，则净流出为0（流体无生成或汇集）。  
- **答案：** **Green定理（旋度形式）：**$\displaystyle\oint_C (P\,dx+Q\,dy) = \iint_D \Big(\frac{\partial Q}{\partial x} - \frac{\partial P}{\partial y}\Big)\,dA$，它表明闭合曲线环绕的场循环等于区域内微小旋转的面积累积。**Green定理（散度形式）：**$\displaystyle\oint_C (L\,dy - M\,dx) = \iint_D \Big(\frac{\partial L}{\partial x} + \frac{\partial M}{\partial y}\Big)\,dA$，表示闭曲线穿出的总流量等于区域内部源汇（散度）的面积积分。  
- **通用解题步骤总结与考试技巧：**在解题中，能灵活识别和运用Green定理的两种形式十分重要。如果题目给出积分形式稍作变形即可匹配散度或旋度形式，应相应调整变量名或符号。例如$\oint (y\,dx + x\,dy)$可识别为$P=y, Q=x$ 用旋度形式；而$\oint (x\,dy - y\,dx)$更方便视为$L=x, M=y$ 用散度形式。物理理解上，两形式正对应**Stokes定理**和**高斯定理**在二维的特例，这是后续5.5节的低维验证。考试回答涉及两形式时，应写清公式和符号定义，然后解释如果场无旋（或无散）则左侧环量（或通量）为0的推论。对学生而言，牢记“$P\,dx+Q\,dy$对应$Q_x-P_y$”、“$L\,dy-M\,dx$对应$L_x+M_y$”避免混淆。正确方向依旧重要：按区域取逆时针为正。如果曲线走向与约定相反，公式将引入负号。总之，这节综合强调Green定理的双重面貌，答题注重公式准确和意义到位。

### 5.4.1 标量场上的曲面积分
- **核心概念与公式讲解：**曲面积分（标量）$\displaystyle\iint_S \phi(x,y,z)\,dS$对曲面$S$上的标量场$\phi$进行面积累积。当$\phi\equiv1$时即为求曲面面积。计算时常用参数化：若$\mathbf{r}(u,v)$ 参数表示$S$，则 
  $$dS = \|\mathbf{r}_u\times\mathbf{r}_v\|\,du\,dv,$$ 
  从而 
  $$\iint_S \phi\,dS = \iint_{D_{uv}} \phi(\mathbf{r}(u,v))\,\|\mathbf{r}_u\times\mathbf{r}_v\|\,du\,dv.$$ 
  对图形 $z=f(x,y)$ 的上表面，可取参数$(x,y)$：$dS = \sqrt{1+f_x^2+f_y^2}\,dx\,dy$。要注意区分曲面积分与平面区域积分的区别：曲面投影到坐标面会产生面积“拉伸”因子。应用上，曲面积分可求曲面薄膜质量（$\phi$为密度），受压面积力等。
- **典型例题：**求平面 $z=5-2x-3y$ 在第一卦限截面（与坐标平面围成的三角形区域）的面积。
- **解题步骤：**  
  1. 该平面在 $x$-$y$ 平面的投影是截距为 $(2.5,0)$、$(0,1.\overline{6})$ 和$(0,0)$ 的直角三角形。  
  2. 用 $z=f(x,y)=5-2x-3y$，$f_x=-2,f_y=-3$。曲面面积 
     $$S = \iint_{D} \sqrt{1+(-2)^2+(-3)^2}\,dx\,dy = \sqrt{14}\iint_{D}dx\,dy.$$ 
  3. $D$ 为直角三角形，底边长$2.5$，高$1.667$，面积 $= \frac{1}{2}\cdot2.5\cdot1.667=\frac{25}{12}\approx2.0833$。  
  4. 面积 $S = \sqrt{14}\cdot\frac{25}{12} = \frac{25\sqrt{14}}{12}$。  
- **答案：** 所求平面的面积 $\displaystyle= \frac{25}{12}\sqrt{14}$。  
- **通用解题步骤总结与考试技巧：**对平面或可表达为单值函数的曲面，用公式 $dS=\sqrt{1+f_x^2+f_y^2}dA$ 较简洁。但若曲面用参数更方便（如球面、柱面），则应选恰当参数化计算。要确保积分区域$D$（曲面在某坐标平面的投影）容易描述并算面积积分。在上述例子中，我们先算投影面积，再乘以斜面斜率因子$\sqrt{14}$，是常用技巧。参数化也可用：例如令$x=u,y=v$（投影），则 $\mathbf{r}_u=(1,0,-2),\;\mathbf{r}_v=(0,1,-3)$，$\|\mathbf{r}_u\times \mathbf{r}_v\|=\sqrt{(-2)^2+(-3)^2+1^2}=\sqrt{14}$，一致。解题时应明确所用方法（参数/投影）并保持步骤清晰。对于复杂曲面如曲率变化大、需分块计算。结果最好保持根号形式不要转小数，以免精度误差。此类问题可推广：若问曲面重心或受力等，则在积分中加入相应$\phi$，解法类似，只是$\phi$改变积分 integrand。考试遇到需要推导曲面积分公式时，可通过微元面积推导：如 $z=f(x,y)$ 微元面积$\sqrt{1+f_x^2+f_y^2}dxdy$。总之，把曲面积分化为双重积分进行计算是基本策略。

### 5.4.2 向量场上的曲面积分（通量积分）
- **核心概念与公式讲解：**曲面上向量场的通量积分定义为 $\displaystyle\iint_S \mathbf{F}\cdot \mathbf{n}\,dS$，其中 $\mathbf{n}$ 是曲面单位法向。它度量了向量场穿过曲面的“流量”。计算时可用**投影法**：对图形$z=f(x,y)$，**向上法向**的微元通量 
  $$\mathbf{F}\cdot \mathbf{n}\,dS = (-P f_x - Q f_y + R)\,dx\,dy,$$ 
  其中 $P,Q,R$ 是$\mathbf{F}=(P,Q,R)$分量。更一般的，选参数化 $\mathbf{r}(u,v)$，取单位法向 $\mathbf{n}=\frac{\mathbf{r}_u\times\mathbf{r}_v}{\|\mathbf{r}_u\times\mathbf{r}_v\|}$ 或直接用 $\mathbf{F}\cdot(\mathbf{r}_u\times\mathbf{r}_v)\,du\,dv$（有方向约定）计算带符号通量。**正方向**需在题中说明（如外侧、上侧）。若$S$为闭合曲面，常用高斯定理转化（见5.5.2）。 
- **典型例题：**求向量场 $\mathbf{F}(x,y,z)=(x,y,z)$ 通过半径为$R$的球面（整个球面）向外的总通量。
- **解题步骤：**  
  对单位法向 $\mathbf{n}=\frac{(x,y,z)}{R}$（外向），$\mathbf{F}\cdot\mathbf{n} = \frac{x^2+y^2+z^2}{R} = R$ 在球面上为常数。球面面积 $4\pi R^2$，故通量 $=R \cdot 4\pi R^2 = 4\pi R^3$。  
  （也可用高斯定理：$\nabla\cdot\mathbf{F}=1+1+1=3$，球体积 $\frac{4}{3}\pi R^3$，乘积 $3 \cdot \frac{4}{3}\pi R^3=4\pi R^3$。）  
- **答案：** 通量 $=4\pi R^3$。  
- **通用解题步骤总结与考试技巧：**对于高对称曲面（球、圆柱侧面等），向量场若与法向关系简单，可无需积分直接求。如本例$\mathbf{F}$在球面方向与法向一致、大小与半径有关，因此直接乘面积得结果。一般曲面通量计算，先明确曲面参数和法向方向：若$S$封闭则“向外”指外侧法向，若$S$为开口曲面则根据题意定“正向”。计算中要分清$P,Q,R$对应哪个坐标，防止代入错位。对于$z=f(x,y)$类，用公式$-P f_x - Q f_y + R$简化计算较好。本例用Gauss定理是更优解，一步算出。考试常见：用Gauss定理算封闭曲面的通量，更复杂开放曲面才直接积分。解题建议：**尽量利用对称和定理**。若不用定理，最好列参数形式确保有依据如$\mathbf{r}_\theta\times\mathbf{r}_\phi$等。最后检查量纲或特殊值（如$R=0$通量应0）验证结果合理。涉及符号时要留意：例如下表面朝负向法向通量会带负号。良好习惯是在计算前明确写出所用曲面及法向方向。问答题可能要解释通量物理意义，如电场通量等，可联系Gauss法则说明。总之，曲面通量积分灵活应用多种方法，选择最简便正确的途径作答最为明智。

### 5.5.1 Stokes定理–旋度定理
- **核心概念与公式讲解**：Stokes定理将**空间曲面**边界上的线积分与曲面上旋度的曲面积分联系起来：
  $$\oint_{\partial S} \mathbf{F}\cdot d\mathbf{r} = \iint_S (\nabla\times\mathbf{F})\cdot \mathbf{n}\,dS,$$ 
  其中曲线 $\partial S$ 按右手定则与取定的曲面法向 $\mathbf{n}$ 定向一致。Stokes定理推广了Green定理的旋度形式：当$S$取在$x$-$y$平面时就化为Green公式。它说明宏观环路积分等于场旋度的累积贡献。重要推论：$\nabla\times\mathbf{F}=\mathbf{0}$则任一闭合环路积分皆为0（在单连通域），此时$\mathbf{F}$保守。Stokes定理常用于：简化复杂线积分（通过选择合适$S$计算右侧更简单）或证明某些积分与曲面无关（若$\nabla\times\mathbf{F}=0$，闭合路径积分与所跨曲面无关）。
- **典型例题**：用Stokes定理计算向量场 $\mathbf{F}(x,y,z)=(-y^2,\;x,\;z^2)$ 沿闭合曲线 $C$ 的积分，其中 $C$ 为平面 $y+z=2$ 与 $x$-$y$ 平面交线（即直线三角形环路）正向。
- **解题思路：**  
  1. 该$C$可视为平面$y+z=2$上三角形的边界。取此平面作为$S$，其法向易求。  
  2. 计算$\nabla\times\mathbf{F}=(\partial R/\partial y-\partial Q/\partial z,\;\partial P/\partial z-\partial R/\partial x,\;\partial Q/\partial x-\partial P/\partial y)=(0-0,\;0-0,\;1-(-2y))=(0,0,1+2y)$。  
  3. $\mathbf{n}$ 可取平面$y+z=2$的单位法向（朝向与$C$方向按右手关系）。平面法向量$(0,1,1)$，单位化$\mathbf{n}=\frac{1}{\sqrt2}(0,1,1)$。  
  4. $(\nabla\times\mathbf{F})\cdot \mathbf{n} = \frac{1}{\sqrt2}(0,0,1+2y)\cdot(0,1,1) = \frac{1}{\sqrt2}(0 + 1+2y)$。  
  5. 面积积分：$S$投影在$y$-$z$面: $y$从0到2，$z=2-y$。$dS = |\mathbf{n}|dA=\sqrt{2}dA$（$dA$为$y$-$z$投影面积元）。所以积分$=\iint (1+2y)/\sqrt2 \cdot \sqrt2\,dy\,dz = \iint (1+2y)\,dy\,dz$ 投影区域三角形：$0\le y\le2,\;0\le z\le 2-y$.  
  6. $\int_{y=0}^{2}\int_{z=0}^{2-y}(1+2y)\,dz\,dy = \int_0^2 (1+2y)(2-y)\,dy = \int_0^2 (2 - y + 4y - 2y^2)\,dy = \int_0^2 (2 + 3y - 2y^2)\,dy = [2y + \frac{3}{2}y^2 - \frac{2}{3}y^3]_0^2 = 4 + 6 - \frac{16}{3} = \frac{18-16}{3} = \frac{2}{3}$。  
- **答案：** $\displaystyle\oint_C \mathbf{F}\cdot d\mathbf{r} = \frac{2}{3}$。  
- **通用解题步骤总结与考试技巧**：应用Stokes定理解题的关键：**选取简便的曲面** $S$ 来计算右侧。通常$S$ 可选为平面或曲面使$\nabla\times\mathbf{F}$ 易积（或为零）。注意选$S$后需确定法向方向与$C$方向的关系（右手法则），以免符号错误。实际计算中，多以 $C$ 在某平面上时选该平面做$S$。如果$S$曲折，也可选其他等价曲面（Stokes定理保证结果不变）。其次，计算$\nabla\times\mathbf{F}$要准确，并点乘法向。若$S$为斜面，可将其投影到坐标平面转化积分，如上例通过投影消去了$\sqrt{2}$因子。Stokes定理也常用于证明无旋场路径无关；若$\nabla\times\mathbf{F}=\mathbf{0}$则$\oint_C \mathbf{F}\cdot dr=0$为任意闭合$C$，这在考试证明题中可能出现。回答Stokes定理概念题要指出边界曲线正向与曲面法向的对应关系，以及与Green定理的联系。总之，熟练掌握斯托克斯定理可将线积分转为曲面积分，在面对复杂空间环线问题时提供思路。

### 5.5.2 Gauss定理–散度定理
- **核心概念与公式讲解**Gauss定理（散度定理）将**闭合曲面**的通量积分转化为所围体积的散度积分：
  $$\oint_{S} \mathbf{F}\cdot \mathbf{n}\,dS = \iiint_{V} \nabla\cdot \mathbf{F}\,dV,$$ 
  其中$S$为体积$V$的边界，$\mathbf{n}$取向外法向。它表明体积中的“源”（散度积分）总和决定了穿出边界的净流量。若$\nabla\cdot\mathbf{F}=0$，封闭曲面的净通量必为0（场没有净产生或汇集）。Gauss定理常用于快速计算对称场通过闭曲面的通量（比如电场通量计算），或推论积分恒等式（如散度零场通过任意闭合面通量皆零）。
- **典型例题：**用散度定理计算向量场 $\mathbf{F}(x,y,z)=(xy,\;yz,\;zx)$ 通过立方体（顶点$(0,0,0)$到$(a,a,a)$）表面向外的总通量。
- **解题步骤：**  
  1. 计算散度：$\nabla\cdot \mathbf{F} = \partial(xy)/\partial x + \partial(yz)/\partial y + \partial(zx)/\partial z = y + z + x$。  
  2. 应用Gauss定理：通量 $=\iiint_{0}^{a}\iiint_{0}^{a}\iiint_{0}^{a} (x+y+z)\,dx\,dy\,dz$。  
  3. 积分：$\int_0^a\int_0^a\int_0^a (x+y+z)\,dx\,dy\,dz = \int_0^a\int_0^a [\frac{1}{2}a^2 + ya + \frac{1}{2}a^2] dy\,dz$（先对$x$积分）$= \int_0^a\int_0^a (a^2 + ya)\,dy\,dz = \int_0^a [a^2y + \frac{1}{2}a y^2]_0^a dz = \int_0^a (a^3 + \frac{1}{2}a^3)\,dz = \int_0^a \frac{3}{2}a^3 dz = \frac{3}{2}a^3 \cdot a = \frac{3}{2}a^4$。  
  （更快的方法：积分拆分：$\iiint x\,dV = a \cdot \frac{a^2}{2} \cdot a = \frac{1}{2}a^4$，同理$\iiint y\,dV=\frac{1}{2}a^4$，$\iiint z\,dV=\frac{1}{2}a^4$，和为$\frac{3}{2}a^4$。）  
- **答案：** 通量 $=\displaystyle\frac{3}{2}a^4$。  
- **通用解题步骤总结与考试技巧：**Gauss定理解题要点：首先确认曲面是**闭合**的，然后计算$\nabla\cdot \mathbf{F}$并在所围体积上积分。对称场常可简化散度（如例中并不特殊对称，但计算不难）。解三重积分时，可利用乘积结构简化，如把$\int_0^a\int_0^a\int_0^a (x+y+z) dxdydz$拆成三个单独项积。若场散度简单常数，则结果更方便（如均匀源场散度常数乘体积）。对于不规则闭体，有时需拆分体积或转换坐标。物理上，Gauss定理可在证明电磁学规律时使用：例如从积分形式推出微分形式，做法是在Gauss公式中让$V$趋于无穷小，从而得到$\nabla\cdot \mathbf{F} =$ 源密度。考试常见题：利用散度定理计算通量（如本例），或证明某积分恒等式（如上一句所述）。答题应写明“由散度定理，…”，然后计算散度和体积分。注意法向约定：默认取外法向，对应散度公式右侧不需要加负号。最终答案单位和量级可检查：本例$\frac{3}{2}a^4$量纲为长度^4，与通量=场(长度^2)乘面积(长度^2)一致。Gauss定理在场论中意义深刻，数学应用广泛，熟练掌握能解决繁杂的通量积分问题。

### 5.6 Maxwell方程组：Stokes定理和 Gauss定理的应用
- **核心概念与公式讲解：**Maxwell四条方程是经典电磁学规律，用散度、旋度简洁表述，可视为Gauss定理和Stokes定理的物理体现：
  1. **高斯定律（电）：**$\nabla\cdot \mathbf{E} = \rho/\varepsilon_0$。积分形式：$\oint_S \mathbf{E}\cdot d\mathbf{S} = Q_{\text{enc}}/\varepsilon_0$，这是应用散度定理将电场通量与体内电荷对应，属于Gauss定理的电学版本。它说明电荷是电场源，正电荷产生外散场，负电荷吸入场。
  2. **高斯定律（磁）：**$\nabla\cdot \mathbf{B} = 0$。积分形式：$\oint_S \mathbf{B}\cdot d\mathbf{S} = 0$，无净磁通出任意闭合面，说明没有磁单极子存在，磁力线总闭合。
  3. **法拉第感应定律：**$\nabla\times \mathbf{E} = -\partial \mathbf{B}/\partial t$。应用Stokes定理：$\oint_C \mathbf{E}\cdot d\mathbf{r} = -\frac{d}{dt}\iint_S \mathbf{B}\cdot d\mathbf{S}$。即变化的磁通量产生电场环流（感应电动势），这是旋度与曲面磁通变化的联系。
  4. **安培-麦克斯韦定律：**$\nabla\times \mathbf{B} = \mu_0 \mathbf{J} + \mu_0\varepsilon_0 \partial \mathbf{E}/\partial t$。Stokes形式：$\oint_C \mathbf{B}\cdot d\mathbf{r} = \mu_0 I_{\text{enc}} + \mu_0\varepsilon_0 \frac{d}{dt}\iint_S \mathbf{E}\cdot d\mathbf{S}$。即电流及变化电场产生磁场环流。
  
  以上：前两条源自Gauss定理（散度描述源），后两条源自Stokes定理（旋度描述环流）。Maxwell方程组高度凝练了电磁场的源与涡旋规律，是散度、旋度定理在物理中的直接运用。
- **典型例题：**从电场的高斯定律积分形式 $\oint_S \mathbf{E}\cdot d\mathbf{S} = Q_{\text{enc}}/\varepsilon_0$ 推导其微分形式 $\nabla\cdot \mathbf{E} = \rho/\varepsilon_0$（其中 $\rho$ 为电荷密度）。
- **解题步骤：**  
  取任意体积$V$，$Q_{\text{enc}}=\iiint_V \rho\,dV$。由Gauss定理，$\oint_{\partial V} \mathbf{E}\cdot d\mathbf{S} = \iiint_V \nabla\cdot \mathbf{E}\,dV$。利用积分形式高斯定律，左边$=\frac{1}{\varepsilon_0}Q_{\text{enc}}=\frac{1}{\varepsilon_0}\iiint_V \rho\,dV$。因此 $\iiint_V (\nabla\cdot \mathbf{E} - \rho/\varepsilon_0)\,dV=0$ 对任意$V$成立，只能是 integrand 恒为0，即 $\nabla\cdot \mathbf{E} = \rho/\varepsilon_0$。  
- **答案：**利用散度定理，$\displaystyle\iiint_V \nabla\cdot \mathbf{E}\,dV = \oint_{\partial V} \mathbf{E}\cdot d\mathbf{S} = \frac{1}{\varepsilon_0}\iiint_V \rho\,dV$。由任意体积$V$推知 integrand 相等，故 $\nabla\cdot \mathbf{E} = \rho/\varepsilon_0$。这正是高斯定律的微分形式。  
- **通用解题步骤总结与考试技巧：**对Maxwell方程组的考查，一般不会要求完整推导，而是理解其与散度、旋度定理的联系。如：识别前两条属于Gauss定理应用，后两条属于Stokes定理应用。在回答概念题时，可简要指出各式的物理意义，如第一条说明电荷是电场源头，第二条说明无磁单极子，第三条表明变化磁场产生电场涡旋（电动势），第四条则是电流和变化电场共同产生磁场涡旋。若是证明题，如上所示，要结合散度定理或Stokes定理从积分式推出微分式，注意清晰列出使用哪个定理以及积分换微分的步骤。对于法拉第和安培-麦克斯韦定律，也可类似地利用Stokes定理说明环路积分和面积分变化率关系。Maxwell方程组在数学上验证了$\nabla\cdot(\nabla\times\mathbf{B})=0$以及$\nabla\times(\nabla\phi)=0$的恒等式在物理中的必然性。总之，Maxwell方程组是散度和旋度定理的典范应用，说明对称性、守恒律等，通过这些定理转化为简洁形式。因此考试解答相关问题需同时具备物理和数学的论述，条理分明地指出联系。
$$$
